<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MiXiM: BaseDecider Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>BaseDecider Class Reference<br/>
<small>
[<a class="el" href="a00447.html">decider - decider modules</a>,&nbsp;<a class="el" href="a00451.html">baseModules - base module classes of MiXiM</a>]</small>
</h1><!-- doxytag: class="BaseDecider" --><!-- doxytag: inherits="Decider" -->
<p>Provides some base functionality for most common deciders.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="a00258_source.html">BaseDecider.h</a>&gt;</code></p>

<p>Inherits <a class="el" href="a00067.html">Decider</a>.</p>

<p>Inherited by <a class="el" href="a00068.html">Decider80211</a>, <a class="el" href="a00071.html">Decider802154Narrow</a>, and <a class="el" href="a00179.html">SNRThresholdDecider</a>.</p>
<div class="dynheader">
Collaboration diagram for BaseDecider:</div>
<div class="dynsection">
<div class="center"><img src="a00499.png" border="0" usemap="#BaseDecider_coll__map" alt="Collaboration graph"/></div>
<map name="BaseDecider_coll__map" id="BaseDecider_coll__map">
<area shape="rect" href="a00067.html" title="The basic Decider class." alt="" coords="5,5,72,32"/><area shape="rect" href="a00182.html" title="Data about an currently ongoing ChannelSenseRequest." alt="" coords="96,5,253,32"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="a00500.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00182.html">tCSRInfo</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Data about an currently ongoing ChannelSenseRequest.  <a href="a00182.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a7232c10b806ef074db6b1452664cc4a2">BaseDeciderControlKinds</a> { <a class="el" href="a00016.html#a7232c10b806ef074db6b1452664cc4a2ab80ab87167f9836332d1d5678f6aab64">PACKET_DROPPED</a> =  22100, 
<a class="el" href="a00016.html#a7232c10b806ef074db6b1452664cc4a2a1944cc67bf3f0c98342e3975bd05021c">LAST_BASE_DECIDER_CONTROL_KIND</a>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>The kinds of ControlMessages this <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> sends. </p>
 <a href="a00016.html#a7232c10b806ef074db6b1452664cc4a2">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#acff4618fa7a9c2e9abf257e60e487de2">BaseDecider</a> (<a class="el" href="a00076.html">DeciderToPhyInterface</a> *<a class="el" href="a00067.html#ac0f72556cb799d883b4219cab58320bb">phy</a>, double <a class="el" href="a00016.html#a5eece8bf532f92912ccbd0a3bc4d6fb0">sensitivity</a>, int <a class="el" href="a00016.html#a33e7f02028e78116193d09d6cdbc987e">myIndex</a>, bool <a class="el" href="a00016.html#aa22cd5156240713e37578172ba5557ce">debug</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes the decider with the passed values.  <a href="#acff4618fa7a9c2e9abf257e60e487de2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a273892d7b0c9874e4efe3c7755aa7a17">processSignal</a> (AirFrame *frame)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Processes an AirFrame given by the <a class="el" href="a00149.html" title="Provides initialisation for several AnalogueModels and Deciders from modules directory...">PhyLayer</a>.  <a href="#a273892d7b0c9874e4efe3c7755aa7a17"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="a00043.html">ChannelState</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a35e3f8f4e683747fbec1618ee1608982">getChannelState</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A function that returns information about the channel state.  <a href="#a35e3f8f4e683747fbec1618ee1608982"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#afd31e5a65d1798d329ace9bdbec25d64">handleChannelSenseRequest</a> (ChannelSenseRequest *request)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function is called by the <a class="el" href="a00149.html" title="Provides initialisation for several AnalogueModels and Deciders from modules directory...">PhyLayer</a> to hand over a ChannelSenseRequest.  <a href="#afd31e5a65d1798d329ace9bdbec25d64"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#ae4acbca8f960e9c49379ae2a82e2d90b">SignalState</a> { <a class="el" href="a00016.html#ae4acbca8f960e9c49379ae2a82e2d90ba3276f47da7417662597b21ee3afa2d31">NEW</a>, 
<a class="el" href="a00016.html#ae4acbca8f960e9c49379ae2a82e2d90baf0a66719215a9be8335546666facaab6">EXPECT_HEADER</a>, 
<a class="el" href="a00016.html#ae4acbca8f960e9c49379ae2a82e2d90ba5539b8e545c0676dab0b0efb80dfeeac">EXPECT_END</a>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>The current state of processing for a signal. </p>
 <a href="a00016.html#ae4acbca8f960e9c49379ae2a82e2d90b">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4b3ede0e569c778173b7e430d958f92a"></a><!-- doxytag: member="BaseDecider::ReceivedSignal" ref="a4b3ede0e569c778173b7e430d958f92a" args="" -->
typedef std::pair&lt; AirFrame <br class="typebreak"/>
*, int &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a4b3ede0e569c778173b7e430d958f92a">ReceivedSignal</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pair of a AirFrame and the state it is in. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2b6737edc0aa4a9c90f2da7b090caf76"></a><!-- doxytag: member="BaseDecider::CSRInfo" ref="a2b6737edc0aa4a9c90f2da7b090caf76" args="" -->
typedef struct <br class="typebreak"/>
<a class="el" href="a00182.html">BaseDecider::tCSRInfo</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a2b6737edc0aa4a9c90f2da7b090caf76">CSRInfo</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Data about an currently ongoing ChannelSenseRequest. <br/></td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a6a480f87157d0509c0c1fccf94ea9fef">processNewSignal</a> (AirFrame *frame)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Processes a new <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>. Returns the time it wants to handle the signal again.  <a href="#a6a480f87157d0509c0c1fccf94ea9fef"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#aaa588f414cc128325be99fac0cc33000">processSignalHeader</a> (AirFrame *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Processes the end of the header of a received <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>.  <a href="#aaa588f414cc128325be99fac0cc33000"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#ab9cfef6c04e12d2524d45e881f341300">processSignalEnd</a> (AirFrame *frame)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Processes the end of a received <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>.  <a href="#ab9cfef6c04e12d2524d45e881f341300"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac054bb9bbda73689caf6c7cd7e55c8de"></a><!-- doxytag: member="BaseDecider::processUnknownSignal" ref="ac054bb9bbda73689caf6c7cd7e55c8de" args="(AirFrame *frame)" -->
virtual simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#ac054bb9bbda73689caf6c7cd7e55c8de">processUnknownSignal</a> (AirFrame *frame)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Processes any <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a> for which no state could be found. (is an error case). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#afc00c54dd578a9e5eb8d4243625e7af9">getSignalState</a> (AirFrame *frame) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the SignalState for the passed AirFrame.  <a href="#afc00c54dd578a9e5eb8d4243625e7af9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1dba383c238fba606279ef483b435f78"></a><!-- doxytag: member="BaseDecider::handleNewSenseRequest" ref="a1dba383c238fba606279ef483b435f78" args="(ChannelSenseRequest *request)" -->
virtual simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a1dba383c238fba606279ef483b435f78">handleNewSenseRequest</a> (ChannelSenseRequest *request)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles a new incoming ChannelSenseRequest and returns the next (or latest) time to handle the request again. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a2f175306cc0ae9d2805bc050315a47d8">handleSenseRequestEnd</a> (<a class="el" href="a00182.html">CSRInfo</a> &amp;requestInfo)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles the timeout or end of a ChannelSenseRequest by calculating the <a class="el" href="a00043.html" title="Provides information about the current state of the channel:.">ChannelState</a> and returning the request to the mac layer.  <a href="#a2f175306cc0ae9d2805bc050315a47d8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#ae535b44e34061014fe282c36c27b0193">setChannelIdleStatus</a> (bool isIdle)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Changes the "isIdle"-status to the passed value.  <a href="#ae535b44e34061014fe282c36c27b0193"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aad89f97ba5dcfd556be7556f04a840b1"></a><!-- doxytag: member="BaseDecider::canAnswerCSR" ref="aad89f97ba5dcfd556be7556f04a840b1" args="(const CSRInfo &amp;requestInfo)" -->
virtual simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#aad89f97ba5dcfd556be7556f04a840b1">canAnswerCSR</a> (const <a class="el" href="a00182.html">CSRInfo</a> &amp;requestInfo)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns point in time when the ChannelSenseRequest of the passed CSRInfo can be answered (e.g. because channel state changed or timeout is reached). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#ae692d8bb6e760aaac0d87895cbad14dc">calcChannelSenseRSSI</a> (simtime_t_cref start, simtime_t_cref end) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculates the RSSI value for the passed interval.  <a href="#ae692d8bb6e760aaac0d87895cbad14dc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#ab8e925001d1f8630338c50f8ec10bb0d">answerCSR</a> (<a class="el" href="a00182.html">CSRInfo</a> &amp;requestInfo)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Answers the ChannelSenseRequest (CSR) from the passed CSRInfo.  <a href="#ab8e925001d1f8630338c50f8ec10bb0d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#add7242168c4bb521c6335f3de590e4b0">channelStateChanged</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Checks if the changed channel state enables us to answer any ongoing ChannelSenseRequests.  <a href="#add7242168c4bb521c6335f3de590e4b0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a0310d4013043026404832008d40d48b9">getChannelInfo</a> (simtime_t_cref start, simtime_t_cref end, <a class="el" href="a00067.html#a6baab300e0bec90320dfe956c2d15a57">AirFrameVector</a> &amp;out) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Collects the AirFrame on the channel during the passed interval.  <a href="#a0310d4013043026404832008d40d48b9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="a00121.html">Mapping</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#abac709d59f48d292f147919854c002e2">calculateSnrMapping</a> (AirFrame *frame)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculates a SNR-Mapping for a <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>.  <a href="#abac709d59f48d292f147919854c002e2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="a00121.html">Mapping</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a56d16fe07452dfb24fb994f57e435938">calculateRSSIMapping</a> (simtime_t_cref start, simtime_t_cref end, AirFrame *exclude=NULL) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calculates a RSSI-Mapping (or Noise-Strength-Mapping) for a <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>.  <a href="#a56d16fe07452dfb24fb994f57e435938"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5eece8bf532f92912ccbd0a3bc4d6fb0"></a><!-- doxytag: member="BaseDecider::sensitivity" ref="a5eece8bf532f92912ccbd0a3bc4d6fb0" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a5eece8bf532f92912ccbd0a3bc4d6fb0">sensitivity</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">sensitivity value for receiving an AirFrame <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a22e578e992fab5ab54fe5fcdf196d9e3"></a><!-- doxytag: member="BaseDecider::currentSignal" ref="a22e578e992fab5ab54fe5fcdf196d9e3" args="" -->
<a class="el" href="a00016.html#a4b3ede0e569c778173b7e430d958f92a">ReceivedSignal</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a22e578e992fab5ab54fe5fcdf196d9e3">currentSignal</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">pointer to the currently received AirFrame <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a535bb5ab48036db02bed8fcf5c4e415d"></a><!-- doxytag: member="BaseDecider::isChannelIdle" ref="a535bb5ab48036db02bed8fcf5c4e415d" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a535bb5ab48036db02bed8fcf5c4e415d">isChannelIdle</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stores the idle state of the channel. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac6cd60e58a8a557ed511f8193ced4f7e"></a><!-- doxytag: member="BaseDecider::currentChannelSenseRequest" ref="ac6cd60e58a8a557ed511f8193ced4f7e" args="" -->
<a class="el" href="a00182.html">CSRInfo</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#ac6cd60e58a8a557ed511f8193ced4f7e">currentChannelSenseRequest</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">pointer to the currently running ChannelSenseRequest and its start-time <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a33e7f02028e78116193d09d6cdbc987e"></a><!-- doxytag: member="BaseDecider::myIndex" ref="a33e7f02028e78116193d09d6cdbc987e" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#a33e7f02028e78116193d09d6cdbc987e">myIndex</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">index for this Decider-instance given by Phy-Layer (mostly Host-index) <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa22cd5156240713e37578172ba5557ce"></a><!-- doxytag: member="BaseDecider::debug" ref="aa22cd5156240713e37578172ba5557ce" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00016.html#aa22cd5156240713e37578172ba5557ce">debug</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">toggles display of debugging messages <br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Provides some base functionality for most common deciders. </p>
<p>Forwards the AirFrame from "processSignal" to "processNewSignal", "processSignalHeader" or "processSignalEnd" depending on the state for that AirFrame returned by "getSignalState".</p>
<p>Provides answering of ChannelSenseRequests (instantaneous and over time).</p>
<p>Subclasses should define when they consider the channel as idle by calling "setChannelIdleStatus" because <a class="el" href="a00016.html" title="Provides some base functionality for most common deciders.">BaseDecider</a> uses that to answer ChannelSenseRequests.</p>
<p>If a subclassing <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> only tries to receive one signal at a time it can use BaseDeciders "currentSignal" member which is a pair of the signal to receive and the state for that signal. The state is then used by BaseDeciders "getSignalState" to decide to which "process***" method to forward the signal. If a subclassing <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> needs states for more than one <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a> it has to store these states by itself and should probably override the "getSignalState" method. </p>

<p>Definition at line <a class="el" href="a00258_source.html#l00043">43</a> of file <a class="el" href="a00258_source.html">BaseDecider.h</a>.</p>
<hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="a7232c10b806ef074db6b1452664cc4a2"></a><!-- doxytag: member="BaseDecider::BaseDeciderControlKinds" ref="a7232c10b806ef074db6b1452664cc4a2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="a00016.html#a7232c10b806ef074db6b1452664cc4a2">BaseDecider::BaseDeciderControlKinds</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The kinds of ControlMessages this <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> sends. </p>
<p>Sub-classing decider should begin their own kind enumeration at the value of "LAST_BASE_DECIDER_CONTROL_KIND". </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a7232c10b806ef074db6b1452664cc4a2ab80ab87167f9836332d1d5678f6aab64"></a><!-- doxytag: member="PACKET_DROPPED" ref="a7232c10b806ef074db6b1452664cc4a2ab80ab87167f9836332d1d5678f6aab64" args="" -->PACKET_DROPPED</em>&nbsp;</td><td>
<p>The phy has recognized a bit error in the packet. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a7232c10b806ef074db6b1452664cc4a2a1944cc67bf3f0c98342e3975bd05021c"></a><!-- doxytag: member="LAST_BASE_DECIDER_CONTROL_KIND" ref="a7232c10b806ef074db6b1452664cc4a2a1944cc67bf3f0c98342e3975bd05021c" args="" -->LAST_BASE_DECIDER_CONTROL_KIND</em>&nbsp;</td><td>
<p>Sub-classing decider should begin their own kinds at this value. </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="a00258_source.html#l00051">51</a> of file <a class="el" href="a00258_source.html">BaseDecider.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00051"></a>00051                                {
<a name="l00053"></a>00053     <a class="code" href="a00016.html#a7232c10b806ef074db6b1452664cc4a2ab80ab87167f9836332d1d5678f6aab64" title="The phy has recognized a bit error in the packet.">PACKET_DROPPED</a> = 22100,
<a name="l00056"></a>00056     <a class="code" href="a00016.html#a7232c10b806ef074db6b1452664cc4a2a1944cc67bf3f0c98342e3975bd05021c" title="Sub-classing decider should begin their own kinds at this value.">LAST_BASE_DECIDER_CONTROL_KIND</a>
<a name="l00057"></a>00057   };
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae4acbca8f960e9c49379ae2a82e2d90b"></a><!-- doxytag: member="BaseDecider::SignalState" ref="ae4acbca8f960e9c49379ae2a82e2d90b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="a00016.html#ae4acbca8f960e9c49379ae2a82e2d90b">BaseDecider::SignalState</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The current state of processing for a signal. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ae4acbca8f960e9c49379ae2a82e2d90ba3276f47da7417662597b21ee3afa2d31"></a><!-- doxytag: member="NEW" ref="ae4acbca8f960e9c49379ae2a82e2d90ba3276f47da7417662597b21ee3afa2d31" args="" -->NEW</em>&nbsp;</td><td>
<p><a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a> is received the first time. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae4acbca8f960e9c49379ae2a82e2d90baf0a66719215a9be8335546666facaab6"></a><!-- doxytag: member="EXPECT_HEADER" ref="ae4acbca8f960e9c49379ae2a82e2d90baf0a66719215a9be8335546666facaab6" args="" -->EXPECT_HEADER</em>&nbsp;</td><td>
<p>Waiting for the header of the signal. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae4acbca8f960e9c49379ae2a82e2d90ba5539b8e545c0676dab0b0efb80dfeeac"></a><!-- doxytag: member="EXPECT_END" ref="ae4acbca8f960e9c49379ae2a82e2d90ba5539b8e545c0676dab0b0efb80dfeeac" args="" -->EXPECT_END</em>&nbsp;</td><td>
<p>Waiting for the end of the signal. </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="a00258_source.html#l00062">62</a> of file <a class="el" href="a00258_source.html">BaseDecider.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00062"></a>00062                    {
<a name="l00064"></a>00064     <a class="code" href="a00016.html#ae4acbca8f960e9c49379ae2a82e2d90ba3276f47da7417662597b21ee3afa2d31" title="Signal is received the first time.">NEW</a>,
<a name="l00066"></a>00066     <a class="code" href="a00016.html#ae4acbca8f960e9c49379ae2a82e2d90baf0a66719215a9be8335546666facaab6" title="Waiting for the header of the signal.">EXPECT_HEADER</a>,
<a name="l00068"></a>00068     <a class="code" href="a00016.html#ae4acbca8f960e9c49379ae2a82e2d90ba5539b8e545c0676dab0b0efb80dfeeac" title="Waiting for the end of the signal.">EXPECT_END</a>,
<a name="l00069"></a>00069   };
</pre></div></p>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="acff4618fa7a9c2e9abf257e60e487de2"></a><!-- doxytag: member="BaseDecider::BaseDecider" ref="acff4618fa7a9c2e9abf257e60e487de2" args="(DeciderToPhyInterface *phy, double sensitivity, int myIndex, bool debug)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BaseDecider::BaseDecider </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00076.html">DeciderToPhyInterface</a> *&nbsp;</td>
          <td class="paramname"> <em>phy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>sensitivity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>myIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>debug</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes the decider with the passed values. </p>
<p>Needs a pointer to its physical layer, the sensitivity, the index of the host and the debug flag. </p>

<p>Definition at line <a class="el" href="a00258_source.html#l00139">139</a> of file <a class="el" href="a00258_source.html">BaseDecider.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00141"></a>00141     : <a class="code" href="a00067.html#aa17a9e339525c92d6e4139872c037016" title="Copy constructor is not allowed.">Decider</a>(phy)
<a name="l00142"></a>00142     , <a class="code" href="a00016.html#a5eece8bf532f92912ccbd0a3bc4d6fb0" title="sensitivity value for receiving an AirFrame">sensitivity</a>(<a class="code" href="a00016.html#a5eece8bf532f92912ccbd0a3bc4d6fb0" title="sensitivity value for receiving an AirFrame">sensitivity</a>)
<a name="l00143"></a>00143     , <a class="code" href="a00016.html#a22e578e992fab5ab54fe5fcdf196d9e3" title="pointer to the currently received AirFrame">currentSignal</a>()
<a name="l00144"></a>00144     , <a class="code" href="a00016.html#a535bb5ab48036db02bed8fcf5c4e415d" title="Stores the idle state of the channel.">isChannelIdle</a>(<span class="keyword">true</span>)
<a name="l00145"></a>00145     , <a class="code" href="a00016.html#ac6cd60e58a8a557ed511f8193ced4f7e" title="pointer to the currently running ChannelSenseRequest and its start-time">currentChannelSenseRequest</a>()
<a name="l00146"></a>00146     , <a class="code" href="a00016.html#a33e7f02028e78116193d09d6cdbc987e" title="index for this Decider-instance given by Phy-Layer (mostly Host-index)">myIndex</a>(<a class="code" href="a00016.html#a33e7f02028e78116193d09d6cdbc987e" title="index for this Decider-instance given by Phy-Layer (mostly Host-index)">myIndex</a>)
<a name="l00147"></a>00147     , <a class="code" href="a00016.html#aa22cd5156240713e37578172ba5557ce" title="toggles display of debugging messages">debug</a>(<a class="code" href="a00016.html#aa22cd5156240713e37578172ba5557ce" title="toggles display of debugging messages">debug</a>)
<a name="l00148"></a>00148   {
<a name="l00149"></a>00149     <a class="code" href="a00016.html#a22e578e992fab5ab54fe5fcdf196d9e3" title="pointer to the currently received AirFrame">currentSignal</a>.first = 0;
<a name="l00150"></a>00150     <a class="code" href="a00016.html#a22e578e992fab5ab54fe5fcdf196d9e3" title="pointer to the currently received AirFrame">currentSignal</a>.second = <a class="code" href="a00016.html#ae4acbca8f960e9c49379ae2a82e2d90ba3276f47da7417662597b21ee3afa2d31" title="Signal is received the first time.">NEW</a>;
<a name="l00151"></a>00151     <a class="code" href="a00016.html#ac6cd60e58a8a557ed511f8193ced4f7e" title="pointer to the currently running ChannelSenseRequest and its start-time">currentChannelSenseRequest</a>.first = 0;
<a name="l00152"></a>00152     <a class="code" href="a00016.html#ac6cd60e58a8a557ed511f8193ced4f7e" title="pointer to the currently running ChannelSenseRequest and its start-time">currentChannelSenseRequest</a>.second = -1;
<a name="l00153"></a>00153     <a class="code" href="a00016.html#ac6cd60e58a8a557ed511f8193ced4f7e" title="pointer to the currently running ChannelSenseRequest and its start-time">currentChannelSenseRequest</a>.canAnswerAt = -1;
<a name="l00154"></a>00154   }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ab8e925001d1f8630338c50f8ec10bb0d"></a><!-- doxytag: member="BaseDecider::answerCSR" ref="ab8e925001d1f8630338c50f8ec10bb0d" args="(CSRInfo &amp;requestInfo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseDecider::answerCSR </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00182.html">CSRInfo</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>requestInfo</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Answers the ChannelSenseRequest (CSR) from the passed CSRInfo. </p>
<p>Calculates the rssi value and the channel idle state and sends the CSR together with the result back to the mac layer. </p>

<p>Reimplemented in <a class="el" href="a00179.html#aa7e33361b328274b04ff7bd2d6206e6d">SNRThresholdDecider</a>.</p>

<p>Definition at line <a class="el" href="a00257_source.html#l00208">208</a> of file <a class="el" href="a00257_source.html">BaseDecider.cc</a>.</p>

<p>References <a class="el" href="a00257_source.html#l00198">calcChannelSenseRSSI()</a>, <a class="el" href="a00076.html#afdcd74839d4a7c6ea34062c8e409220d">DeciderToPhyInterface::getSimTime()</a>, <a class="el" href="a00258_source.html#l00081">isChannelIdle</a>, <a class="el" href="a00266_source.html#l00072">Decider::phy</a>, and <a class="el" href="a00076.html#a319e413b963f03ff218b0d0024fb66b9">DeciderToPhyInterface::sendControlMsgToMac()</a>.</p>

<p>Referenced by <a class="el" href="a00257_source.html#l00146">channelStateChanged()</a>, <a class="el" href="a00257_source.html#l00111">handleNewSenseRequest()</a>, and <a class="el" href="a00257_source.html#l00134">handleSenseRequestEnd()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00208"></a>00208                                                 {
<a name="l00209"></a>00209 
<a name="l00210"></a>00210   <span class="keywordtype">double</span> rssiValue = <a class="code" href="a00016.html#ae692d8bb6e760aaac0d87895cbad14dc" title="Calculates the RSSI value for the passed interval.">calcChannelSenseRSSI</a>(requestInfo.second, <a class="code" href="a00067.html#ac0f72556cb799d883b4219cab58320bb" title="A pointer to the physical layer of this Decider.">phy</a>-&gt;<a class="code" href="a00076.html#afdcd74839d4a7c6ea34062c8e409220d" title="Returns the current simulation time.">getSimTime</a>());
<a name="l00211"></a>00211 
<a name="l00212"></a>00212   <span class="comment">// put the sensing-result to the request and</span>
<a name="l00213"></a>00213   <span class="comment">// send it to the Mac-Layer as Control-message (via Interface)</span>
<a name="l00214"></a>00214   requestInfo.first-&gt;setResult( <a class="code" href="a00043.html" title="Provides information about the current state of the channel:.">ChannelState</a>(<a class="code" href="a00016.html#a535bb5ab48036db02bed8fcf5c4e415d" title="Stores the idle state of the channel.">isChannelIdle</a>, rssiValue) );
<a name="l00215"></a>00215   <a class="code" href="a00067.html#ac0f72556cb799d883b4219cab58320bb" title="A pointer to the physical layer of this Decider.">phy</a>-&gt;<a class="code" href="a00076.html#a319e413b963f03ff218b0d0024fb66b9" title="Called by the Decider to send a control message to the MACLayer.">sendControlMsgToMac</a>(requestInfo.first);
<a name="l00216"></a>00216 
<a name="l00217"></a>00217   requestInfo.first = 0;
<a name="l00218"></a>00218   requestInfo.second = -1;
<a name="l00219"></a>00219   requestInfo.canAnswerAt = -1;
<a name="l00220"></a>00220 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae692d8bb6e760aaac0d87895cbad14dc"></a><!-- doxytag: member="BaseDecider::calcChannelSenseRSSI" ref="ae692d8bb6e760aaac0d87895cbad14dc" args="(simtime_t_cref start, simtime_t_cref end) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double BaseDecider::calcChannelSenseRSSI </td>
          <td>(</td>
          <td class="paramtype">simtime_t_cref&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t_cref&nbsp;</td>
          <td class="paramname"> <em>end</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculates the RSSI value for the passed interval. </p>
<p>This method is called by <a class="el" href="a00016.html" title="Provides some base functionality for most common deciders.">BaseDecider</a> when it answers a ChannelSenseRequest or calculates the channel state. Can be overridden by sub classing Deciders.</p>
<p>Default implementation returns the maximum RSSI value inside the passed interval. </p>

<p>Reimplemented in <a class="el" href="a00068.html#a973d7c599c1d660491b3a5ab0b48393c">Decider80211</a>.</p>

<p>Definition at line <a class="el" href="a00257_source.html#l00198">198</a> of file <a class="el" href="a00257_source.html">BaseDecider.cc</a>.</p>

<p>References <a class="el" href="a00257_source.html#l00250">calculateRSSIMapping()</a>, <a class="el" href="a00274_source.html#l00206">MappingUtils::findMax()</a>, and <a class="el" href="a00273_source.html#l00423">Argument::MappedZero</a>.</p>

<p>Referenced by <a class="el" href="a00257_source.html#l00208">answerCSR()</a>, <a class="el" href="a00414_source.html#l00101">SNRThresholdDecider::getChannelState()</a>, <a class="el" href="a00257_source.html#l00082">getChannelState()</a>, and <a class="el" href="a00395_source.html#l00097">Decider802154Narrow::processSignalEnd()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00198"></a>00198                                                                                        {
<a name="l00199"></a>00199   <a class="code" href="a00121.html" title="Represents a changeable mapping (mathematical function) from at least time to Argument::mapped_type...">Mapping</a>* rssiMap = <a class="code" href="a00016.html#a56d16fe07452dfb24fb994f57e435938" title="Calculates a RSSI-Mapping (or Noise-Strength-Mapping) for a Signal.">calculateRSSIMapping</a>(start, end);
<a name="l00200"></a>00200 
<a name="l00201"></a>00201   <span class="comment">// the sensed RSSI-value is the maximum value between (and including) the interval-borders</span>
<a name="l00202"></a>00202   Mapping::argument_value_t rssi = <a class="code" href="a00123.html#afbe1a1e1d2becd66d2c0d5a8ac42b478" title="Iterates over the passed mapping and returns value at the key entry with the highest...">MappingUtils::findMax</a>(*rssiMap, <a class="code" href="a00009.html" title="Defines an argument for a mapping.">Argument</a>(start), <a class="code" href="a00009.html" title="Defines an argument for a mapping.">Argument</a>(end), <a class="code" href="a00009.html#a8523627cdc70492e5e0935b9a3a78cc4" title="Zero value of a Argument value.">Argument::MappedZero</a> <span class="comment">/* the value if no maximum will be found */</span>);
<a name="l00203"></a>00203 
<a name="l00204"></a>00204   <span class="keyword">delete</span> rssiMap;
<a name="l00205"></a>00205   <span class="keywordflow">return</span> rssi;
<a name="l00206"></a>00206 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a56d16fe07452dfb24fb994f57e435938"></a><!-- doxytag: member="BaseDecider::calculateRSSIMapping" ref="a56d16fe07452dfb24fb994f57e435938" args="(simtime_t_cref start, simtime_t_cref end, AirFrame *exclude=NULL) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00121.html">Mapping</a> * BaseDecider::calculateRSSIMapping </td>
          <td>(</td>
          <td class="paramtype">simtime_t_cref&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t_cref&nbsp;</td>
          <td class="paramname"> <em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AirFrame *&nbsp;</td>
          <td class="paramname"> <em>exclude</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculates a RSSI-Mapping (or Noise-Strength-Mapping) for a <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>. </p>
<p>This method can be used to calculate a RSSI-Mapping in case the parameter exclude is omitted OR to calculate a Noise-Strength-Mapping in case the AirFrame of the received <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a> is passed as parameter exclude. </p>

<p>Definition at line <a class="el" href="a00257_source.html#l00250">250</a> of file <a class="el" href="a00257_source.html">BaseDecider.cc</a>.</p>

<p>References <a class="el" href="a00274_source.html#l00083">MappingUtils::createMapping()</a>, <a class="el" href="a00257_source.html#l00244">getChannelInfo()</a>, <a class="el" href="a00280_source.html#l00242">Signal::getReceivingPower()</a>, <a class="el" href="a00279_source.html#l00144">Signal::getReceptionEnd()</a>, <a class="el" href="a00279_source.html#l00140">Signal::getReceptionStart()</a>, <a class="el" href="a00076.html#a2c55926187883df5bc322c947d317534">DeciderToPhyInterface::getThermalNoise()</a>, <a class="el" href="a00273_source.html#l00423">Argument::MappedZero</a>, <a class="el" href="a00266_source.html#l00072">Decider::phy</a>, and <a class="el" href="a00273_source.html#l00193">DimensionSet::timeDomain</a>.</p>

<p>Referenced by <a class="el" href="a00389_source.html#l00076">Decider80211::calcChannelSenseRSSI()</a>, <a class="el" href="a00257_source.html#l00198">calcChannelSenseRSSI()</a>, <a class="el" href="a00257_source.html#l00222">calculateSnrMapping()</a>, and <a class="el" href="a00414_source.html#l00121">SNRThresholdDecider::canAnswerCSR()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00253"></a>00253 {
<a name="l00254"></a>00254   <span class="keywordflow">if</span>(exclude)
<a name="l00255"></a>00255     deciderEV &lt;&lt; <span class="stringliteral">&quot;Creating RSSI map excluding AirFrame with id &quot;</span> &lt;&lt; exclude-&gt;getId() &lt;&lt; endl;
<a name="l00256"></a>00256   <span class="keywordflow">else</span>
<a name="l00257"></a>00257     deciderEV &lt;&lt; <span class="stringliteral">&quot;Creating RSSI map.&quot;</span> &lt;&lt; endl;
<a name="l00258"></a>00258 
<a name="l00259"></a>00259   <a class="code" href="a00067.html#a6baab300e0bec90320dfe956c2d15a57" title="Defines what an AirFrameVector shall be here.">AirFrameVector</a> airFrames;
<a name="l00260"></a>00260 
<a name="l00261"></a>00261   <span class="comment">// collect all AirFrames that intersect with [start, end]</span>
<a name="l00262"></a>00262   <a class="code" href="a00016.html#a0310d4013043026404832008d40d48b9" title="Collects the AirFrame on the channel during the passed interval.">getChannelInfo</a>(start, end, airFrames);
<a name="l00263"></a>00263 
<a name="l00264"></a>00264   <span class="comment">//TODO: create a &quot;MappingUtils:createMappingFrom()&quot;-method and use it here instead</span>
<a name="l00265"></a>00265   <span class="comment">//of abusing the add method</span>
<a name="l00266"></a>00266   <span class="comment">// create an empty mapping</span>
<a name="l00267"></a>00267   <a class="code" href="a00121.html" title="Represents a changeable mapping (mathematical function) from at least time to Argument::mapped_type...">Mapping</a>* resultMap = <a class="code" href="a00123.html#a0c61c76ba04339162563339b23bf42e9" title="Returns an appropriate changeable Mapping with the specified domain and the specified...">MappingUtils::createMapping</a>(<a class="code" href="a00009.html#a8523627cdc70492e5e0935b9a3a78cc4" title="Zero value of a Argument value.">Argument::MappedZero</a>, <a class="code" href="a00083.html#abf3b99a319deca6efc123ec52d77d867" title="Shortcut to a DimensionSet which only contains time.">DimensionSet::timeDomain</a>);
<a name="l00268"></a>00268 
<a name="l00269"></a>00269   <span class="comment">//add thermal noise</span>
<a name="l00270"></a>00270   <a class="code" href="a00055.html" title="Represents a not changeable mapping (mathematical function) from domain with at least...">ConstMapping</a>* thermalNoise = <a class="code" href="a00067.html#ac0f72556cb799d883b4219cab58320bb" title="A pointer to the physical layer of this Decider.">phy</a>-&gt;<a class="code" href="a00076.html#a2c55926187883df5bc322c947d317534" title="Returns a Mapping which defines the thermal noise in the passed time frame (in mW)...">getThermalNoise</a>(start, end);
<a name="l00271"></a>00271   <span class="keywordflow">if</span>(thermalNoise) {
<a name="l00272"></a>00272     <a class="code" href="a00121.html" title="Represents a changeable mapping (mathematical function) from at least time to Argument::mapped_type...">Mapping</a>* tmp = resultMap;
<a name="l00273"></a>00273     resultMap = MappingUtils::add(*resultMap, *thermalNoise);
<a name="l00274"></a>00274     <span class="keyword">delete</span> tmp;
<a name="l00275"></a>00275   }
<a name="l00276"></a>00276 
<a name="l00277"></a>00277   <span class="comment">// otherwise, iterate over all AirFrames (except exclude)</span>
<a name="l00278"></a>00278   <span class="comment">// and sum up their receiving-power-mappings</span>
<a name="l00279"></a>00279   <span class="keywordflow">for</span> (AirFrameVector::const_iterator it = airFrames.begin(); it != airFrames.end(); ++it) {
<a name="l00280"></a>00280     <span class="comment">// the vector should not contain pointers to 0</span>
<a name="l00281"></a>00281     assert (*it != 0);
<a name="l00282"></a>00282 
<a name="l00283"></a>00283     <span class="comment">// if iterator points to exclude (that includes the default-case &apos;exclude == 0&apos;)</span>
<a name="l00284"></a>00284     <span class="comment">// then skip this AirFrame</span>
<a name="l00285"></a>00285     <span class="keywordflow">if</span> ( *it == exclude ) {
<a name="l00286"></a>00286       <span class="keywordflow">if</span> (thermalNoise &amp;&amp; exclude) {
<a name="l00287"></a>00287         <span class="comment">// suggested by David Eckhoff:</span>
<a name="l00288"></a>00288         <span class="comment">// Instead of ignoring the want-to-receive AirFrame when</span>
<a name="l00289"></a>00289         <span class="comment">// building up the NoiseMap i add the thermalNoise for the time and</span>
<a name="l00290"></a>00290         <span class="comment">// frequencies of this airframe. There&apos;s probably a better way to do it but</span>
<a name="l00291"></a>00291         <span class="comment">// i did it like this:</span>
<a name="l00292"></a>00292         <span class="keyword">const</span> <a class="code" href="a00055.html" title="Represents a not changeable mapping (mathematical function) from domain with at least...">ConstMapping</a> *<span class="keyword">const</span> recvPowerMap = (*it)-&gt;getSignal().getReceivingPower();
<a name="l00293"></a>00293 
<a name="l00294"></a>00294         <span class="keywordflow">if</span> (recvPowerMap) {
<a name="l00295"></a>00295           <a class="code" href="a00121.html" title="Represents a changeable mapping (mathematical function) from at least time to Argument::mapped_type...">Mapping</a>* rcvPowerPlusThermalNoise = MappingUtils::add(      *recvPowerMap,             *thermalNoise );
<a name="l00296"></a>00296           <a class="code" href="a00121.html" title="Represents a changeable mapping (mathematical function) from at least time to Argument::mapped_type...">Mapping</a>* resultMapNew             = MappingUtils::subtract( *rcvPowerPlusThermalNoise, *recvPowerMap );
<a name="l00297"></a>00297 
<a name="l00298"></a>00298           <span class="keyword">delete</span> rcvPowerPlusThermalNoise;
<a name="l00299"></a>00299           <span class="keyword">delete</span> resultMap;
<a name="l00300"></a>00300           resultMap = resultMapNew;
<a name="l00301"></a>00301         }
<a name="l00302"></a>00302       }
<a name="l00303"></a>00303       <span class="keywordflow">continue</span>;
<a name="l00304"></a>00304     }
<a name="l00305"></a>00305 
<a name="l00306"></a>00306     <span class="comment">// otherwise get the Signal and its receiving-power-mapping</span>
<a name="l00307"></a>00307     <a class="code" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>&amp; signal = (*it)-&gt;getSignal();
<a name="l00308"></a>00308 
<a name="l00309"></a>00309     <span class="comment">// backup pointer to result map</span>
<a name="l00310"></a>00310     <span class="comment">// Mapping* resultMapOld = resultMap;</span>
<a name="l00311"></a>00311 
<a name="l00312"></a>00312     <span class="comment">// TODO1.1: for testing purposes, for now we don&apos;t specify an interval</span>
<a name="l00313"></a>00313     <span class="comment">// and add the Signal&apos;s receiving-power-mapping to resultMap in [start, end],</span>
<a name="l00314"></a>00314     <span class="comment">// the operation Mapping::add returns a pointer to a new Mapping</span>
<a name="l00315"></a>00315 
<a name="l00316"></a>00316     <span class="keyword">const</span> <a class="code" href="a00055.html" title="Represents a not changeable mapping (mathematical function) from domain with at least...">ConstMapping</a> *<span class="keyword">const</span> recvPowerMap = signal.<a class="code" href="a00168.html#a513b1abac0b04549585257f7f5f8ebea" title="Calculates and returns the receiving power of this Signal. Ownership of the returned...">getReceivingPower</a>();
<a name="l00317"></a>00317     assert(recvPowerMap);
<a name="l00318"></a>00318 
<a name="l00319"></a>00319     <span class="comment">// Mapping* resultMapNew = Mapping::add( *(signal.getReceivingPower()), *resultMap, start, end );</span>
<a name="l00320"></a>00320 
<a name="l00321"></a>00321     deciderEV &lt;&lt; <span class="stringliteral">&quot;Adding mapping of Airframe with ID &quot;</span> &lt;&lt; (*it)-&gt;getId()
<a name="l00322"></a>00322         &lt;&lt; <span class="stringliteral">&quot;. Starts at &quot;</span> &lt;&lt; signal.<a class="code" href="a00168.html#a7c4710243cf87caf7dfc9f313e2619b2" title="Returns the point in time when the receiving of the Signal started at the receiver...">getReceptionStart</a>()
<a name="l00323"></a>00323         &lt;&lt; <span class="stringliteral">&quot; and ends at &quot;</span> &lt;&lt; signal.<a class="code" href="a00168.html#a2875223239e124d85949e1116cc12ae9" title="Returns the point in time when the receiving of the Signal ended at the receiver...">getReceptionEnd</a>() &lt;&lt; endl;
<a name="l00324"></a>00324 
<a name="l00325"></a>00325     <a class="code" href="a00121.html" title="Represents a changeable mapping (mathematical function) from at least time to Argument::mapped_type...">Mapping</a>* resultMapNew = MappingUtils::add( *recvPowerMap, *resultMap, <a class="code" href="a00009.html#a8523627cdc70492e5e0935b9a3a78cc4" title="Zero value of a Argument value.">Argument::MappedZero</a> );
<a name="l00326"></a>00326 
<a name="l00327"></a>00327     <span class="comment">// discard old mapping</span>
<a name="l00328"></a>00328     <span class="keyword">delete</span> resultMap;
<a name="l00329"></a>00329     resultMap = resultMapNew;
<a name="l00330"></a>00330     resultMapNew = 0;
<a name="l00331"></a>00331   }
<a name="l00332"></a>00332 
<a name="l00333"></a>00333   <span class="keywordflow">return</span> resultMap;
<a name="l00334"></a>00334 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="abac709d59f48d292f147919854c002e2"></a><!-- doxytag: member="BaseDecider::calculateSnrMapping" ref="abac709d59f48d292f147919854c002e2" args="(AirFrame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00121.html">Mapping</a> * BaseDecider::calculateSnrMapping </td>
          <td>(</td>
          <td class="paramtype">AirFrame *&nbsp;</td>
          <td class="paramname"> <em>frame</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculates a SNR-Mapping for a <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>. </p>
<p>A Noise-Strength-Mapping is calculated (by using the "calculateRSSIMapping()"-method) for the time-interval of the <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a> and the Signal-Strength-Mapping is divided by the Noise-Strength-Mapping.</p>
<p>Note: 'divided' means here the special element-wise operation on mappings. </p>

<p>Definition at line <a class="el" href="a00257_source.html#l00222">222</a> of file <a class="el" href="a00257_source.html">BaseDecider.cc</a>.</p>

<p>References <a class="el" href="a00257_source.html#l00250">calculateRSSIMapping()</a>, <a class="el" href="a00280_source.html#l00242">Signal::getReceivingPower()</a>, <a class="el" href="a00279_source.html#l00144">Signal::getReceptionEnd()</a>, <a class="el" href="a00279_source.html#l00140">Signal::getReceptionStart()</a>, and <a class="el" href="a00273_source.html#l00423">Argument::MappedZero</a>.</p>

<p>Referenced by <a class="el" href="a00389_source.html#l00093">Decider80211::checkIfSignalOk()</a>, <a class="el" href="a00414_source.html#l00172">SNRThresholdDecider::processSignalEnd()</a>, and <a class="el" href="a00395_source.html#l00097">Decider802154Narrow::processSignalEnd()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00223"></a>00223 {
<a name="l00224"></a>00224   <span class="comment">/* calculate Noise-Strength-Mapping */</span>
<a name="l00225"></a>00225   <a class="code" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>&amp; signal = frame-&gt;getSignal();
<a name="l00226"></a>00226 
<a name="l00227"></a>00227   simtime_t start = signal.<a class="code" href="a00168.html#a7c4710243cf87caf7dfc9f313e2619b2" title="Returns the point in time when the receiving of the Signal started at the receiver...">getReceptionStart</a>();
<a name="l00228"></a>00228   simtime_t end   = signal.<a class="code" href="a00168.html#a2875223239e124d85949e1116cc12ae9" title="Returns the point in time when the receiving of the Signal ended at the receiver...">getReceptionEnd</a>();
<a name="l00229"></a>00229 
<a name="l00230"></a>00230   <a class="code" href="a00121.html" title="Represents a changeable mapping (mathematical function) from at least time to Argument::mapped_type...">Mapping</a>* noiseMap = <a class="code" href="a00016.html#a56d16fe07452dfb24fb994f57e435938" title="Calculates a RSSI-Mapping (or Noise-Strength-Mapping) for a Signal.">calculateRSSIMapping</a>(start, end, frame);
<a name="l00231"></a>00231   assert(noiseMap);
<a name="l00232"></a>00232   <a class="code" href="a00055.html" title="Represents a not changeable mapping (mathematical function) from domain with at least...">ConstMapping</a>* recvPowerMap = signal.<a class="code" href="a00168.html#a513b1abac0b04549585257f7f5f8ebea" title="Calculates and returns the receiving power of this Signal. Ownership of the returned...">getReceivingPower</a>();
<a name="l00233"></a>00233   assert(recvPowerMap);
<a name="l00234"></a>00234 
<a name="l00235"></a>00235   <span class="comment">//TODO: handle noise of zero (must not devide with zero!)</span>
<a name="l00236"></a>00236   <a class="code" href="a00121.html" title="Represents a changeable mapping (mathematical function) from at least time to Argument::mapped_type...">Mapping</a>* snrMap = MappingUtils::divide( *recvPowerMap, *noiseMap, <a class="code" href="a00009.html#a8523627cdc70492e5e0935b9a3a78cc4" title="Zero value of a Argument value.">Argument::MappedZero</a> );
<a name="l00237"></a>00237 
<a name="l00238"></a>00238   <span class="keyword">delete</span> noiseMap;
<a name="l00239"></a>00239   noiseMap = 0;
<a name="l00240"></a>00240 
<a name="l00241"></a>00241   <span class="keywordflow">return</span> snrMap;
<a name="l00242"></a>00242 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="add7242168c4bb521c6335f3de590e4b0"></a><!-- doxytag: member="BaseDecider::channelStateChanged" ref="add7242168c4bb521c6335f3de590e4b0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseDecider::channelStateChanged </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks if the changed channel state enables us to answer any ongoing ChannelSenseRequests. </p>
<p>This method is ment to update only an already ongoing ChannelSenseRequests it can't handle a new one. </p>

<p>Definition at line <a class="el" href="a00257_source.html#l00146">146</a> of file <a class="el" href="a00257_source.html">BaseDecider.cc</a>.</p>

<p>References <a class="el" href="a00257_source.html#l00208">answerCSR()</a>, <a class="el" href="a00257_source.html#l00174">canAnswerCSR()</a>, <a class="el" href="a00076.html#af85151048dba05ec27e378000fd95403">DeciderToPhyInterface::cancelScheduledMessage()</a>, <a class="el" href="a00258_source.html#l00123">currentChannelSenseRequest</a>, <a class="el" href="a00076.html#afdcd74839d4a7c6ea34062c8e409220d">DeciderToPhyInterface::getSimTime()</a>, <a class="el" href="a00266_source.html#l00072">Decider::phy</a>, and <a class="el" href="a00076.html#a223fb24be9268abba32e90181fa248b9">DeciderToPhyInterface::rescheduleMessage()</a>.</p>

<p>Referenced by <a class="el" href="a00393_source.html#l00068">Decider80211MultiChannel::channelChanged()</a>, <a class="el" href="a00414_source.html#l00008">SNRThresholdDecider::processNewSignal()</a>, and <a class="el" href="a00257_source.html#l00168">setChannelIdleStatus()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00147"></a>00147 {
<a name="l00148"></a>00148   <span class="keywordflow">if</span>(!<a class="code" href="a00016.html#ac6cd60e58a8a557ed511f8193ced4f7e" title="pointer to the currently running ChannelSenseRequest and its start-time">currentChannelSenseRequest</a>.getRequest())
<a name="l00149"></a>00149     <span class="keywordflow">return</span>;
<a name="l00150"></a>00150 
<a name="l00151"></a>00151   <span class="comment">//check if the point in time when we can answer the request has changed</span>
<a name="l00152"></a>00152   simtime_t canAnswerAt = <a class="code" href="a00016.html#aad89f97ba5dcfd556be7556f04a840b1" title="Returns point in time when the ChannelSenseRequest of the passed CSRInfo can be answered...">canAnswerCSR</a>(<a class="code" href="a00016.html#ac6cd60e58a8a557ed511f8193ced4f7e" title="pointer to the currently running ChannelSenseRequest and its start-time">currentChannelSenseRequest</a>);
<a name="l00153"></a>00153 
<a name="l00154"></a>00154   <span class="comment">//check if answer time has changed</span>
<a name="l00155"></a>00155   <span class="keywordflow">if</span>(canAnswerAt != <a class="code" href="a00016.html#ac6cd60e58a8a557ed511f8193ced4f7e" title="pointer to the currently running ChannelSenseRequest and its start-time">currentChannelSenseRequest</a>.canAnswerAt) {
<a name="l00156"></a>00156     <span class="comment">//can we answer it now?</span>
<a name="l00157"></a>00157     <span class="keywordflow">if</span>(canAnswerAt == <a class="code" href="a00067.html#ac0f72556cb799d883b4219cab58320bb" title="A pointer to the physical layer of this Decider.">phy</a>-&gt;<a class="code" href="a00076.html#afdcd74839d4a7c6ea34062c8e409220d" title="Returns the current simulation time.">getSimTime</a>()) {
<a name="l00158"></a>00158       <a class="code" href="a00067.html#ac0f72556cb799d883b4219cab58320bb" title="A pointer to the physical layer of this Decider.">phy</a>-&gt;<a class="code" href="a00076.html#af85151048dba05ec27e378000fd95403" title="Tells the PhyLayer to cancel a scheduled message (AirFrame or ControlMessage).">cancelScheduledMessage</a>(<a class="code" href="a00016.html#ac6cd60e58a8a557ed511f8193ced4f7e" title="pointer to the currently running ChannelSenseRequest and its start-time">currentChannelSenseRequest</a>.getRequest());
<a name="l00159"></a>00159       <a class="code" href="a00016.html#ab8e925001d1f8630338c50f8ec10bb0d" title="Answers the ChannelSenseRequest (CSR) from the passed CSRInfo.">answerCSR</a>(<a class="code" href="a00016.html#ac6cd60e58a8a557ed511f8193ced4f7e" title="pointer to the currently running ChannelSenseRequest and its start-time">currentChannelSenseRequest</a>);
<a name="l00160"></a>00160     } <span class="keywordflow">else</span> {
<a name="l00161"></a>00161       <a class="code" href="a00067.html#ac0f72556cb799d883b4219cab58320bb" title="A pointer to the physical layer of this Decider.">phy</a>-&gt;<a class="code" href="a00076.html#a223fb24be9268abba32e90181fa248b9" title="Tells the PhyLayer to reschedule a message (AirFrame or ControlMessage).">rescheduleMessage</a>(<a class="code" href="a00016.html#ac6cd60e58a8a557ed511f8193ced4f7e" title="pointer to the currently running ChannelSenseRequest and its start-time">currentChannelSenseRequest</a>.getRequest(),
<a name="l00162"></a>00162                    canAnswerAt);
<a name="l00163"></a>00163       <a class="code" href="a00016.html#ac6cd60e58a8a557ed511f8193ced4f7e" title="pointer to the currently running ChannelSenseRequest and its start-time">currentChannelSenseRequest</a>.canAnswerAt = canAnswerAt;
<a name="l00164"></a>00164     }
<a name="l00165"></a>00165   }
<a name="l00166"></a>00166 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0310d4013043026404832008d40d48b9"></a><!-- doxytag: member="BaseDecider::getChannelInfo" ref="a0310d4013043026404832008d40d48b9" args="(simtime_t_cref start, simtime_t_cref end, AirFrameVector &amp;out) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseDecider::getChannelInfo </td>
          <td>(</td>
          <td class="paramtype">simtime_t_cref&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t_cref&nbsp;</td>
          <td class="paramname"> <em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00067.html#a6baab300e0bec90320dfe956c2d15a57">AirFrameVector</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>out</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Collects the AirFrame on the channel during the passed interval. </p>
<p>Forwards to DeciderToPhyInterfaces "getChannelInfo" method. Subclassing deciders can override this method to filter the returned AirFrames for their own criteria, for example by removing AirFrames on another not interferring channel.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>start</em>&nbsp;</td><td>The start of the interval to collect AirFrames from. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>end</em>&nbsp;</td><td>The end of the interval to collect AirFrames from. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>out</em>&nbsp;</td><td>The output vector in which to put the AirFrames. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="a00070.html#a89c71b0ea898ebe2c61a393b01820661">Decider80211MultiChannel</a>.</p>

<p>Definition at line <a class="el" href="a00257_source.html#l00244">244</a> of file <a class="el" href="a00257_source.html">BaseDecider.cc</a>.</p>

<p>References <a class="el" href="a00076.html#a304e09a4309820bc45450f8a5fcfcb34">DeciderToPhyInterface::getChannelInfo()</a>, and <a class="el" href="a00266_source.html#l00072">Decider::phy</a>.</p>

<p>Referenced by <a class="el" href="a00257_source.html#l00250">calculateRSSIMapping()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00246"></a>00246 {
<a name="l00247"></a>00247   <a class="code" href="a00067.html#ac0f72556cb799d883b4219cab58320bb" title="A pointer to the physical layer of this Decider.">phy</a>-&gt;<a class="code" href="a00076.html#a304e09a4309820bc45450f8a5fcfcb34" title="Fills the passed AirFrameVector with all AirFrames that intersect with the time interval...">getChannelInfo</a>(start, end, out);
<a name="l00248"></a>00248 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a35e3f8f4e683747fbec1618ee1608982"></a><!-- doxytag: member="BaseDecider::getChannelState" ref="a35e3f8f4e683747fbec1618ee1608982" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00043.html">ChannelState</a> BaseDecider::getChannelState </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A function that returns information about the channel state. </p>
<p>It is an alternative for the MACLayer in order to obtain information immediately (in contrast to sending a ChannelSenseRequest, i.e. sending a cMessage over the OMNeT-control-channel) </p>

<p>Reimplemented from <a class="el" href="a00067.html#aa9f0dcd955639fa2c16233f4654a82bc">Decider</a>.</p>

<p>Reimplemented in <a class="el" href="a00179.html#aa777b8c29fabf14d30d03972fed515d0">SNRThresholdDecider</a>.</p>

<p>Definition at line <a class="el" href="a00257_source.html#l00082">82</a> of file <a class="el" href="a00257_source.html">BaseDecider.cc</a>.</p>

<p>References <a class="el" href="a00257_source.html#l00198">calcChannelSenseRSSI()</a>, <a class="el" href="a00076.html#afdcd74839d4a7c6ea34062c8e409220d">DeciderToPhyInterface::getSimTime()</a>, <a class="el" href="a00258_source.html#l00081">isChannelIdle</a>, and <a class="el" href="a00266_source.html#l00072">Decider::phy</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00082"></a>00082                                                 {
<a name="l00083"></a>00083 
<a name="l00084"></a>00084   simtime_t now = <a class="code" href="a00067.html#ac0f72556cb799d883b4219cab58320bb" title="A pointer to the physical layer of this Decider.">phy</a>-&gt;<a class="code" href="a00076.html#afdcd74839d4a7c6ea34062c8e409220d" title="Returns the current simulation time.">getSimTime</a>();
<a name="l00085"></a>00085   <span class="keywordtype">double</span> rssiValue = <a class="code" href="a00016.html#ae692d8bb6e760aaac0d87895cbad14dc" title="Calculates the RSSI value for the passed interval.">calcChannelSenseRSSI</a>(now, now);
<a name="l00086"></a>00086 
<a name="l00087"></a>00087   <span class="keywordflow">return</span> <a class="code" href="a00043.html" title="Provides information about the current state of the channel:.">ChannelState</a>(<a class="code" href="a00016.html#a535bb5ab48036db02bed8fcf5c4e415d" title="Stores the idle state of the channel.">isChannelIdle</a>, rssiValue);
<a name="l00088"></a>00088 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="afc00c54dd578a9e5eb8d4243625e7af9"></a><!-- doxytag: member="BaseDecider::getSignalState" ref="afc00c54dd578a9e5eb8d4243625e7af9" args="(AirFrame *frame) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BaseDecider::getSignalState </td>
          <td>(</td>
          <td class="paramtype">AirFrame *&nbsp;</td>
          <td class="paramname"> <em>frame</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the SignalState for the passed AirFrame. </p>
<p>The default implementation checks if the passed AirFrame is the "currentSignal" and returns its state or if not "NEW". </p>

<p>Definition at line <a class="el" href="a00257_source.html#l00139">139</a> of file <a class="el" href="a00257_source.html">BaseDecider.cc</a>.</p>

<p>References <a class="el" href="a00258_source.html#l00078">currentSignal</a>, and <a class="el" href="a00258_source.html#l00064">NEW</a>.</p>

<p>Referenced by <a class="el" href="a00257_source.html#l00014">processSignal()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00139"></a>00139                                                     {
<a name="l00140"></a>00140   <span class="keywordflow">if</span>(frame == <a class="code" href="a00016.html#a22e578e992fab5ab54fe5fcdf196d9e3" title="pointer to the currently received AirFrame">currentSignal</a>.first)
<a name="l00141"></a>00141     <span class="keywordflow">return</span> <a class="code" href="a00016.html#a22e578e992fab5ab54fe5fcdf196d9e3" title="pointer to the currently received AirFrame">currentSignal</a>.second;
<a name="l00142"></a>00142 
<a name="l00143"></a>00143   <span class="keywordflow">return</span> <a class="code" href="a00016.html#ae4acbca8f960e9c49379ae2a82e2d90ba3276f47da7417662597b21ee3afa2d31" title="Signal is received the first time.">NEW</a>;
<a name="l00144"></a>00144 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="afd31e5a65d1798d329ace9bdbec25d64"></a><!-- doxytag: member="BaseDecider::handleChannelSenseRequest" ref="afd31e5a65d1798d329ace9bdbec25d64" args="(ChannelSenseRequest *request)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t BaseDecider::handleChannelSenseRequest </td>
          <td>(</td>
          <td class="paramtype">ChannelSenseRequest *&nbsp;</td>
          <td class="paramname"> <em>request</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function is called by the <a class="el" href="a00149.html" title="Provides initialisation for several AnalogueModels and Deciders from modules directory...">PhyLayer</a> to hand over a ChannelSenseRequest. </p>
<p>The MACLayer is able to send a ChannelSenseRequest to the <a class="el" href="a00149.html" title="Provides initialisation for several AnalogueModels and Deciders from modules directory...">PhyLayer</a> that calls this function with it and is returned a time point when to re-call this function with the specific ChannelSenseRequest.</p>
<p>The <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> puts the result (<a class="el" href="a00043.html" title="Provides information about the current state of the channel:.">ChannelState</a>) to the ChannelSenseRequest and "answers" by calling the "sendControlMsg"-function on the <a class="el" href="a00076.html" title="This class is the interface for a Decider to the BasePhyLayer.">DeciderToPhyInterface</a>, i.e. telling the <a class="el" href="a00149.html" title="Provides initialisation for several AnalogueModels and Deciders from modules directory...">PhyLayer</a> to send it back. </p>

<p>Reimplemented from <a class="el" href="a00067.html#a93548ff29f4d880ed488785509dd4dd9">Decider</a>.</p>

<p>Definition at line <a class="el" href="a00257_source.html#l00091">91</a> of file <a class="el" href="a00257_source.html">BaseDecider.cc</a>.</p>

<p>References <a class="el" href="a00258_source.html#l00123">currentChannelSenseRequest</a>, <a class="el" href="a00257_source.html#l00111">handleNewSenseRequest()</a>, <a class="el" href="a00257_source.html#l00134">handleSenseRequestEnd()</a>, and <a class="el" href="a00266_source.html#l00075">Decider::notAgain</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00091"></a>00091                                                                              {
<a name="l00092"></a>00092 
<a name="l00093"></a>00093   assert(request);
<a name="l00094"></a>00094 
<a name="l00095"></a>00095   <span class="keywordflow">if</span> (<a class="code" href="a00016.html#ac6cd60e58a8a557ed511f8193ced4f7e" title="pointer to the currently running ChannelSenseRequest and its start-time">currentChannelSenseRequest</a>.first == 0)
<a name="l00096"></a>00096   {
<a name="l00097"></a>00097     <span class="keywordflow">return</span> <a class="code" href="a00016.html#a1dba383c238fba606279ef483b435f78" title="Handles a new incoming ChannelSenseRequest and returns the next (or latest) time...">handleNewSenseRequest</a>(request);
<a name="l00098"></a>00098   }
<a name="l00099"></a>00099 
<a name="l00100"></a>00100   <span class="keywordflow">if</span> (<a class="code" href="a00016.html#ac6cd60e58a8a557ed511f8193ced4f7e" title="pointer to the currently running ChannelSenseRequest and its start-time">currentChannelSenseRequest</a>.first != request) {
<a name="l00101"></a>00101     opp_error(<span class="stringliteral">&quot;Got a new ChannelSenseRequest while already handling another one!&quot;</span>);
<a name="l00102"></a>00102     <span class="keywordflow">return</span> <a class="code" href="a00067.html#a3edae7484aed7b0b874521c724bd3c30" title="simtime that tells the Phy-Layer not to pass an AirFrame again">notAgain</a>;
<a name="l00103"></a>00103   }
<a name="l00104"></a>00104 
<a name="l00105"></a>00105   <a class="code" href="a00016.html#a2f175306cc0ae9d2805bc050315a47d8" title="Handles the timeout or end of a ChannelSenseRequest by calculating the ChannelState...">handleSenseRequestEnd</a>(<a class="code" href="a00016.html#ac6cd60e58a8a557ed511f8193ced4f7e" title="pointer to the currently running ChannelSenseRequest and its start-time">currentChannelSenseRequest</a>);
<a name="l00106"></a>00106 
<a name="l00107"></a>00107   <span class="comment">// say that we don&apos;t want to have it again</span>
<a name="l00108"></a>00108   <span class="keywordflow">return</span> <a class="code" href="a00067.html#a3edae7484aed7b0b874521c724bd3c30" title="simtime that tells the Phy-Layer not to pass an AirFrame again">notAgain</a>;
<a name="l00109"></a>00109 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2f175306cc0ae9d2805bc050315a47d8"></a><!-- doxytag: member="BaseDecider::handleSenseRequestEnd" ref="a2f175306cc0ae9d2805bc050315a47d8" args="(CSRInfo &amp;requestInfo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseDecider::handleSenseRequestEnd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00182.html">CSRInfo</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>requestInfo</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handles the timeout or end of a ChannelSenseRequest by calculating the <a class="el" href="a00043.html" title="Provides information about the current state of the channel:.">ChannelState</a> and returning the request to the mac layer. </p>
<p>If this handler is reached the decider has to be able to answer the request. Either because the timeout is reached or because the channel state changed accordingly. </p>

<p>Definition at line <a class="el" href="a00257_source.html#l00134">134</a> of file <a class="el" href="a00257_source.html">BaseDecider.cc</a>.</p>

<p>References <a class="el" href="a00257_source.html#l00208">answerCSR()</a>, <a class="el" href="a00257_source.html#l00174">canAnswerCSR()</a>, <a class="el" href="a00076.html#afdcd74839d4a7c6ea34062c8e409220d">DeciderToPhyInterface::getSimTime()</a>, and <a class="el" href="a00266_source.html#l00072">Decider::phy</a>.</p>

<p>Referenced by <a class="el" href="a00257_source.html#l00091">handleChannelSenseRequest()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00134"></a>00134                                                             {
<a name="l00135"></a>00135   assert(<a class="code" href="a00016.html#aad89f97ba5dcfd556be7556f04a840b1" title="Returns point in time when the ChannelSenseRequest of the passed CSRInfo can be answered...">canAnswerCSR</a>(requestInfo) == <a class="code" href="a00067.html#ac0f72556cb799d883b4219cab58320bb" title="A pointer to the physical layer of this Decider.">phy</a>-&gt;<a class="code" href="a00076.html#afdcd74839d4a7c6ea34062c8e409220d" title="Returns the current simulation time.">getSimTime</a>());
<a name="l00136"></a>00136   <a class="code" href="a00016.html#ab8e925001d1f8630338c50f8ec10bb0d" title="Answers the ChannelSenseRequest (CSR) from the passed CSRInfo.">answerCSR</a>(requestInfo);
<a name="l00137"></a>00137 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6a480f87157d0509c0c1fccf94ea9fef"></a><!-- doxytag: member="BaseDecider::processNewSignal" ref="a6a480f87157d0509c0c1fccf94ea9fef" args="(AirFrame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t BaseDecider::processNewSignal </td>
          <td>(</td>
          <td class="paramtype">AirFrame *&nbsp;</td>
          <td class="paramname"> <em>frame</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Processes a new <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>. Returns the time it wants to handle the signal again. </p>
<p>Default implementation checks if the signals receiving power is above the sensitivity of the radio and we are not already trying to receive another AirFrame. If thats the case it waits for the end of the signal. </p>

<p>Reimplemented in <a class="el" href="a00068.html#a1f929f5b474f7b42c5c47acdd740cc68">Decider80211</a>, <a class="el" href="a00070.html#a52dbd000e68902786777f76dd2d6489f">Decider80211MultiChannel</a>, <a class="el" href="a00071.html#a39bec17f0b27dfaee20396c630c6e576">Decider802154Narrow</a>, and <a class="el" href="a00179.html#ace13845f43c5328cea40eb00c59af2b3">SNRThresholdDecider</a>.</p>

<p>Definition at line <a class="el" href="a00257_source.html#l00031">31</a> of file <a class="el" href="a00257_source.html">BaseDecider.cc</a>.</p>

<p>References <a class="el" href="a00258_source.html#l00078">currentSignal</a>, <a class="el" href="a00258_source.html#l00068">EXPECT_END</a>, <a class="el" href="a00280_source.html#l00242">Signal::getReceivingPower()</a>, <a class="el" href="a00279_source.html#l00144">Signal::getReceptionEnd()</a>, <a class="el" href="a00279_source.html#l00140">Signal::getReceptionStart()</a>, <a class="el" href="a00266_source.html#l00075">Decider::notAgain</a>, <a class="el" href="a00258_source.html#l00072">sensitivity</a>, and <a class="el" href="a00257_source.html#l00168">setChannelIdleStatus()</a>.</p>

<p>Referenced by <a class="el" href="a00257_source.html#l00014">processSignal()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00031"></a>00031                                                        {
<a name="l00032"></a>00032   <span class="keywordflow">if</span>(<a class="code" href="a00016.html#a22e578e992fab5ab54fe5fcdf196d9e3" title="pointer to the currently received AirFrame">currentSignal</a>.first != 0) {
<a name="l00033"></a>00033     deciderEV &lt;&lt; <span class="stringliteral">&quot;Already receiving another AirFrame!&quot;</span> &lt;&lt; endl;
<a name="l00034"></a>00034     <span class="keywordflow">return</span> <a class="code" href="a00067.html#a3edae7484aed7b0b874521c724bd3c30" title="simtime that tells the Phy-Layer not to pass an AirFrame again">notAgain</a>;
<a name="l00035"></a>00035   }
<a name="l00036"></a>00036 
<a name="l00037"></a>00037   <span class="comment">// get the receiving power of the Signal at start-time</span>
<a name="l00038"></a>00038   <a class="code" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>&amp; signal = frame-&gt;getSignal();
<a name="l00039"></a>00039   <span class="keywordtype">double</span> recvPower = signal.<a class="code" href="a00168.html#a513b1abac0b04549585257f7f5f8ebea" title="Calculates and returns the receiving power of this Signal. Ownership of the returned...">getReceivingPower</a>()-&gt;getValue(<a class="code" href="a00009.html" title="Defines an argument for a mapping.">Argument</a>(signal.<a class="code" href="a00168.html#a7c4710243cf87caf7dfc9f313e2619b2" title="Returns the point in time when the receiving of the Signal started at the receiver...">getReceptionStart</a>()));
<a name="l00040"></a>00040 
<a name="l00041"></a>00041   <span class="comment">// check whether signal is strong enough to receive</span>
<a name="l00042"></a>00042   <span class="keywordflow">if</span> ( recvPower &lt; <a class="code" href="a00016.html#a5eece8bf532f92912ccbd0a3bc4d6fb0" title="sensitivity value for receiving an AirFrame">sensitivity</a> )
<a name="l00043"></a>00043   {
<a name="l00044"></a>00044     deciderEV &lt;&lt; <span class="stringliteral">&quot;Signal is to weak (&quot;</span> &lt;&lt; recvPower &lt;&lt; <span class="stringliteral">&quot; &lt; &quot;</span> &lt;&lt; <a class="code" href="a00016.html#a5eece8bf532f92912ccbd0a3bc4d6fb0" title="sensitivity value for receiving an AirFrame">sensitivity</a>
<a name="l00045"></a>00045         &lt;&lt; <span class="stringliteral">&quot;) -&gt; do not receive.&quot;</span> &lt;&lt; endl;
<a name="l00046"></a>00046     <span class="comment">// Signal too weak, we can&apos;t receive it, tell PhyLayer that we don&apos;t want it again</span>
<a name="l00047"></a>00047     <span class="keywordflow">return</span> <a class="code" href="a00067.html#a3edae7484aed7b0b874521c724bd3c30" title="simtime that tells the Phy-Layer not to pass an AirFrame again">notAgain</a>;
<a name="l00048"></a>00048   }
<a name="l00049"></a>00049 
<a name="l00050"></a>00050   <span class="comment">// Signal is strong enough, receive this Signal and schedule it</span>
<a name="l00051"></a>00051   deciderEV &lt;&lt; <span class="stringliteral">&quot;Signal is strong enough (&quot;</span> &lt;&lt; recvPower &lt;&lt; <span class="stringliteral">&quot; &gt; &quot;</span> &lt;&lt; <a class="code" href="a00016.html#a5eece8bf532f92912ccbd0a3bc4d6fb0" title="sensitivity value for receiving an AirFrame">sensitivity</a>
<a name="l00052"></a>00052       &lt;&lt; <span class="stringliteral">&quot;) -&gt; Trying to receive AirFrame.&quot;</span> &lt;&lt; endl;
<a name="l00053"></a>00053 
<a name="l00054"></a>00054   <a class="code" href="a00016.html#a22e578e992fab5ab54fe5fcdf196d9e3" title="pointer to the currently received AirFrame">currentSignal</a>.first = frame;
<a name="l00055"></a>00055   <a class="code" href="a00016.html#a22e578e992fab5ab54fe5fcdf196d9e3" title="pointer to the currently received AirFrame">currentSignal</a>.second = <a class="code" href="a00016.html#ae4acbca8f960e9c49379ae2a82e2d90ba5539b8e545c0676dab0b0efb80dfeeac" title="Waiting for the end of the signal.">EXPECT_END</a>;
<a name="l00056"></a>00056 
<a name="l00057"></a>00057   <span class="comment">//channel turned busy</span>
<a name="l00058"></a>00058   <a class="code" href="a00016.html#ae535b44e34061014fe282c36c27b0193" title="Changes the &amp;quot;isIdle&amp;quot;-status to the passed value.">setChannelIdleStatus</a>(<span class="keyword">false</span>);
<a name="l00059"></a>00059 
<a name="l00060"></a>00060   <span class="keywordflow">return</span> signal.<a class="code" href="a00168.html#a2875223239e124d85949e1116cc12ae9" title="Returns the point in time when the receiving of the Signal ended at the receiver...">getReceptionEnd</a>();
<a name="l00061"></a>00061 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a273892d7b0c9874e4efe3c7755aa7a17"></a><!-- doxytag: member="BaseDecider::processSignal" ref="a273892d7b0c9874e4efe3c7755aa7a17" args="(AirFrame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t BaseDecider::processSignal </td>
          <td>(</td>
          <td class="paramtype">AirFrame *&nbsp;</td>
          <td class="paramname"> <em>frame</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Processes an AirFrame given by the <a class="el" href="a00149.html" title="Provides initialisation for several AnalogueModels and Deciders from modules directory...">PhyLayer</a>. </p>
<p>Returns the time point when the decider wants to be given the AirFrame again. </p>

<p>Reimplemented from <a class="el" href="a00067.html#a2039d051f59054d39d4a5e0b38f25086">Decider</a>.</p>

<p>Definition at line <a class="el" href="a00257_source.html#l00014">14</a> of file <a class="el" href="a00257_source.html">BaseDecider.cc</a>.</p>

<p>References <a class="el" href="a00258_source.html#l00068">EXPECT_END</a>, <a class="el" href="a00258_source.html#l00066">EXPECT_HEADER</a>, <a class="el" href="a00257_source.html#l00139">getSignalState()</a>, <a class="el" href="a00258_source.html#l00064">NEW</a>, <a class="el" href="a00257_source.html#l00031">processNewSignal()</a>, <a class="el" href="a00257_source.html#l00063">processSignalEnd()</a>, <a class="el" href="a00258_source.html#l00211">processSignalHeader()</a>, and <a class="el" href="a00257_source.html#l00076">processUnknownSignal()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00014"></a>00014                                                     {
<a name="l00015"></a>00015 
<a name="l00016"></a>00016   assert(frame);
<a name="l00017"></a>00017   deciderEV &lt;&lt; <span class="stringliteral">&quot;Processing AirFrame...&quot;</span> &lt;&lt; endl;
<a name="l00018"></a>00018 
<a name="l00019"></a>00019   <span class="keywordflow">switch</span>(<a class="code" href="a00016.html#afc00c54dd578a9e5eb8d4243625e7af9" title="Returns the SignalState for the passed AirFrame.">getSignalState</a>(frame)) {
<a name="l00020"></a>00020   <span class="keywordflow">case</span> <a class="code" href="a00016.html#ae4acbca8f960e9c49379ae2a82e2d90ba3276f47da7417662597b21ee3afa2d31" title="Signal is received the first time.">NEW</a>:
<a name="l00021"></a>00021     <span class="keywordflow">return</span> <a class="code" href="a00016.html#a6a480f87157d0509c0c1fccf94ea9fef" title="Processes a new Signal. Returns the time it wants to handle the signal again.">processNewSignal</a>(frame);
<a name="l00022"></a>00022   <span class="keywordflow">case</span> <a class="code" href="a00016.html#ae4acbca8f960e9c49379ae2a82e2d90baf0a66719215a9be8335546666facaab6" title="Waiting for the header of the signal.">EXPECT_HEADER</a>:
<a name="l00023"></a>00023     <span class="keywordflow">return</span> <a class="code" href="a00016.html#aaa588f414cc128325be99fac0cc33000" title="Processes the end of the header of a received Signal.">processSignalHeader</a>(frame);
<a name="l00024"></a>00024   <span class="keywordflow">case</span> <a class="code" href="a00016.html#ae4acbca8f960e9c49379ae2a82e2d90ba5539b8e545c0676dab0b0efb80dfeeac" title="Waiting for the end of the signal.">EXPECT_END</a>:
<a name="l00025"></a>00025     <span class="keywordflow">return</span> <a class="code" href="a00016.html#ab9cfef6c04e12d2524d45e881f341300" title="Processes the end of a received Signal.">processSignalEnd</a>(frame);
<a name="l00026"></a>00026   <span class="keywordflow">default</span>:
<a name="l00027"></a>00027     <span class="keywordflow">return</span> <a class="code" href="a00016.html#ac054bb9bbda73689caf6c7cd7e55c8de" title="Processes any Signal for which no state could be found. (is an error case).">processUnknownSignal</a>(frame);
<a name="l00028"></a>00028   }
<a name="l00029"></a>00029 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab9cfef6c04e12d2524d45e881f341300"></a><!-- doxytag: member="BaseDecider::processSignalEnd" ref="ab9cfef6c04e12d2524d45e881f341300" args="(AirFrame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t BaseDecider::processSignalEnd </td>
          <td>(</td>
          <td class="paramtype">AirFrame *&nbsp;</td>
          <td class="paramname"> <em>frame</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Processes the end of a received <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>. </p>
<p>Returns the time it wants to handle the signal again (most probably notAgain).</p>
<p>Default implementation just decides every signal as correct and passes it to the upper layer. </p>

<p>Reimplemented in <a class="el" href="a00068.html#a2f8e006c849f1c14f4578b70358d0ecf">Decider80211</a>, <a class="el" href="a00071.html#a781872439de5dbb40e960d6f923cc29b">Decider802154Narrow</a>, and <a class="el" href="a00179.html#a6002f2ee8ffa35ded0162c72f93c9fba">SNRThresholdDecider</a>.</p>

<p>Definition at line <a class="el" href="a00257_source.html#l00063">63</a> of file <a class="el" href="a00257_source.html">BaseDecider.cc</a>.</p>

<p>References <a class="el" href="a00258_source.html#l00078">currentSignal</a>, <a class="el" href="a00266_source.html#l00075">Decider::notAgain</a>, <a class="el" href="a00266_source.html#l00072">Decider::phy</a>, <a class="el" href="a00076.html#a3c0676323e402449d0972890c6a14df3">DeciderToPhyInterface::sendUp()</a>, and <a class="el" href="a00257_source.html#l00168">setChannelIdleStatus()</a>.</p>

<p>Referenced by <a class="el" href="a00257_source.html#l00014">processSignal()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00063"></a>00063                                                        {
<a name="l00064"></a>00064   deciderEV &lt;&lt; <span class="stringliteral">&quot;packet was received correctly, it is now handed to upper layer...\n&quot;</span>;
<a name="l00065"></a>00065   <a class="code" href="a00067.html#ac0f72556cb799d883b4219cab58320bb" title="A pointer to the physical layer of this Decider.">phy</a>-&gt;<a class="code" href="a00076.html#a3c0676323e402449d0972890c6a14df3" title="Called to send an AirFrame with DeciderResult to the MACLayer.">sendUp</a>(frame, <span class="keyword">new</span> <a class="code" href="a00072.html" title="A class to represent the result of a processed packet (that is not noise) by the...">DeciderResult</a>(<span class="keyword">true</span>));
<a name="l00066"></a>00066 
<a name="l00067"></a>00067   <span class="comment">// we have processed this AirFrame and we prepare to receive the next one</span>
<a name="l00068"></a>00068   <a class="code" href="a00016.html#a22e578e992fab5ab54fe5fcdf196d9e3" title="pointer to the currently received AirFrame">currentSignal</a>.first = 0;
<a name="l00069"></a>00069 
<a name="l00070"></a>00070   <span class="comment">//channel is idle now</span>
<a name="l00071"></a>00071   <a class="code" href="a00016.html#ae535b44e34061014fe282c36c27b0193" title="Changes the &amp;quot;isIdle&amp;quot;-status to the passed value.">setChannelIdleStatus</a>(<span class="keyword">true</span>);
<a name="l00072"></a>00072 
<a name="l00073"></a>00073   <span class="keywordflow">return</span> <a class="code" href="a00067.html#a3edae7484aed7b0b874521c724bd3c30" title="simtime that tells the Phy-Layer not to pass an AirFrame again">notAgain</a>;
<a name="l00074"></a>00074 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aaa588f414cc128325be99fac0cc33000"></a><!-- doxytag: member="BaseDecider::processSignalHeader" ref="aaa588f414cc128325be99fac0cc33000" args="(AirFrame *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual simtime_t BaseDecider::processSignalHeader </td>
          <td>(</td>
          <td class="paramtype">AirFrame *&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Processes the end of the header of a received <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>. </p>
<p>Returns the time it wants to handle the signal again.</p>
<p>Default implementation does not handle signal headers. </p>

<p>Reimplemented in <a class="el" href="a00071.html#a30bf24c03be2ab251656b871028a6ad8">Decider802154Narrow</a>.</p>

<p>Definition at line <a class="el" href="a00258_source.html#l00211">211</a> of file <a class="el" href="a00258_source.html">BaseDecider.h</a>.</p>

<p>Referenced by <a class="el" href="a00257_source.html#l00014">processSignal()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00211"></a>00211                                                              {
<a name="l00212"></a>00212     opp_error(<span class="stringliteral">&quot;BaseDecider does not handle Signal headers!&quot;</span>);
<a name="l00213"></a>00213     <span class="keywordflow">return</span> <a class="code" href="a00067.html#a3edae7484aed7b0b874521c724bd3c30" title="simtime that tells the Phy-Layer not to pass an AirFrame again">notAgain</a>;
<a name="l00214"></a>00214   }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae535b44e34061014fe282c36c27b0193"></a><!-- doxytag: member="BaseDecider::setChannelIdleStatus" ref="ae535b44e34061014fe282c36c27b0193" args="(bool isIdle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseDecider::setChannelIdleStatus </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>isIdle</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Changes the "isIdle"-status to the passed value. </p>
<p>This method further checks if there are any ChannelSenseRequests which can be answered because of the idle state changed. </p>

<p>Reimplemented in <a class="el" href="a00069.html#aaf7ec7c2d440ada77c2c6ffa2af13802">Decider80211Battery</a>.</p>

<p>Definition at line <a class="el" href="a00257_source.html#l00168">168</a> of file <a class="el" href="a00257_source.html">BaseDecider.cc</a>.</p>

<p>References <a class="el" href="a00257_source.html#l00146">channelStateChanged()</a>, and <a class="el" href="a00258_source.html#l00081">isChannelIdle</a>.</p>

<p>Referenced by <a class="el" href="a00389_source.html#l00040">Decider80211::processNewSignal()</a>, <a class="el" href="a00257_source.html#l00031">processNewSignal()</a>, <a class="el" href="a00395_source.html#l00097">Decider802154Narrow::processSignalEnd()</a>, <a class="el" href="a00389_source.html#l00185">Decider80211::processSignalEnd()</a>, <a class="el" href="a00257_source.html#l00063">processSignalEnd()</a>, and <a class="el" href="a00395_source.html#l00074">Decider802154Narrow::processSignalHeader()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00168"></a>00168                                                   {
<a name="l00169"></a>00169   <a class="code" href="a00016.html#a535bb5ab48036db02bed8fcf5c4e415d" title="Stores the idle state of the channel.">isChannelIdle</a> = isIdle;
<a name="l00170"></a>00170 
<a name="l00171"></a>00171   <a class="code" href="a00016.html#add7242168c4bb521c6335f3de590e4b0" title="Checks if the changed channel state enables us to answer any ongoing ChannelSenseRequests...">channelStateChanged</a>();
<a name="l00172"></a>00172 }
</pre></div></p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/base/phyLayer/<a class="el" href="a00258_source.html">BaseDecider.h</a></li>
<li>src/base/phyLayer/<a class="el" href="a00257_source.html">BaseDecider.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed Dec 14 16:01:48 2011 for MiXiM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
