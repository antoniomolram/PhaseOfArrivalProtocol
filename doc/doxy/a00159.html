<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MiXiM: RadioStateAnalogueModel Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>RadioStateAnalogueModel Class Reference<br/>
<small>
[<a class="el" href="a00445.html">phyLayer - physical layer modules</a>]</small>
</h1><!-- doxytag: class="RadioStateAnalogueModel" --><!-- doxytag: inherits="AnalogueModel" -->
<p>This special <a class="el" href="a00007.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a> provides filtering of a <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a> according to the actual RadioStates the <a class="el" href="a00158.html" title="The class that represents the Radio as a state machine.">Radio</a> were in during the Signal's time interval.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="a00278_source.html">PhyUtils.h</a>&gt;</code></p>

<p>Inherits <a class="el" href="a00007.html">AnalogueModel</a>.</p>
<div class="dynheader">
Collaboration diagram for RadioStateAnalogueModel:</div>
<div class="dynsection">
<div class="center"><img src="a00743.png" border="0" usemap="#RadioStateAnalogueModel_coll__map" alt="Collaboration graph"/></div>
<map name="RadioStateAnalogueModel_coll__map" id="RadioStateAnalogueModel_coll__map">
<area shape="rect" href="a00007.html" title="Interface for the analogue models of the physical layer." alt="" coords="37,5,152,32"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="a00744.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00112.html">ListEntry</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Data structure for the list elements.  <a href="a00112.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00159.html#a722dae61250442ba49917eceff0bdb74">RadioStateAnalogueModel</a> (Argument::mapped_type_cref initValue, bool <a class="el" href="a00159.html#a576c1bc7398c256153ac9e22bbc84f61">currentlyTracking</a>=false, simtime_t_cref initTime=SIMTIME_ZERO)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Standard constructor for a <a class="el" href="a00159.html" title="This special AnalogueModel provides filtering of a Signal according to the actual...">RadioStateAnalogueModel</a> instance.  <a href="#a722dae61250442ba49917eceff0bdb74"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00159.html#a5373d679bc62e9da7130d93f531adbbf">filterSignal</a> (AirFrame *, const <a class="el" href="a00062.html">Coord</a> &amp;, const <a class="el" href="a00062.html">Coord</a> &amp;)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Filters the AirFrame's <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a> according to the RadioState (passively), i.e. adding an appropriate instance of <a class="el" href="a00165.html" title="This class represents the corresponding mapping to a RadioStateAnalogueModel (RSAM)...">RSAMMapping</a> to the <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>.  <a href="#a5373d679bc62e9da7130d93f531adbbf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9a3457871c28e3e86759f70a9def9f28"></a><!-- doxytag: member="RadioStateAnalogueModel::setTrackingModeTo" ref="a9a3457871c28e3e86759f70a9def9f28" args="(bool b)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00159.html#a9a3457871c28e3e86759f70a9def9f28">setTrackingModeTo</a> (bool b)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">sets tracking mode <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00159.html#a8034e0bc85edc2debfcacacafc86cefb">cleanUpUntil</a> (simtime_t_cref t)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Cleans up all stored information strictly before the given time-point, i.e. all elements with their time-point strictly smaller than given key. That means multiple entries with same time are preserved.  <a href="#a8034e0bc85edc2debfcacacafc86cefb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00159.html#ad80154bcc09f8db0e08efb2efd75872c">writeRecvEntry</a> (simtime_t_cref time, Argument::mapped_type_cref value)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stores an entry of the form "time-point/attenuation (from now on)".  <a href="#ad80154bcc09f8db0e08efb2efd75872c"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a576c1bc7398c256153ac9e22bbc84f61"></a><!-- doxytag: member="RadioStateAnalogueModel::currentlyTracking" ref="a576c1bc7398c256153ac9e22bbc84f61" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00159.html#a576c1bc7398c256153ac9e22bbc84f61">currentlyTracking</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Indicator variable whether we are currently tracking changes. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a45c2c59a03f370e0814e69e51d4ade18"></a><!-- doxytag: member="RadioStateAnalogueModel::radioStateAttenuation" ref="a45c2c59a03f370e0814e69e51d4ade18" args="" -->
std::list&lt; <a class="el" href="a00112.html">ListEntry</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00159.html#a45c2c59a03f370e0814e69e51d4ade18">radioStateAttenuation</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Data structure to track the Radios attenuation over time. <br/></td></tr>
<tr><td colspan="2"><h2>Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6ec9262901fa86ea2ef6d08fc9410144"></a><!-- doxytag: member="RadioStateAnalogueModel::RSAMMapping" ref="a6ec9262901fa86ea2ef6d08fc9410144" args="" -->
class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00159.html#a6ec9262901fa86ea2ef6d08fc9410144">RSAMMapping</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab901736afc45f0b8dbe019c39356aa09"></a><!-- doxytag: member="RadioStateAnalogueModel::RSAMConstMappingIterator" ref="ab901736afc45f0b8dbe019c39356aa09" args="" -->
class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00159.html#ab901736afc45f0b8dbe019c39356aa09">RSAMConstMappingIterator</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This special <a class="el" href="a00007.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a> provides filtering of a <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a> according to the actual RadioStates the <a class="el" href="a00158.html" title="The class that represents the Radio as a state machine.">Radio</a> were in during the Signal's time interval. </p>
<p>This <a class="el" href="a00007.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a> models the effects of the radio state on the received signal. This effects are for example total attenuation during the time the radio is not in receiving state. And no attenuation at all if it is in receiving state.</p>
<p>This way it is assured that the received power calculated for a <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a> by use of the AnalogueModels really is the power received, means if the radio is not in receiving state then this is reflected by the received power of the signal. Therefore the <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> which evaluates the receiving power doesn't have to care about if the radio was in correct state to actually receive a signal. It just has to check if the receiving power was/is high enough.</p>
<p>A state-machine-diagram for <a class="el" href="a00158.html" title="The class that represents the Radio as a state machine.">Radio</a>, <a class="el" href="a00159.html" title="This special AnalogueModel provides filtering of a Signal according to the actual...">RadioStateAnalogueModel</a> and <a class="el" href="a00042.html" title="This class is used by the BasePhyLayer to keep track of the AirFrames on the channel...">ChannelInfo</a> showing how they work together under control of <a class="el" href="a00026.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> as well as some documentation on how <a class="el" href="a00159.html" title="This special AnalogueModel provides filtering of a Signal according to the actual...">RadioStateAnalogueModel</a> works is available in <a class="el" href="a00445.html">phyLayer - physical layer modules</a>. </p>

<p>Definition at line <a class="el" href="a00278_source.html#l00038">38</a> of file <a class="el" href="a00278_source.html">PhyUtils.h</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a722dae61250442ba49917eceff0bdb74"></a><!-- doxytag: member="RadioStateAnalogueModel::RadioStateAnalogueModel" ref="a722dae61250442ba49917eceff0bdb74" args="(Argument::mapped_type_cref initValue, bool currentlyTracking=false, simtime_t_cref initTime=SIMTIME_ZERO)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RadioStateAnalogueModel::RadioStateAnalogueModel </td>
          <td>(</td>
          <td class="paramtype">Argument::mapped_type_cref&nbsp;</td>
          <td class="paramname"> <em>initValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>currentlyTracking</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t_cref&nbsp;</td>
          <td class="paramname"> <em>initTime</em> = <code>SIMTIME_ZERO</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Standard constructor for a <a class="el" href="a00159.html" title="This special AnalogueModel provides filtering of a Signal according to the actual...">RadioStateAnalogueModel</a> instance. </p>
<p>Default setting is: tracking off </p>

<p>Definition at line <a class="el" href="a00278_source.html#l00126">126</a> of file <a class="el" href="a00278_source.html">PhyUtils.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00129"></a>00129     : <a class="code" href="a00007.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a>()
<a name="l00130"></a>00130     , <a class="code" href="a00159.html#a576c1bc7398c256153ac9e22bbc84f61" title="Indicator variable whether we are currently tracking changes.">currentlyTracking</a>(<a class="code" href="a00159.html#a576c1bc7398c256153ac9e22bbc84f61" title="Indicator variable whether we are currently tracking changes.">currentlyTracking</a>)
<a name="l00131"></a>00131     , <a class="code" href="a00159.html#a45c2c59a03f370e0814e69e51d4ade18" title="Data structure to track the Radios attenuation over time.">radioStateAttenuation</a>()
<a name="l00132"></a>00132   {
<a name="l00133"></a>00133     <span class="comment">// put the initial time-stamp to the list</span>
<a name="l00134"></a>00134     <a class="code" href="a00159.html#a45c2c59a03f370e0814e69e51d4ade18" title="Data structure to track the Radios attenuation over time.">radioStateAttenuation</a>.push_back(ListEntry(initTime, initValue));
<a name="l00135"></a>00135   }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a8034e0bc85edc2debfcacacafc86cefb"></a><!-- doxytag: member="RadioStateAnalogueModel::cleanUpUntil" ref="a8034e0bc85edc2debfcacacafc86cefb" args="(simtime_t_cref t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RadioStateAnalogueModel::cleanUpUntil </td>
          <td>(</td>
          <td class="paramtype">simtime_t_cref&nbsp;</td>
          <td class="paramname"> <em>t</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Cleans up all stored information strictly before the given time-point, i.e. all elements with their time-point strictly smaller than given key. That means multiple entries with same time are preserved. </p>
<p>Intended to be used by the <a class="el" href="a00149.html" title="Provides initialisation for several AnalogueModels and Deciders from modules directory...">PhyLayer</a></p>
<p>THIS SHOULD BE THE ONLY WAY TO DELETE ENTRIES IN THE RECEIVING LIST </p>

<p>Definition at line <a class="el" href="a00277_source.html#l00015">15</a> of file <a class="el" href="a00277_source.html">PhyUtils.cc</a>.</p>

<p>References <a class="el" href="a00278_source.html#l00117">radioStateAttenuation</a>.</p>

<p>Referenced by <a class="el" href="a00277_source.html#l00067">writeRecvEntry()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00016"></a>00016 {
<a name="l00017"></a>00017   <span class="comment">// assert that list is not empty</span>
<a name="l00018"></a>00018   assert(!<a class="code" href="a00159.html#a45c2c59a03f370e0814e69e51d4ade18" title="Data structure to track the Radios attenuation over time.">radioStateAttenuation</a>.empty());
<a name="l00019"></a>00019 
<a name="l00020"></a>00020   <span class="comment">/* the list contains at least one element */</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022   <span class="comment">// CASE: t is smaller or equal the timepoint of the first element ==&gt; nothing to do, return</span>
<a name="l00023"></a>00023   <span class="keywordflow">if</span> ( t &lt;= <a class="code" href="a00159.html#a45c2c59a03f370e0814e69e51d4ade18" title="Data structure to track the Radios attenuation over time.">radioStateAttenuation</a>.front().getTime() )
<a name="l00024"></a>00024   {
<a name="l00025"></a>00025     <span class="keywordflow">return</span>;
<a name="l00026"></a>00026   }
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 
<a name="l00029"></a>00029   <span class="comment">// CASE: t is greater than the timepoint of the last element</span>
<a name="l00030"></a>00030   <span class="comment">// ==&gt; clear complete list except the last element, return</span>
<a name="l00031"></a>00031   <span class="keywordflow">if</span> ( t &gt; <a class="code" href="a00159.html#a45c2c59a03f370e0814e69e51d4ade18" title="Data structure to track the Radios attenuation over time.">radioStateAttenuation</a>.back().getTime() )
<a name="l00032"></a>00032   {
<a name="l00033"></a>00033     ListEntry lastEntry = <a class="code" href="a00159.html#a45c2c59a03f370e0814e69e51d4ade18" title="Data structure to track the Radios attenuation over time.">radioStateAttenuation</a>.back();
<a name="l00034"></a>00034     <a class="code" href="a00159.html#a45c2c59a03f370e0814e69e51d4ade18" title="Data structure to track the Radios attenuation over time.">radioStateAttenuation</a>.clear();
<a name="l00035"></a>00035     <a class="code" href="a00159.html#a45c2c59a03f370e0814e69e51d4ade18" title="Data structure to track the Radios attenuation over time.">radioStateAttenuation</a>.push_back(lastEntry);
<a name="l00036"></a>00036     <span class="keywordflow">return</span>;
<a name="l00037"></a>00037   }
<a name="l00038"></a>00038 
<a name="l00039"></a>00039   <span class="comment">/*</span>
<a name="l00040"></a>00040 <span class="comment">   * preconditions from now on:</span>
<a name="l00041"></a>00041 <span class="comment">   * 1. list contains at least two elements, since 2. + 3.</span>
<a name="l00042"></a>00042 <span class="comment">   * 2. t &gt; first_timepoint</span>
<a name="l00043"></a>00043 <span class="comment">   * 3. t &lt;= last_timepoint</span>
<a name="l00044"></a>00044 <span class="comment">   */</span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046   <span class="comment">// get an iterator and set it to the first timepoint &gt;= t</span>
<a name="l00047"></a>00047   std::list&lt;ListEntry&gt;::iterator it;
<a name="l00048"></a>00048   it = lower_bound(<a class="code" href="a00159.html#a45c2c59a03f370e0814e69e51d4ade18" title="Data structure to track the Radios attenuation over time.">radioStateAttenuation</a>.begin(), <a class="code" href="a00159.html#a45c2c59a03f370e0814e69e51d4ade18" title="Data structure to track the Radios attenuation over time.">radioStateAttenuation</a>.end(), t);
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 
<a name="l00051"></a>00051   <span class="comment">// CASE: list contains an element with exactly the given key</span>
<a name="l00052"></a>00052   <span class="keywordflow">if</span> ( it-&gt;getTime() == t )
<a name="l00053"></a>00053   {
<a name="l00054"></a>00054     <a class="code" href="a00159.html#a45c2c59a03f370e0814e69e51d4ade18" title="Data structure to track the Radios attenuation over time.">radioStateAttenuation</a>.erase(<a class="code" href="a00159.html#a45c2c59a03f370e0814e69e51d4ade18" title="Data structure to track the Radios attenuation over time.">radioStateAttenuation</a>.begin(), it);
<a name="l00055"></a>00055     <span class="keywordflow">return</span>;
<a name="l00056"></a>00056   }
<a name="l00057"></a>00057 
<a name="l00058"></a>00058   <span class="comment">// CASE: t is &quot;in between two elements&quot;</span>
<a name="l00059"></a>00059   <span class="comment">// ==&gt; set the iterators predecessors time to t, it becomes the first element</span>
<a name="l00060"></a>00060   it--; <span class="comment">// go back one element, possible since this one has not been the first one</span>
<a name="l00061"></a>00061 
<a name="l00062"></a>00062   it-&gt;setTime(t); <span class="comment">// set this elements time to t</span>
<a name="l00063"></a>00063   <a class="code" href="a00159.html#a45c2c59a03f370e0814e69e51d4ade18" title="Data structure to track the Radios attenuation over time.">radioStateAttenuation</a>.erase(<a class="code" href="a00159.html#a45c2c59a03f370e0814e69e51d4ade18" title="Data structure to track the Radios attenuation over time.">radioStateAttenuation</a>.begin(), it); <span class="comment">// and erase all previous elements</span>
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5373d679bc62e9da7130d93f531adbbf"></a><!-- doxytag: member="RadioStateAnalogueModel::filterSignal" ref="a5373d679bc62e9da7130d93f531adbbf" args="(AirFrame *, const Coord &amp;, const Coord &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RadioStateAnalogueModel::filterSignal </td>
          <td>(</td>
          <td class="paramtype">AirFrame *&nbsp;</td>
          <td class="paramname"> <em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00062.html">Coord</a> &amp;&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00062.html">Coord</a> &amp;&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Filters the AirFrame's <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a> according to the RadioState (passively), i.e. adding an appropriate instance of <a class="el" href="a00165.html" title="This class represents the corresponding mapping to a RadioStateAnalogueModel (RSAM)...">RSAMMapping</a> to the <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>. </p>
<p>The <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a> is added a new <a class="el" href="a00165.html" title="This class represents the corresponding mapping to a RadioStateAnalogueModel (RSAM)...">RSAMMapping</a> that has a pointer to this instance <a class="el" href="a00159.html" title="This special AnalogueModel provides filtering of a Signal according to the actual...">RadioStateAnalogueModel</a>, hence the pointer is valid as long as the <a class="el" href="a00158.html" title="The class that represents the Radio as a state machine.">Radio</a> instance exists that has this RSAM as a member. </p>

<p>Implements <a class="el" href="a00007.html#ad522c654f6e2184cbb7d03fde72a1eb9">AnalogueModel</a>.</p>

<p>Definition at line <a class="el" href="a00277_source.html#l00007">7</a> of file <a class="el" href="a00277_source.html">PhyUtils.cc</a>.</p>

<p>References <a class="el" href="a00280_source.html#l00187">Signal::addAttenuation()</a>, <a class="el" href="a00279_source.html#l00144">Signal::getReceptionEnd()</a>, and <a class="el" href="a00279_source.html#l00140">Signal::getReceptionStart()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00008"></a>00008 {
<a name="l00009"></a>00009   <a class="code" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>&amp;      signal     = frame-&gt;getSignal();
<a name="l00010"></a>00010   <a class="code" href="a00165.html" title="This class represents the corresponding mapping to a RadioStateAnalogueModel (RSAM)...">RSAMMapping</a>* attMapping = <span class="keyword">new</span> <a class="code" href="a00165.html" title="This class represents the corresponding mapping to a RadioStateAnalogueModel (RSAM)...">RSAMMapping</a>(<span class="keyword">this</span>, signal.<a class="code" href="a00168.html#a7c4710243cf87caf7dfc9f313e2619b2" title="Returns the point in time when the receiving of the Signal started at the receiver...">getReceptionStart</a>(), signal.<a class="code" href="a00168.html#a2875223239e124d85949e1116cc12ae9" title="Returns the point in time when the receiving of the Signal ended at the receiver...">getReceptionEnd</a>());
<a name="l00011"></a>00011 
<a name="l00012"></a>00012   signal.<a class="code" href="a00168.html#a0beeef0f27c33145a0fca521df1c5f5c" title="Adds a function representing an attenuation of the signal.">addAttenuation</a>(attMapping);
<a name="l00013"></a>00013 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad80154bcc09f8db0e08efb2efd75872c"></a><!-- doxytag: member="RadioStateAnalogueModel::writeRecvEntry" ref="ad80154bcc09f8db0e08efb2efd75872c" args="(simtime_t_cref time, Argument::mapped_type_cref value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RadioStateAnalogueModel::writeRecvEntry </td>
          <td>(</td>
          <td class="paramtype">simtime_t_cref&nbsp;</td>
          <td class="paramname"> <em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Argument::mapped_type_cref&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stores an entry of the form "time-point/attenuation (from now on)". </p>
<p>Intended to be used by the <a class="el" href="a00158.html" title="The class that represents the Radio as a state machine.">Radio</a> </p>

<p>Definition at line <a class="el" href="a00277_source.html#l00067">67</a> of file <a class="el" href="a00277_source.html">PhyUtils.cc</a>.</p>

<p>References <a class="el" href="a00277_source.html#l00015">cleanUpUntil()</a>, <a class="el" href="a00278_source.html#l00114">currentlyTracking</a>, and <a class="el" href="a00278_source.html#l00117">radioStateAttenuation</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00068"></a>00068 {
<a name="l00069"></a>00069   <span class="comment">// bugfixed on 08.04.2008</span>
<a name="l00070"></a>00070   assert( (<a class="code" href="a00159.html#a45c2c59a03f370e0814e69e51d4ade18" title="Data structure to track the Radios attenuation over time.">radioStateAttenuation</a>.empty()) || (time &gt;= <a class="code" href="a00159.html#a45c2c59a03f370e0814e69e51d4ade18" title="Data structure to track the Radios attenuation over time.">radioStateAttenuation</a>.back().getTime()) );
<a name="l00071"></a>00071 
<a name="l00072"></a>00072   <a class="code" href="a00159.html#a45c2c59a03f370e0814e69e51d4ade18" title="Data structure to track the Radios attenuation over time.">radioStateAttenuation</a>.push_back(ListEntry(time, value));
<a name="l00073"></a>00073 
<a name="l00074"></a>00074   <span class="keywordflow">if</span> (!<a class="code" href="a00159.html#a576c1bc7398c256153ac9e22bbc84f61" title="Indicator variable whether we are currently tracking changes.">currentlyTracking</a>)
<a name="l00075"></a>00075   {
<a name="l00076"></a>00076     <a class="code" href="a00159.html#a8034e0bc85edc2debfcacacafc86cefb" title="Cleans up all stored information strictly before the given time-point, i.e. all elements...">cleanUpUntil</a>(time);
<a name="l00077"></a>00077 
<a name="l00078"></a>00078     assert(<a class="code" href="a00159.html#a45c2c59a03f370e0814e69e51d4ade18" title="Data structure to track the Radios attenuation over time.">radioStateAttenuation</a>.back().getTime() == time);
<a name="l00079"></a>00079   }
<a name="l00080"></a>00080 }
</pre></div></p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/base/phyLayer/<a class="el" href="a00278_source.html">PhyUtils.h</a></li>
<li>src/base/phyLayer/<a class="el" href="a00277_source.html">PhyUtils.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed Dec 14 16:01:50 2011 for MiXiM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
