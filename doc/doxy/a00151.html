<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MiXiM: PhyLayerUWBIR Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>PhyLayerUWBIR Class Reference<br/>
<small>
[<a class="el" href="a00459.html">IEEE 802.15.4A - Classes that implement the IEEE 802.15.4A UWB PHY.</a>,&nbsp;<a class="el" href="a00445.html">phyLayer - physical layer modules</a>,&nbsp;<a class="el" href="a00465.html">Power consumption - Classes using/defining power consumption</a>]</small>
</h1><!-- doxytag: class="PhyLayerUWBIR" --><!-- doxytag: inherits="BasePhyLayer" -->
<p>Physical layer that models an Ultra Wideband Impulse <a class="el" href="a00158.html" title="The class that represents the Radio as a state machine.">Radio</a> wireless communication system.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="a00412_source.html">PhyLayerUWBIR.h</a>&gt;</code></p>

<p>Inherits <a class="el" href="a00026.html">BasePhyLayer</a>.</p>
<div class="dynheader">
Collaboration diagram for PhyLayerUWBIR:</div>
<div class="dynsection">
<div class="center"><img src="a00717.png" border="0" usemap="#PhyLayerUWBIR_coll__map" alt="Collaboration graph"/></div>
<map name="PhyLayerUWBIR_coll__map" id="PhyLayerUWBIR_coll__map">
<area shape="rect" href="a00077.html" title="This class implements a model of an energy detection receiver that demodulates UWB&#45;IR..." alt="" coords="57,187,185,213"/><area shape="rect" href="a00026.html" title="The BasePhyLayer represents the physical layer of a nic." alt="" coords="5,5,112,32"/><area shape="rect" href="a00160.html" title="This class extends the basic radio model." alt="" coords="136,5,235,32"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="a00718.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0bc21103d2912a0732a4e288684666df"></a><!-- doxytag: member="PhyLayerUWBIR::fptr" ref="a0bc21103d2912a0732a4e288684666df" args=")(cComponent *context, t_dynamic_expression_value argv[], int argc)" -->
typedef <br class="typebreak"/>
t_dynamic_expression_value(*&nbsp;</td><td class="memItemRight" valign="bottom"><b>fptr</b> )(cComponent *context, t_dynamic_expression_value argv[], int argc)</td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a43ea1cb734fb1538cac9e75212c4437c"></a><!-- doxytag: member="PhyLayerUWBIR::finish" ref="a43ea1cb734fb1538cac9e75212c4437c" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00151.html#a43ea1cb734fb1538cac9e75212c4437c">finish</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Only calls the deciders finish method. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00151.html#a0bb0cfac6ebb5459b7480bf9df337a3f">initialize</a> (int stage)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">OMNeT++ initialization function.  <a href="#a0bb0cfac6ebb5459b7480bf9df337a3f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a20ac8e3956abe65f59c69d6dcd54ec1d"></a><!-- doxytag: member="PhyLayerUWBIR::setRadioState" ref="a20ac8e3956abe65f59c69d6dcd54ec1d" args="(int rs)" -->
virtual simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00151.html#a20ac8e3956abe65f59c69d6dcd54ec1d">setRadioState</a> (int rs)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Captures radio switches to adjust power consumption. <br/></td></tr>
<tr><td colspan="2"><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a598bde5841efb7299a2452d55c5c28e3"></a><!-- doxytag: member="PhyLayerUWBIR::ghassemzadehNLOSFunc" ref="a598bde5841efb7299a2452d55c5c28e3" args="(cComponent *, t_dynamic_expression_value argv[] __attribute__((unused)), int)" -->
static t_dynamic_expression_value&nbsp;</td><td class="memItemRight" valign="bottom"><b>ghassemzadehNLOSFunc</b> (cComponent *, t_dynamic_expression_value argv[] __attribute__((unused)), int)</td></tr>
<tr><td colspan="2"><h2>Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a302b0351dfc30fb920bac1e404e44cb6"></a><!-- doxytag: member="PhyLayerUWBIR::ghassemzadehNLOSFPtr" ref="a302b0351dfc30fb920bac1e404e44cb6" args="" -->
static fptr&nbsp;</td><td class="memItemRight" valign="bottom"><b>ghassemzadehNLOSFPtr</b></td></tr>
<tr><td colspan="2"><h2>Protected Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00151.html#af67b418135096e35e238c2f135e92702">Activities</a> { <br/>
&nbsp;&nbsp;<b>SLEEP_ACCT</b> = 0, 
<b>RX_ACCT</b>, 
<b>TX_ACCT</b>, 
<b>SWITCHING_ACCT</b>, 
<br/>
&nbsp;&nbsp;<b>SYNC_ACCT</b>
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>Defines the power consuming activities (accounts) of the NIC. Should be the same as defined in the decider. </p>
<br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><b>ProtocolIds</b> { <b>IEEE_802154_UWB</b> =  3200
 }</td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac769b882f15d8751e21400f7850f7538"></a><!-- doxytag: member="PhyLayerUWBIR::encapsMsg" ref="ac769b882f15d8751e21400f7850f7538" args="(cPacket *msg)" -->
virtual AirFrame *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00151.html#ac769b882f15d8751e21400f7850f7538">encapsMsg</a> (cPacket *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function encapsulates messages from the upper layer into an AirFrame and sets all necessary attributes. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="a00007.html">AnalogueModel</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00151.html#a8ecb0d21f7960fe54141eb608c420ef5">getAnalogueModelFromName</a> (std::string name, <a class="el" href="a00026.html#af29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;params) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates and returns an instance of the <a class="el" href="a00007.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a> with the specified name.  <a href="#a8ecb0d21f7960fe54141eb608c420ef5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0a1c3c0ab4d37d4fa75bd1884e587227"></a><!-- doxytag: member="PhyLayerUWBIR::createUWBIRStochasticPathlossModel" ref="a0a1c3c0ab4d37d4fa75bd1884e587227" args="(ParameterMap &amp;params) const " -->
<a class="el" href="a00007.html">AnalogueModel</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>createUWBIRStochasticPathlossModel</b> (<a class="el" href="a00026.html#af29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;params) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab341cd2e66d4c2cb138678824b083000"></a><!-- doxytag: member="PhyLayerUWBIR::createUWBIRIEEE802154APathlossModel" ref="ab341cd2e66d4c2cb138678824b083000" args="(ParameterMap &amp;params) const " -->
<a class="el" href="a00007.html">AnalogueModel</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>createUWBIRIEEE802154APathlossModel</b> (<a class="el" href="a00026.html#af29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;params) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2ca59141fcdca528c21b62cf9114935f"></a><!-- doxytag: member="PhyLayerUWBIR::createIntensityModel" ref="a2ca59141fcdca528c21b62cf9114935f" args="(ParameterMap &amp;params) const " -->
<a class="el" href="a00007.html">AnalogueModel</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>createIntensityModel</b> (<a class="el" href="a00026.html#af29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;params) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="a00067.html">Decider</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00151.html#af44692e4d9585da22958c11707df9631">getDeciderFromName</a> (std::string name, <a class="el" href="a00026.html#af29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;params)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates and returns an instance of the <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> with the specified name.  <a href="#af44692e4d9585da22958c11707df9631"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="a00158.html">Radio</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00151.html#a2a883bae9b74ed3c27bfd64246edb48f">initializeRadio</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes and returns the radio class to use.  <a href="#a2a883bae9b74ed3c27bfd64246edb48f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a56ff67f3b92bc76c59ac536ddaa67dd3"></a><!-- doxytag: member="PhyLayerUWBIR::switchRadioToRX" ref="a56ff67f3b92bc76c59ac536ddaa67dd3" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>switchRadioToRX</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9c45bfb4391b0f8e8f95cbd3d10da9e6"></a><!-- doxytag: member="PhyLayerUWBIR::switchRadioToSync" ref="a9c45bfb4391b0f8e8f95cbd3d10da9e6" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>switchRadioToSync</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a43ef2c382a22da3bcf2445f855a69c6b"></a><!-- doxytag: member="PhyLayerUWBIR::setRadioCurrent" ref="a43ef2c382a22da3bcf2445f855a69c6b" args="(int rs)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00151.html#a43ef2c382a22da3bcf2445f855a69c6b">setRadioCurrent</a> (int rs)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Updates the actual current drawn for the passed state. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5fe0bd496dfa869ee2646fb0ca76b2da"></a><!-- doxytag: member="PhyLayerUWBIR::setSwitchingCurrent" ref="a5fe0bd496dfa869ee2646fb0ca76b2da" args="(int from, int to)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00151.html#a5fe0bd496dfa869ee2646fb0ca76b2da">setSwitchingCurrent</a> (int from, int to)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Updates the actual current drawn for switching between the passed states. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00151.html#a1ec79cf157ef69aa8263cbd08722f4a0">handleHostState</a> (const <a class="el" href="a00094.html">HostState</a> &amp;state)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Captures changes in host state.  <a href="#a1ec79cf157ef69aa8263cbd08722f4a0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab708baeafda67c040b853c3d192ed516"></a><!-- doxytag: member="PhyLayerUWBIR::finishRadioSwitching" ref="ab708baeafda67c040b853c3d192ed516" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00151.html#ab708baeafda67c040b853c3d192ed516">finishRadioSwitching</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Captures radio switches to adjust power consumption. <br/></td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af6195874dd5b86706da33400ede72bb3"></a><!-- doxytag: member="PhyLayerUWBIR::uwbdecider" ref="af6195874dd5b86706da33400ede72bb3" args="" -->
<a class="el" href="a00077.html">DeciderUWBIRED</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>uwbdecider</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a24456da87c4f06ea6f3790447016ecb3"></a><!-- doxytag: member="PhyLayerUWBIR::uwbradio" ref="a24456da87c4f06ea6f3790447016ecb3" args="" -->
<a class="el" href="a00160.html">RadioUWBIR</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>uwbradio</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae1da14f78b5e3b4c986a314d679f68ab"></a><!-- doxytag: member="PhyLayerUWBIR::numActivities" ref="ae1da14f78b5e3b4c986a314d679f68ab" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00151.html#ae1da14f78b5e3b4c986a314d679f68ab">numActivities</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Number of power consuming activities (accounts). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a198e64c81491a26679604e0b317ac2b2"></a><!-- doxytag: member="PhyLayerUWBIR::sleepCurrent" ref="a198e64c81491a26679604e0b317ac2b2" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00151.html#a198e64c81491a26679604e0b317ac2b2">sleepCurrent</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The different currents in mA. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af6467bb2216b1dd61107468b83fa91f9"></a><!-- doxytag: member="PhyLayerUWBIR::rxCurrent" ref="af6467bb2216b1dd61107468b83fa91f9" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><b>rxCurrent</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a860de658a0567c2ca07198699114b11c"></a><!-- doxytag: member="PhyLayerUWBIR::decodingCurrentDelta" ref="a860de658a0567c2ca07198699114b11c" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><b>decodingCurrentDelta</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6114f811c6d1f0805c7b4e7569aad629"></a><!-- doxytag: member="PhyLayerUWBIR::txCurrent" ref="a6114f811c6d1f0805c7b4e7569aad629" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><b>txCurrent</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af0ed3efc4d22e27017160fe7663125b9"></a><!-- doxytag: member="PhyLayerUWBIR::syncCurrent" ref="af0ed3efc4d22e27017160fe7663125b9" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><b>syncCurrent</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0d1c2f6e9bb06b631c1dbd8f16b06125"></a><!-- doxytag: member="PhyLayerUWBIR::setupRxCurrent" ref="a0d1c2f6e9bb06b631c1dbd8f16b06125" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00151.html#a0d1c2f6e9bb06b631c1dbd8f16b06125">setupRxCurrent</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The differnet switching state currents in mA. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2aca5fc523f67eaedec39580b6ea0564"></a><!-- doxytag: member="PhyLayerUWBIR::setupTxCurrent" ref="a2aca5fc523f67eaedec39580b6ea0564" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><b>setupTxCurrent</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5d75e9d3af974cda9142d3581bf4f195"></a><!-- doxytag: member="PhyLayerUWBIR::rxTxCurrent" ref="a5d75e9d3af974cda9142d3581bf4f195" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><b>rxTxCurrent</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1beb9461546e960ab7211af3922e0962"></a><!-- doxytag: member="PhyLayerUWBIR::txRxCurrent" ref="a1beb9461546e960ab7211af3922e0962" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><b>txRxCurrent</b></td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a01b6e33a2d60280bd73ff342f0c3974c"></a><!-- doxytag: member="PhyLayerUWBIR::PhyLayerUWBIR" ref="a01b6e33a2d60280bd73ff342f0c3974c" args="(const PhyLayerUWBIR &amp;)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00151.html#a01b6e33a2d60280bd73ff342f0c3974c">PhyLayerUWBIR</a> (const <a class="el" href="a00151.html">PhyLayerUWBIR</a> &amp;)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy constructor is not allowed. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aade3859c00c126335d9b481b78d8a343"></a><!-- doxytag: member="PhyLayerUWBIR::operator=" ref="aade3859c00c126335d9b481b78d8a343" args="(const PhyLayerUWBIR &amp;)" -->
<a class="el" href="a00151.html">PhyLayerUWBIR</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00151.html#aade3859c00c126335d9b481b78d8a343">operator=</a> (const <a class="el" href="a00151.html">PhyLayerUWBIR</a> &amp;)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Assignment operator is not allowed. <br/></td></tr>
<tr><td colspan="2"><h2>Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6584956f6ede8e0f653bad406e0c4c1e"></a><!-- doxytag: member="PhyLayerUWBIR::DeciderUWBIRED" ref="a6584956f6ede8e0f653bad406e0c4c1e" args="" -->
class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00151.html#a6584956f6ede8e0f653bad406e0c4c1e">DeciderUWBIRED</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Physical layer that models an Ultra Wideband Impulse <a class="el" href="a00158.html" title="The class that represents the Radio as a state machine.">Radio</a> wireless communication system. </p>
<p>This class loads channel models and deliver frames to an UWB <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a>. It is independent of the modulation technique, as long as the frames are represented using the same approach as in <a class="el" href="a00428_source.html">IEEE802154A.h</a> (Maximum Pulse Amplitude Estimation).</p>
<p>Several channel models are possible: Ghassemzadeh-LOS, Ghassemadeh-NLOS (see <a class="el" href="a00312_source.html">UWBIRStochasticPathlossModel.h</a>) and the IEEE 802.15.4A UWB channel models that use the default power delay profile (see <a class="el" href="a00310_source.html">UWBIRIEEE802154APathlossModel.h</a>).</p>
<p>Currently, an energy detection receiver is modeled in UWBIRED.h. Several synchronization logics have been implemented in derived classes: see <a class="el" href="a00403_source.html">DeciderUWBIREDSync.h</a> and and <a class="el" href="a00405_source.html">DeciderUWBIREDSyncOnAddress.h</a>.</p>
<p>If you want to add a novel receiver (e.g. coherent demodulation), either derive UWBIRED or write your own, then add functionality in this module to load your decider. The same apply for new channel models.</p>
<p>To change the modulation, refer to <a class="el" href="a00342_source.html">UWBIRMac.h</a>, <a class="el" href="a00428_source.html">IEEE802154A.h</a> and UWBIRED.h. To implement optional modes of <a class="el" href="a00095.html" title="This class regroups static methods needed to generate a pulse-level representation...">IEEE802154A</a>, refer to <a class="el" href="a00428_source.html">IEEE802154A.h</a>.</p>
<p>Refer to the following publications for more information: [1] An Ultra Wideband Impulse <a class="el" href="a00158.html" title="The class that represents the Radio as a state machine.">Radio</a> PHY Layer Model for Network Simulation, J. Rousselot, J.-D. Decotignie, Simulation: Transactions of the Society for Computer Simulation, 2010 (to appear). [2] A High-Precision Ultra Wideband Impulse <a class="el" href="a00158.html" title="The class that represents the Radio as a state machine.">Radio</a> Physical Layer Model for Network Simulation, Jérôme Rousselot, Jean-Dominique Decotignie, Second International Omnet++ Workshop,Simu'TOOLS, Rome, 6 Mar 09. <a href="http://portal.acm.org/citation.cfm?id=1537714">http://portal.acm.org/citation.cfm?id=1537714</a> </p>

<p>Definition at line <a class="el" href="a00412_source.html#l00117">117</a> of file <a class="el" href="a00412_source.html">PhyLayerUWBIR.h</a>.</p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a8ecb0d21f7960fe54141eb608c420ef5"></a><!-- doxytag: member="PhyLayerUWBIR::getAnalogueModelFromName" ref="a8ecb0d21f7960fe54141eb608c420ef5" args="(std::string name, ParameterMap &amp;params) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00007.html">AnalogueModel</a> * PhyLayerUWBIR::getAnalogueModelFromName </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00026.html#af29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>params</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates and returns an instance of the <a class="el" href="a00007.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a> with the specified name. </p>
<p>The returned <a class="el" href="a00007.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a> has to be generated with the "new" command. The <a class="el" href="a00026.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> keeps the ownership of the returned <a class="el" href="a00007.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a>.</p>
<p>This method is used by the <a class="el" href="a00026.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> during initialisation to load the AnalogueModels which has been specified in the ned file.</p>
<p>This method has to be overridden if you want to be able to load your own AnalogueModels. </p>

<p>Reimplemented from <a class="el" href="a00026.html#af46970ea279e357d360f47aa46537c1f">BasePhyLayer</a>.</p>

<p>Definition at line <a class="el" href="a00411_source.html#l00081">81</a> of file <a class="el" href="a00411_source.html">PhyLayerUWBIR.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00081"></a>00081                                                                                                  {
<a name="l00082"></a>00082   <span class="keywordflow">if</span> (name == <span class="stringliteral">&quot;UWBIRStochasticPathlossModel&quot;</span>)
<a name="l00083"></a>00083     <span class="keywordflow">return</span> createUWBIRStochasticPathlossModel(params);
<a name="l00084"></a>00084 
<a name="l00085"></a>00085   <span class="keywordflow">if</span> (name == <span class="stringliteral">&quot;UWBIRIEEE802154APathlossModel&quot;</span>)
<a name="l00086"></a>00086     <span class="keywordflow">return</span> createUWBIRIEEE802154APathlossModel(params);
<a name="l00087"></a>00087 
<a name="l00088"></a>00088   <span class="keywordflow">return</span> <a class="code" href="a00151.html#a8ecb0d21f7960fe54141eb608c420ef5" title="Creates and returns an instance of the AnalogueModel with the specified name.">BasePhyLayer::getAnalogueModelFromName</a>(name, params);
<a name="l00089"></a>00089 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af44692e4d9585da22958c11707df9631"></a><!-- doxytag: member="PhyLayerUWBIR::getDeciderFromName" ref="af44692e4d9585da22958c11707df9631" args="(std::string name, ParameterMap &amp;params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00067.html">Decider</a> * PhyLayerUWBIR::getDeciderFromName </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00026.html#af29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>params</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates and returns an instance of the <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> with the specified name. </p>
<p>The returned <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> has to be generated with the "new" command. The <a class="el" href="a00026.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> keeps the ownership of the returned <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a>.</p>
<p>This method is used by the <a class="el" href="a00026.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> during initialisation to load the <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> which has been specified in the ned file.</p>
<p>This method has to be overridden if you want to be able to load your own <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a>. </p>

<p>Reimplemented from <a class="el" href="a00026.html#a095d1b5fd25b9ada3ac86d3c9237c3f8">BasePhyLayer</a>.</p>

<p>Definition at line <a class="el" href="a00411_source.html#l00168">168</a> of file <a class="el" href="a00411_source.html">PhyLayerUWBIR.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00168"></a>00168                                                                                {
<a name="l00169"></a>00169   <span class="keywordtype">double</span> syncThreshold;
<a name="l00170"></a>00170   <span class="keywordtype">bool</span> stats;
<a name="l00171"></a>00171   <span class="keywordtype">bool</span> trace;
<a name="l00172"></a>00172   <span class="keywordtype">bool</span> syncAlwaysSucceeds;
<a name="l00173"></a>00173   ParameterMap::iterator it;
<a name="l00174"></a>00174 
<a name="l00175"></a>00175   protocolId = IEEE_802154_UWB;
<a name="l00176"></a>00176 
<a name="l00177"></a>00177   it = params.find(<span class="stringliteral">&quot;syncThreshold&quot;</span>);
<a name="l00178"></a>00178   <span class="keywordflow">if</span> (it == params.end()) {
<a name="l00179"></a>00179     error(
<a name="l00180"></a>00180         <span class="stringliteral">&quot;Could not find required double parameter &lt;syncThreshold&gt; in the decider xml configuration file.&quot;</span>);
<a name="l00181"></a>00181   }
<a name="l00182"></a>00182   syncThreshold = it-&gt;second.doubleValue();
<a name="l00183"></a>00183 
<a name="l00184"></a>00184   it = params.find(<span class="stringliteral">&quot;stats&quot;</span>);
<a name="l00185"></a>00185   <span class="keywordflow">if</span> (it == params.end()) {
<a name="l00186"></a>00186     error(
<a name="l00187"></a>00187         <span class="stringliteral">&quot;Could not find required boolean parameter &lt;stats&gt; in the decider xml configuration file.&quot;</span>);
<a name="l00188"></a>00188   }
<a name="l00189"></a>00189   stats = it-&gt;second.boolValue();
<a name="l00190"></a>00190 
<a name="l00191"></a>00191   it = params.find(<span class="stringliteral">&quot;trace&quot;</span>);
<a name="l00192"></a>00192   <span class="keywordflow">if</span> (it == params.end()) {
<a name="l00193"></a>00193     error(
<a name="l00194"></a>00194         <span class="stringliteral">&quot;Could not find required boolean parameter &lt;trace&gt; in the decider xml configuration file.&quot;</span>);
<a name="l00195"></a>00195   }
<a name="l00196"></a>00196   trace = it-&gt;second.boolValue();
<a name="l00197"></a>00197 
<a name="l00198"></a>00198   it = params.find(<span class="stringliteral">&quot;syncAlwaysSucceeds&quot;</span>);
<a name="l00199"></a>00199   <span class="keywordflow">if</span> (it == params.end()) {
<a name="l00200"></a>00200     error(
<a name="l00201"></a>00201         <span class="stringliteral">&quot;Could not find required boolean parameter &lt;syncAlwaysSucceeds&gt; in the decider xml configuration file.&quot;</span>);
<a name="l00202"></a>00202   }
<a name="l00203"></a>00203   syncAlwaysSucceeds = it-&gt;second.boolValue();
<a name="l00204"></a>00204 
<a name="l00205"></a>00205   <span class="keywordtype">bool</span> alwaysFailOnDataInterference;
<a name="l00206"></a>00206   it = params.find(<span class="stringliteral">&quot;alwaysFailOnDataInterference&quot;</span>);
<a name="l00207"></a>00207   <span class="keywordflow">if</span> (it == params.end()) {
<a name="l00208"></a>00208     alwaysFailOnDataInterference = <span class="keyword">false</span>;
<a name="l00209"></a>00209   } <span class="keywordflow">else</span> {
<a name="l00210"></a>00210     alwaysFailOnDataInterference = it-&gt;second.boolValue();
<a name="l00211"></a>00211   }
<a name="l00212"></a>00212 
<a name="l00213"></a>00213   <span class="keywordflow">if</span> (name == <span class="stringliteral">&quot;DeciderUWBIREDSyncOnAddress&quot;</span>) {
<a name="l00214"></a>00214     <a class="code" href="a00105.html#aea56b60dcb5ae8c2bde465271daf7210" title="Type definition for a L2 (MAC) address.">LAddress::L2Type</a> addr;
<a name="l00215"></a>00215     it = params.find(<span class="stringliteral">&quot;addr&quot;</span>);
<a name="l00216"></a>00216     <span class="keywordflow">if</span> (it == params.end()) {
<a name="l00217"></a>00217       error(
<a name="l00218"></a>00218           <span class="stringliteral">&quot;Could not find required int parameter &lt;addr&gt; in the decider xml configuration file.&quot;</span>);
<a name="l00219"></a>00219     }
<a name="l00220"></a>00220     addr = <a class="code" href="a00105.html#aea56b60dcb5ae8c2bde465271daf7210" title="Type definition for a L2 (MAC) address.">LAddress::L2Type</a>(it-&gt;second.longValue());
<a name="l00221"></a>00221     uwbdecider = <span class="keyword">new</span> <a class="code" href="a00079.html" title="this Decider models a non-coherent energy-detection receiver">DeciderUWBIREDSyncOnAddress</a>(<span class="keyword">this</span>, <span class="keyword">this</span>, syncThreshold,
<a name="l00222"></a>00222         syncAlwaysSucceeds, stats, trace, addr, alwaysFailOnDataInterference);
<a name="l00223"></a>00223   }
<a name="l00224"></a>00224 
<a name="l00225"></a>00225   <span class="keywordflow">if</span> (name == <span class="stringliteral">&quot;DeciderUWBIREDSync&quot;</span>) {
<a name="l00226"></a>00226     <span class="keywordtype">double</span> tmin;
<a name="l00227"></a>00227     it = params.find(<span class="stringliteral">&quot;syncMinDuration&quot;</span>);
<a name="l00228"></a>00228     <span class="keywordflow">if</span> (it == params.end()) {
<a name="l00229"></a>00229       error(
<a name="l00230"></a>00230           <span class="stringliteral">&quot;Could not find required double parameter &lt;syncMinDuration&gt; in the decider xml configuration file.&quot;</span>);
<a name="l00231"></a>00231     }
<a name="l00232"></a>00232     tmin = it-&gt;second.doubleValue();
<a name="l00233"></a>00233     uwbdecider = <span class="keyword">new</span> <a class="code" href="a00078.html" title="this Decider models a non-coherent energy-detection receiver that synchronizes on...">DeciderUWBIREDSync</a>(<span class="keyword">this</span>, <span class="keyword">this</span>, syncThreshold, syncAlwaysSucceeds, stats, trace, tmin, alwaysFailOnDataInterference);
<a name="l00234"></a>00234   }
<a name="l00235"></a>00235 
<a name="l00236"></a>00236   <span class="keywordflow">if</span> (name==<span class="stringliteral">&quot;DeciderUWBIRED&quot;</span>) {
<a name="l00237"></a>00237       uwbdecider = <span class="keyword">new</span> <a class="code" href="a00077.html" title="This class implements a model of an energy detection receiver that demodulates UWB-IR...">DeciderUWBIRED</a>(<span class="keyword">this</span>, <span class="keyword">this</span>, syncThreshold, syncAlwaysSucceeds, stats, trace, alwaysFailOnDataInterference);
<a name="l00238"></a>00238   }
<a name="l00239"></a>00239   <span class="keywordflow">return</span> uwbdecider;
<a name="l00240"></a>00240 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1ec79cf157ef69aa8263cbd08722f4a0"></a><!-- doxytag: member="PhyLayerUWBIR::handleHostState" ref="a1ec79cf157ef69aa8263cbd08722f4a0" args="(const HostState &amp;state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PhyLayerUWBIR::handleHostState </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00094.html">HostState</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>state</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Captures changes in host state. </p>
<p>Note: Does not yet cancel any ongoing transmissions if the state changes to off. </p>

<p>Reimplemented from <a class="el" href="a00024.html#a44220aa650488eee8ad121f8bc599265">BaseModule</a>.</p>

<p>Definition at line <a class="el" href="a00411_source.html#l00242">242</a> of file <a class="el" href="a00411_source.html">PhyLayerUWBIR.cc</a>.</p>

<p>References <a class="el" href="a00285_source.html#l00069">HostState::get()</a>, <a class="el" href="a00278_source.html#l00321">Radio::getCurrentState()</a>, <a class="el" href="a00260_source.html#l00110">BasePhyLayer::radio</a>, <a class="el" href="a00411_source.html#l00340">setRadioState()</a>, and <a class="el" href="a00278_source.html#l00210">Radio::SLEEP</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00242"></a>00242                                                           {
<a name="l00243"></a>00243   <span class="keywordflow">if</span> (state.<a class="code" href="a00094.html#a3167de707748fd5280fce231d6cbcf90" title="Returns the host state.">get</a>() != HostState::ACTIVE &amp;&amp; <a class="code" href="a00026.html#a6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>-&gt;<a class="code" href="a00158.html#af01639feb0bc2c90e850b5130d350a12" title="Returns the state the Radio is currently in.">getCurrentState</a>() != <a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaac023b5b1d5d9ddbbff72007fb46449a7" title="sleeping">Radio::SLEEP</a>) {
<a name="l00244"></a>00244     coreEV&lt;&lt; <span class="stringliteral">&quot;host is no longer in active state (maybe FAILED, SLEEP, OFF or BROKEN), force into sleep state!&quot;</span> &lt;&lt; endl;
<a name="l00245"></a>00245     <a class="code" href="a00151.html#a20ac8e3956abe65f59c69d6dcd54ec1d" title="Captures radio switches to adjust power consumption.">setRadioState</a>(<a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaac023b5b1d5d9ddbbff72007fb46449a7" title="sleeping">Radio::SLEEP</a>);
<a name="l00246"></a>00246     <span class="comment">// it would be good to create a radioState OFF, as well</span>
<a name="l00247"></a>00247   }
<a name="l00248"></a>00248 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0bb0cfac6ebb5459b7480bf9df337a3f"></a><!-- doxytag: member="PhyLayerUWBIR::initialize" ref="a0bb0cfac6ebb5459b7480bf9df337a3f" args="(int stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PhyLayerUWBIR::initialize </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stage</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>OMNeT++ initialization function. </p>
<p>Read simple parameters. Read and parse xml file for decider and analogue models configuration. </p>

<p>Reimplemented from <a class="el" href="a00026.html#a08704deaf03b73c8eda67cc60e670853">BasePhyLayer</a>.</p>

<p>Definition at line <a class="el" href="a00411_source.html#l00019">19</a> of file <a class="el" href="a00411_source.html">PhyLayerUWBIR.cc</a>.</p>

<p>References <a class="el" href="a00278_source.html#l00321">Radio::getCurrentState()</a>, <a class="el" href="a00222_source.html#l00108">ChannelAccess::getNic()</a>, <a class="el" href="a00412_source.html#l00195">numActivities</a>, <a class="el" href="a00260_source.html#l00110">BasePhyLayer::radio</a>, <a class="el" href="a00252_source.html#l00026">BatteryAccess::registerWithBattery()</a>, <a class="el" href="a00411_source.html#l00313">setRadioCurrent()</a>, <a class="el" href="a00412_source.html#l00201">setupRxCurrent</a>, and <a class="el" href="a00412_source.html#l00198">sleepCurrent</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00019"></a>00019                                         {
<a name="l00020"></a>00020   <a class="code" href="a00151.html#a0bb0cfac6ebb5459b7480bf9df337a3f" title="OMNeT++ initialization function.">BasePhyLayer::initialize</a>(stage);
<a name="l00021"></a>00021   <span class="keywordflow">if</span> (stage == 0) {
<a name="l00022"></a>00022     <a class="code" href="a00151.html#ae1da14f78b5e3b4c986a314d679f68ab" title="Number of power consuming activities (accounts).">numActivities</a> = hasPar(<span class="stringliteral">&quot;numActivities&quot;</span>) ? par(<span class="stringliteral">&quot;numActivities&quot;</span>).longValue() : 6;
<a name="l00023"></a>00023 
<a name="l00024"></a>00024     <span class="comment">/* parameters belong to the NIC, not just phy layer</span>
<a name="l00025"></a>00025 <span class="comment">     *</span>
<a name="l00026"></a>00026 <span class="comment">     * if/when variable transmit power is supported, txCurrent</span>
<a name="l00027"></a>00027 <span class="comment">     * should be specified as an xml table of available transmit</span>
<a name="l00028"></a>00028 <span class="comment">     * power levels and corresponding txCurrent */</span>
<a name="l00029"></a>00029     <a class="code" href="a00151.html#a198e64c81491a26679604e0b317ac2b2" title="The different currents in mA.">sleepCurrent</a> = rxCurrent = decodingCurrentDelta = txCurrent = 0;
<a name="l00030"></a>00030     <a class="code" href="a00151.html#a0d1c2f6e9bb06b631c1dbd8f16b06125" title="The differnet switching state currents in mA.">setupRxCurrent</a> = setupTxCurrent = rxTxCurrent = txRxCurrent = 0;
<a name="l00031"></a>00031     <a class="code" href="a00151.html#a198e64c81491a26679604e0b317ac2b2" title="The different currents in mA.">sleepCurrent</a> = <a class="code" href="a00041.html#ac7301299af515cfc4d495e2ed51e0198" title="Pointer to nic Module.">getNic</a>()-&gt;par( <span class="stringliteral">&quot;sleepCurrent&quot;</span> );
<a name="l00032"></a>00032     rxCurrent = <a class="code" href="a00041.html#ac7301299af515cfc4d495e2ed51e0198" title="Pointer to nic Module.">getNic</a>()-&gt;par( <span class="stringliteral">&quot;rxCurrent&quot;</span> );
<a name="l00033"></a>00033 <span class="comment">//    decodingCurrentDelta = getNic()-&gt;par( &quot;decodingCurrentDelta&quot; );</span>
<a name="l00034"></a>00034     txCurrent = <a class="code" href="a00041.html#ac7301299af515cfc4d495e2ed51e0198" title="Pointer to nic Module.">getNic</a>()-&gt;par( <span class="stringliteral">&quot;txCurrent&quot;</span> );
<a name="l00035"></a>00035     <a class="code" href="a00151.html#a0d1c2f6e9bb06b631c1dbd8f16b06125" title="The differnet switching state currents in mA.">setupRxCurrent</a> = <a class="code" href="a00041.html#ac7301299af515cfc4d495e2ed51e0198" title="Pointer to nic Module.">getNic</a>()-&gt;par( <span class="stringliteral">&quot;setupRxCurrent&quot;</span> );
<a name="l00036"></a>00036     setupTxCurrent = <a class="code" href="a00041.html#ac7301299af515cfc4d495e2ed51e0198" title="Pointer to nic Module.">getNic</a>()-&gt;par( <span class="stringliteral">&quot;setupTxCurrent&quot;</span> );
<a name="l00037"></a>00037     rxTxCurrent = <a class="code" href="a00041.html#ac7301299af515cfc4d495e2ed51e0198" title="Pointer to nic Module.">getNic</a>()-&gt;par( <span class="stringliteral">&quot;rxTxCurrent&quot;</span> );
<a name="l00038"></a>00038     txRxCurrent = <a class="code" href="a00041.html#ac7301299af515cfc4d495e2ed51e0198" title="Pointer to nic Module.">getNic</a>()-&gt;par( <span class="stringliteral">&quot;txRxCurrent&quot;</span> );
<a name="l00039"></a>00039     syncCurrent = <a class="code" href="a00041.html#ac7301299af515cfc4d495e2ed51e0198" title="Pointer to nic Module.">getNic</a>()-&gt;par( <span class="stringliteral">&quot;syncCurrent&quot;</span> ); <span class="comment">// assume instantaneous transitions between rx and sync</span>
<a name="l00040"></a>00040     uwbradio    = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="a00160.html" title="This class extends the basic radio model.">RadioUWBIR</a>*<span class="keyword">&gt;</span>(<a class="code" href="a00026.html#a6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>);
<a name="l00041"></a>00041   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (stage == 1) {
<a name="l00042"></a>00042     <a class="code" href="a00028.html#a2286e83003b2919cbb496260a5b0d009" title="Registers this module as a device with the battery module.">registerWithBattery</a>(<span class="stringliteral">&quot;physical layer&quot;</span>, <a class="code" href="a00151.html#ae1da14f78b5e3b4c986a314d679f68ab" title="Number of power consuming activities (accounts).">numActivities</a>);
<a name="l00043"></a>00043     <a class="code" href="a00151.html#a43ef2c382a22da3bcf2445f855a69c6b" title="Updates the actual current drawn for the passed state.">setRadioCurrent</a>(<a class="code" href="a00026.html#a6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>-&gt;<a class="code" href="a00158.html#af01639feb0bc2c90e850b5130d350a12" title="Returns the state the Radio is currently in.">getCurrentState</a>());
<a name="l00044"></a>00044   }
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2a883bae9b74ed3c27bfd64246edb48f"></a><!-- doxytag: member="PhyLayerUWBIR::initializeRadio" ref="a2a883bae9b74ed3c27bfd64246edb48f" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00158.html">Radio</a> * PhyLayerUWBIR::initializeRadio </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes and returns the radio class to use. </p>
<p>Can be overridden by sub-classing phy layers to use their own <a class="el" href="a00158.html" title="The class that represents the Radio as a state machine.">Radio</a> implementations. </p>

<p>Reimplemented from <a class="el" href="a00026.html#ae1ca5e4f7cf6d91456a20a0068d3c417">BasePhyLayer</a>.</p>

<p>Definition at line <a class="el" href="a00411_source.html#l00049">49</a> of file <a class="el" href="a00411_source.html">PhyLayerUWBIR.cc</a>.</p>

<p>References <a class="el" href="a00259_source.html#l00045">BasePhyLayer::readPar()</a>, <a class="el" href="a00260_source.html#l00101">BasePhyLayer::recordStats</a>, <a class="el" href="a00278_source.html#l00206">Radio::RX</a>, <a class="el" href="a00277_source.html#l00172">Radio::setSwitchTime()</a>, <a class="el" href="a00278_source.html#l00210">Radio::SLEEP</a>, and <a class="el" href="a00278_source.html#l00208">Radio::TX</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00049"></a>00049                                             {
<a name="l00050"></a>00050   <span class="keywordtype">int</span> initialRadioState = par(<span class="stringliteral">&quot;initialRadioState&quot;</span>); <span class="comment">//readPar(&quot;initalRadioState&quot;, (int) RadioUWBIR::SYNC);</span>
<a name="l00051"></a>00051   <span class="keywordtype">double</span> radioMinAtt = <a class="code" href="a00026.html#a356934b3e1dd4c9d40132a260b98e904" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">&quot;radioMinAtt&quot;</span>, 1.0);
<a name="l00052"></a>00052   <span class="keywordtype">double</span> radioMaxAtt = <a class="code" href="a00026.html#a356934b3e1dd4c9d40132a260b98e904" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">&quot;radioMaxAtt&quot;</span>, 0.0);
<a name="l00053"></a>00053 
<a name="l00054"></a>00054   <a class="code" href="a00160.html" title="This class extends the basic radio model.">RadioUWBIR</a>* uwbradio = RadioUWBIR::createNewUWBIRRadio(<a class="code" href="a00026.html#a71f6c8e91a8f597a5d213b30c64b0cf8" title="Stores if tracking of statistics (esp. cOutvectors) is enabled.">recordStats</a>, initialRadioState, radioMinAtt, radioMaxAtt);
<a name="l00055"></a>00055 
<a name="l00056"></a>00056   <span class="comment">//  - switch times to TX</span>
<a name="l00057"></a>00057   <span class="comment">//simtime_t rxToTX = readPar(&quot;timeRXToTX&quot;, 0.0);</span>
<a name="l00058"></a>00058   <span class="comment">//simtime_t sleepToTX = readPar(&quot;timeSleepToTX&quot;, 0.0);</span>
<a name="l00059"></a>00059 
<a name="l00060"></a>00060   <span class="comment">// Radio timers</span>
<a name="l00061"></a>00061   <span class="comment">// From Sleep mode</span>
<a name="l00062"></a>00062   uwbradio-&gt;<a class="code" href="a00158.html#aed80922c736427067f27669c87aaf4f8" title="function called by PhyLayer in order to make an entry in the switch times matrix...">setSwitchTime</a>(<a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaac023b5b1d5d9ddbbff72007fb46449a7" title="sleeping">RadioUWBIR::SLEEP</a>, <a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaa0a9f9ba2fd83cf0f5f4eaf4f32d6a9c1" title="receiving state">RadioUWBIR::RX</a>, par(<span class="stringliteral">&quot;timeSleepToRX&quot;</span>).doubleValue());
<a name="l00063"></a>00063   uwbradio-&gt;<a class="code" href="a00158.html#aed80922c736427067f27669c87aaf4f8" title="function called by PhyLayer in order to make an entry in the switch times matrix...">setSwitchTime</a>(<a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaac023b5b1d5d9ddbbff72007fb46449a7" title="sleeping">RadioUWBIR::SLEEP</a>, <a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaa55eab2480eb0876c6b76dc0df92882f7" title="transmitting state">RadioUWBIR::TX</a>, par(<span class="stringliteral">&quot;timeSleepToTX&quot;</span>).doubleValue());
<a name="l00064"></a>00064   uwbradio-&gt;<a class="code" href="a00158.html#aed80922c736427067f27669c87aaf4f8" title="function called by PhyLayer in order to make an entry in the switch times matrix...">setSwitchTime</a>(<a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaac023b5b1d5d9ddbbff72007fb46449a7" title="sleeping">RadioUWBIR::SLEEP</a>, <a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaac023b5b1d5d9ddbbff72007fb46449a7" title="sleeping">RadioUWBIR::SLEEP</a>, 0);
<a name="l00065"></a>00065 
<a name="l00066"></a>00066   <span class="comment">// From TX mode</span>
<a name="l00067"></a>00067   uwbradio-&gt;<a class="code" href="a00158.html#aed80922c736427067f27669c87aaf4f8" title="function called by PhyLayer in order to make an entry in the switch times matrix...">setSwitchTime</a>(<a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaa55eab2480eb0876c6b76dc0df92882f7" title="transmitting state">RadioUWBIR::TX</a>, RadioUWBIR::SYNC, par(<span class="stringliteral">&quot;timeTXToRX&quot;</span>).doubleValue());
<a name="l00068"></a>00068   uwbradio-&gt;<a class="code" href="a00158.html#aed80922c736427067f27669c87aaf4f8" title="function called by PhyLayer in order to make an entry in the switch times matrix...">setSwitchTime</a>(<a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaa55eab2480eb0876c6b76dc0df92882f7" title="transmitting state">RadioUWBIR::TX</a>, <a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaa0a9f9ba2fd83cf0f5f4eaf4f32d6a9c1" title="receiving state">RadioUWBIR::RX</a>, par(<span class="stringliteral">&quot;timeTXToRX&quot;</span>).doubleValue());
<a name="l00069"></a>00069 
<a name="l00070"></a>00070   <span class="comment">// From RX mode</span>
<a name="l00071"></a>00071   uwbradio-&gt;<a class="code" href="a00158.html#aed80922c736427067f27669c87aaf4f8" title="function called by PhyLayer in order to make an entry in the switch times matrix...">setSwitchTime</a>(<a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaa0a9f9ba2fd83cf0f5f4eaf4f32d6a9c1" title="receiving state">RadioUWBIR::RX</a>, <a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaa55eab2480eb0876c6b76dc0df92882f7" title="transmitting state">RadioUWBIR::TX</a>, par(<span class="stringliteral">&quot;timeRXToTX&quot;</span>).doubleValue());
<a name="l00072"></a>00072   uwbradio-&gt;<a class="code" href="a00158.html#aed80922c736427067f27669c87aaf4f8" title="function called by PhyLayer in order to make an entry in the switch times matrix...">setSwitchTime</a>(<a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaa0a9f9ba2fd83cf0f5f4eaf4f32d6a9c1" title="receiving state">RadioUWBIR::RX</a>, RadioUWBIR::SYNC, 0.000000001);
<a name="l00073"></a>00073   uwbradio-&gt;<a class="code" href="a00158.html#aed80922c736427067f27669c87aaf4f8" title="function called by PhyLayer in order to make an entry in the switch times matrix...">setSwitchTime</a>(RadioUWBIR::SYNC, <a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaa55eab2480eb0876c6b76dc0df92882f7" title="transmitting state">RadioUWBIR::TX</a>, par(<span class="stringliteral">&quot;timeRXToTX&quot;</span>).doubleValue());
<a name="l00074"></a>00074 
<a name="l00075"></a>00075   <span class="comment">// From SYNC mode</span>
<a name="l00076"></a>00076   uwbradio-&gt;<a class="code" href="a00158.html#aed80922c736427067f27669c87aaf4f8" title="function called by PhyLayer in order to make an entry in the switch times matrix...">setSwitchTime</a>(RadioUWBIR::SYNC, <a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaa0a9f9ba2fd83cf0f5f4eaf4f32d6a9c1" title="receiving state">RadioUWBIR::RX</a>, 0.000000001);
<a name="l00077"></a>00077 
<a name="l00078"></a>00078   <span class="keywordflow">return</span> uwbradio;
<a name="l00079"></a>00079 }
</pre></div></p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/modules/phy/<a class="el" href="a00412_source.html">PhyLayerUWBIR.h</a></li>
<li>src/modules/phy/<a class="el" href="a00411_source.html">PhyLayerUWBIR.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed Dec 14 16:01:50 2011 for MiXiM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
