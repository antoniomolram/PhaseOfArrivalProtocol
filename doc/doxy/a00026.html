<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MiXiM: BasePhyLayer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>BasePhyLayer Class Reference<br/>
<small>
[<a class="el" href="a00445.html">phyLayer - physical layer modules</a>,&nbsp;<a class="el" href="a00451.html">baseModules - base module classes of MiXiM</a>]</small>
</h1><!-- doxytag: class="BasePhyLayer" --><!-- doxytag: inherits="ChannelAccess,DeciderToPhyInterface,MacToPhyInterface" -->
<p>The <a class="el" href="a00026.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> represents the physical layer of a nic.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="a00260_source.html">BasePhyLayer.h</a>&gt;</code></p>

<p>Inherits <a class="el" href="a00041.html">ChannelAccess</a>, <a class="el" href="a00076.html">DeciderToPhyInterface</a>, and <a class="el" href="a00119.html">MacToPhyInterface</a>.</p>

<p>Inherited by <a class="el" href="a00149.html">PhyLayer</a>, and <a class="el" href="a00151.html">PhyLayerUWBIR</a>.</p>
<div class="dynheader">
Collaboration diagram for BasePhyLayer:</div>
<div class="dynsection">
<div class="center"><img src="a00518.png" border="0" usemap="#BasePhyLayer_coll__map" alt="Collaboration graph"/></div>
<map name="BasePhyLayer_coll__map" id="BasePhyLayer_coll__map">
<area shape="rect" href="a00041.html" title="Basic class for all physical layers, please don&#39;t touch!!" alt="" coords="289,63,401,89"/><area shape="rect" href="a00027.html" title="Provides information and utility methods for the whole simulation." alt="" coords="25,52,143,79"/><area shape="rect" href="a00076.html" title="This class is the interface for a Decider to the BasePhyLayer." alt="" coords="5,124,163,151"/><area shape="rect" href="a00067.html" title="The basic Decider class." alt="" coords="312,164,379,191"/><area shape="rect" href="a00119.html" title="Defines the methods provided by the phy to the mac layer." alt="" coords="277,215,413,241"/><area shape="rect" href="a00158.html" title="The class that represents the Radio as a state machine." alt="" coords="317,265,373,292"/><area shape="rect" href="a00052.html" title="Represents a constant mathematical mapping (f(x) = c)." alt="" coords="247,316,444,343"/><area shape="rect" href="a00042.html" title="This class is used by the BasePhyLayer to keep track of the AirFrames on the channel..." alt="" coords="299,367,392,393"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="a00519.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a0fc69907490ed2752d2a888ef26348ff">~BasePhyLayer</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae32062e99cf8196496491bb6800ed3d5"></a><!-- doxytag: member="BasePhyLayer::finish" ref="ae32062e99cf8196496491bb6800ed3d5" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#ae32062e99cf8196496491bb6800ed3d5">finish</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Only calls the deciders finish method. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual cObject *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#af629dfbac6c68d0310ed91a7520c7ab2">setUpControlInfo</a> (cMessage *const pMsg, <a class="el" href="a00072.html">DeciderResult</a> *const pDeciderResult)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attaches a "control info" (PhyToMac) structure (object) to the message pMsg.  <a href="#af629dfbac6c68d0310ed91a7520c7ab2"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">MacToPhyInterface implementation</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp076b6d32be65a5fc186a95ac5214c7bd"></a>These methods implement the <a class="el" href="a00119.html" title="Defines the methods provided by the phy to the mac layer.">MacToPhyInterface</a>. </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a893db61c894236b50c4c56e569ceedbb">getRadioState</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the current state the radio is in.  <a href="#a893db61c894236b50c4c56e569ceedbb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a5170b3aadae25dc6b9e61974076be04b">setRadioState</a> (int rs)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tells the <a class="el" href="a00026.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> to switch to the specified radio state.  <a href="#a5170b3aadae25dc6b9e61974076be04b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="a00043.html">ChannelState</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a8cc235ebda1b8ff6dcf17b6b0b91fc13">getChannelState</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the current state of the channel.  <a href="#a8cc235ebda1b8ff6dcf17b6b0b91fc13"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#aae998c3fac0c23ddf6c93b00ef533479">getPhyHeaderLength</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the length of the phy header in bits.  <a href="#aae998c3fac0c23ddf6c93b00ef533479"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa662c2194a72e2c46f6b25e7e6901834"></a><!-- doxytag: member="BasePhyLayer::setCurrentRadioChannel" ref="aa662c2194a72e2c46f6b25e7e6901834" args="(int newRadioChannel)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#aa662c2194a72e2c46f6b25e7e6901834">setCurrentRadioChannel</a> (int newRadioChannel)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the channel currently used by the radio. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a78d08dafa6b53482145a7fe6adf30648"></a><!-- doxytag: member="BasePhyLayer::getCurrentRadioChannel" ref="a78d08dafa6b53482145a7fe6adf30648" args="() const " -->
virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a78d08dafa6b53482145a7fe6adf30648">getCurrentRadioChannel</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the channel currently used by the radio. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a30f5f83644568e1be77cc25ea74aaf8b"></a><!-- doxytag: member="BasePhyLayer::getNbRadioChannels" ref="a30f5f83644568e1be77cc25ea74aaf8b" args="() const " -->
virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a30f5f83644568e1be77cc25ea74aaf8b">getNbRadioChannels</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the number of channels available on this radio. <br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">DeciderToPhyInterface implementation</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpbb509b814dff393971e94aeaf3e6e9ef"></a>These methods implement the <a class="el" href="a00076.html" title="This class is the interface for a Decider to the BasePhyLayer.">DeciderToPhyInterface</a>. </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af47d1c1771648303c64aa1da77cba2e4"></a><!-- doxytag: member="BasePhyLayer::getChannelInfo" ref="af47d1c1771648303c64aa1da77cba2e4" args="(simtime_t_cref from, simtime_t_cref to, AirFrameVector &amp;out) const " -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#af47d1c1771648303c64aa1da77cba2e4">getChannelInfo</a> (simtime_t_cref from, simtime_t_cref to, <a class="el" href="a00076.html#a94647bd7fd3cb6276450a17a2473f031">AirFrameVector</a> &amp;out) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Fills the passed AirFrameVector with all AirFrames that intersect with the time interval [from, to]. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="a00055.html">ConstMapping</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a42664d512b88bedf58b5d21adc180984">getThermalNoise</a> (simtime_t_cref from, simtime_t_cref to)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a <a class="el" href="a00121.html" title="Represents a changeable mapping (mathematical function) from at least time to Argument::mapped_type...">Mapping</a> which defines the thermal noise in the passed time frame (in mW).  <a href="#a42664d512b88bedf58b5d21adc180984"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a76d0386516d18d1cc64af5ef6fb315cd">sendControlMsgToMac</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called by the <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> to send a control message to the MACLayer.  <a href="#a76d0386516d18d1cc64af5ef6fb315cd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a0e9f0ccf4ed1d8377aa3f00b931a3e71">sendUp</a> (AirFrame *packet, <a class="el" href="a00072.html">DeciderResult</a> *result)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called to send an AirFrame with <a class="el" href="a00072.html" title="A class to represent the result of a processed packet (that is not noise) by the...">DeciderResult</a> to the MACLayer.  <a href="#a0e9f0ccf4ed1d8377aa3f00b931a3e71"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a45584e776ce714bcb30232bd4ace850c"></a><!-- doxytag: member="BasePhyLayer::getSimTime" ref="a45584e776ce714bcb30232bd4ace850c" args="() const " -->
virtual simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a45584e776ce714bcb30232bd4ace850c">getSimTime</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the current simulation time. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#aa4c75db0828cf579907b1e9a9c683e99">cancelScheduledMessage</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tells the <a class="el" href="a00149.html" title="Provides initialisation for several AnalogueModels and Deciders from modules directory...">PhyLayer</a> to cancel a scheduled message (AirFrame or ControlMessage).  <a href="#aa4c75db0828cf579907b1e9a9c683e99"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#ac012473c1be0df5df5f901ad1a3e890e">rescheduleMessage</a> (cMessage *msg, simtime_t_cref t)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tells the <a class="el" href="a00149.html" title="Provides initialisation for several AnalogueModels and Deciders from modules directory...">PhyLayer</a> to reschedule a message (AirFrame or ControlMessage).  <a href="#ac012473c1be0df5df5f901ad1a3e890e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a81153199f268b4831f42b20b06959764"></a><!-- doxytag: member="BasePhyLayer::drawCurrent" ref="a81153199f268b4831f42b20b06959764" args="(double amount, int activity)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a81153199f268b4831f42b20b06959764">drawCurrent</a> (double amount, int activity)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Does nothing. For an actual power supporting phy see "PhyLayerBattery". <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a62c90c4fb4aa17042fb0eaa8483cd613"></a><!-- doxytag: member="BasePhyLayer::getWorldUtility" ref="a62c90c4fb4aa17042fb0eaa8483cd613" args="() const " -->
virtual <a class="el" href="a00027.html">BaseWorldUtility</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a62c90c4fb4aa17042fb0eaa8483cd613">getWorldUtility</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a pointer to the simulations world-utility-module. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a4be8fe4abf2c9705625f93114aa6d337">recordScalar</a> (const char *name, double value, const char *unit=NULL)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Records a double into the scalar result file.  <a href="#a4be8fe4abf2c9705625f93114aa6d337"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><b>ProtocolIds</b> { <b>GENERIC</b> =  0
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a1333b977d8e274e32b80a4b300c96bc1">AirFrameStates</a> { <a class="el" href="a00026.html#a1333b977d8e274e32b80a4b300c96bc1aa0cb17278ea70e7e327de30aad32e0a0">START_RECEIVE</a> =  1, 
<a class="el" href="a00026.html#a1333b977d8e274e32b80a4b300c96bc1a2900d4f5f03ec09b83e5c24744924755">RECEIVING</a>, 
<a class="el" href="a00026.html#a1333b977d8e274e32b80a4b300c96bc1a8c8f8a59dc873e035f19750598ceb157">END_RECEIVE</a>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>The states of the receiving process for AirFrames. </p>
 <a href="a00026.html#a1333b977d8e274e32b80a4b300c96bc1">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac8dca20c727bdb1494d97da1c64bb55d"></a><!-- doxytag: member="BasePhyLayer::AnalogueModelList" ref="ac8dca20c727bdb1494d97da1c64bb55d" args="" -->
typedef std::vector<br class="typebreak"/>
&lt; <a class="el" href="a00007.html">AnalogueModel</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#ac8dca20c727bdb1494d97da1c64bb55d">AnalogueModelList</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Used to store the AnalogueModels to be used as filters. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af29abf3259af16b051ce48b0db7a64c0"></a><!-- doxytag: member="BasePhyLayer::ParameterMap" ref="af29abf3259af16b051ce48b0db7a64c0" args="" -->
typedef std::map&lt; std::string, <br class="typebreak"/>
cMsgPar &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#af29abf3259af16b051ce48b0db7a64c0">ParameterMap</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Used at initialisation to pass the parameters to the <a class="el" href="a00007.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a> and <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a>. <br/></td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">T&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="a00026.html#a356934b3e1dd4c9d40132a260b98e904">readPar</a> (const char *parName, const T defaultValue) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reads and returns the parameter with the passed name.  <a href="#a356934b3e1dd4c9d40132a260b98e904"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a08704deaf03b73c8eda67cc60e670853">initialize</a> (int stage)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">OMNeT++ initialization function.  <a href="#a08704deaf03b73c8eda67cc60e670853"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a3880154c8db8b8efb5315cb6ef8f6c41">handleMessage</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">OMNeT++ handle message function.  <a href="#a3880154c8db8b8efb5315cb6ef8f6c41"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="a00158.html">Radio</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#ae1ca5e4f7cf6d91456a20a0068d3c417">initializeRadio</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes and returns the radio class to use.  <a href="#ae1ca5e4f7cf6d91456a20a0068d3c417"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="a00007.html">AnalogueModel</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#af46970ea279e357d360f47aa46537c1f">getAnalogueModelFromName</a> (std::string name, <a class="el" href="a00026.html#af29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;params) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates and returns an instance of the <a class="el" href="a00007.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a> with the specified name.  <a href="#af46970ea279e357d360f47aa46537c1f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="a00067.html">Decider</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a095d1b5fd25b9ada3ac86d3c9237c3f8">getDeciderFromName</a> (std::string name, <a class="el" href="a00026.html#af29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;params)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates and returns an instance of the <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> with the specified name.  <a href="#a095d1b5fd25b9ada3ac86d3c9237c3f8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1e42622259807fe3cf06935e7a818ccf"></a><!-- doxytag: member="BasePhyLayer::encapsMsg" ref="a1e42622259807fe3cf06935e7a818ccf" args="(cPacket *msg)" -->
virtual AirFrame *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a1e42622259807fe3cf06935e7a818ccf">encapsMsg</a> (cPacket *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function encapsulates messages from the upper layer into an AirFrame and sets all necessary attributes. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#adb6dcf56295ceb53b34e83eb409a40a2">filterSignal</a> (AirFrame *frame)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Filters the passed AirFrame's <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a> by every registered <a class="el" href="a00007.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a>.  <a href="#adb6dcf56295ceb53b34e83eb409a40a2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#ada6c556e50ead146f822dadf6ea2a472">finishRadioSwitching</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called the moment the simulated switching process of the <a class="el" href="a00158.html" title="The class that represents the Radio as a state machine.">Radio</a> is finished.  <a href="#ada6c556e50ead146f822dadf6ea2a472"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#adecf85d8636ac48e1ce8cea176a3c71c">myProtocolId</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the identifier of the protocol this phy uses to send messages.  <a href="#adecf85d8636ac48e1ce8cea176a3c71c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a618479a7b36d43594ab3e8a7d80007bb">isKnownProtocolId</a> (int id) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns true if the protocol with the passed identifier is decodeable by the decider.  <a href="#a618479a7b36d43594ab3e8a7d80007bb"></a><br/></td></tr>
<tr><td class="memTemplParams" colspan="2"><a class="anchor" id="a4d8f41e96cf4e5ce37c9db90edda35ca"></a><!-- doxytag: member="BasePhyLayer::readPar" ref="a4d8f41e96cf4e5ce37c9db90edda35ca" args="(const char *parName, const simtime_t defaultValue) const " -->
template&lt;&gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">simtime_t&nbsp;</td><td class="memTemplItemRight" valign="bottom"><b>readPar</b> (const char *parName, const simtime_t defaultValue) const </td></tr>
<tr><td colspan="2"><div class="groupHeader">Handle Messages</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpab8d27efd7842b98784514a28b760dd0"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8d6f371fa6ea6ca89cb78764a05f31dd"></a><!-- doxytag: member="BasePhyLayer::handleAirFrame" ref="a8d6f371fa6ea6ca89cb78764a05f31dd" args="(AirFrame *frame)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a8d6f371fa6ea6ca89cb78764a05f31dd">handleAirFrame</a> (AirFrame *frame)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles messages received from the channel (probably AirFrames). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a17b1d469775962d23835dd5f43a639ac"></a><!-- doxytag: member="BasePhyLayer::handleUpperMessage" ref="a17b1d469775962d23835dd5f43a639ac" args="(cMessage *msg)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a17b1d469775962d23835dd5f43a639ac">handleUpperMessage</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles messages received from the upper layer through the data gate. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4cab267d310b5fd6cefe613fc8dfe71d"></a><!-- doxytag: member="BasePhyLayer::handleUpperControlMessage" ref="a4cab267d310b5fd6cefe613fc8dfe71d" args="(cMessage *msg)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a4cab267d310b5fd6cefe613fc8dfe71d">handleUpperControlMessage</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles messages received from the upper layer through the control gate. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a17088ad93f59e143ff6c7ba866a31982"></a><!-- doxytag: member="BasePhyLayer::handleSelfMessage" ref="a17088ad93f59e143ff6c7ba866a31982" args="(cMessage *msg)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a17088ad93f59e143ff6c7ba866a31982">handleSelfMessage</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles self scheduled messages. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6866e3f79df84cdb5550a51d6502463f"></a><!-- doxytag: member="BasePhyLayer::handleChannelSenseRequest" ref="a6866e3f79df84cdb5550a51d6502463f" args="(cMessage *msg)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a6866e3f79df84cdb5550a51d6502463f">handleChannelSenseRequest</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles reception of a ChannelSenseRequest by forwarding it to the decider and scheduling it to the point in time returned by the decider. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad0e987003f09275647a060e8a72cc5fa"></a><!-- doxytag: member="BasePhyLayer::handleAirFrameFirstReceive" ref="ad0e987003f09275647a060e8a72cc5fa" args="(AirFrame *msg)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#ad0e987003f09275647a060e8a72cc5fa">handleAirFrameFirstReceive</a> (AirFrame *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles incoming AirFrames with the state FIRST_RECEIVE. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a671f083680882230b754b7e9578e6274"></a><!-- doxytag: member="BasePhyLayer::handleAirFrameStartReceive" ref="a671f083680882230b754b7e9578e6274" args="(AirFrame *msg)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a671f083680882230b754b7e9578e6274">handleAirFrameStartReceive</a> (AirFrame *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles incoming AirFrames with the state START_RECEIVE. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9dbbcf0004b22c622ec4b06a19b4f564"></a><!-- doxytag: member="BasePhyLayer::handleAirFrameReceiving" ref="a9dbbcf0004b22c622ec4b06a19b4f564" args="(AirFrame *msg)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a9dbbcf0004b22c622ec4b06a19b4f564">handleAirFrameReceiving</a> (AirFrame *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles incoming AirFrames with the state RECEIVING. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4f8fde562c0004b498fc3294c3f54c2f"></a><!-- doxytag: member="BasePhyLayer::handleAirFrameEndReceive" ref="a4f8fde562c0004b498fc3294c3f54c2f" args="(AirFrame *msg)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a4f8fde562c0004b498fc3294c3f54c2f">handleAirFrameEndReceive</a> (AirFrame *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles incoming AirFrames with the state END_RECEIVE. <br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Send Messages</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpbb9983051dfc7dd35af04997a2d7edfd"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaa439e85a8bc20a39477055aecf04993"></a><!-- doxytag: member="BasePhyLayer::sendControlMessageUp" ref="aaa439e85a8bc20a39477055aecf04993" args="(cMessage *msg)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#aaa439e85a8bc20a39477055aecf04993">sendControlMessageUp</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends the passed control message to the upper layer. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af5ac9665c3f3eaee7846ef0ba141b858"></a><!-- doxytag: member="BasePhyLayer::sendMacPktUp" ref="af5ac9665c3f3eaee7846ef0ba141b858" args="(cMessage *pkt)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#af5ac9665c3f3eaee7846ef0ba141b858">sendMacPktUp</a> (cMessage *pkt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends the passed MacPkt to the upper layer. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1fe847ed3e50ccf3a3740234dfee42b1"></a><!-- doxytag: member="BasePhyLayer::sendMessageDown" ref="a1fe847ed3e50ccf3a3740234dfee42b1" args="(AirFrame *pkt)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a1fe847ed3e50ccf3a3740234dfee42b1">sendMessageDown</a> (AirFrame *pkt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends the passed AirFrame to the channel. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa59aef501cadd36c94d4f82efe9b64be"></a><!-- doxytag: member="BasePhyLayer::sendSelfMessage" ref="aa59aef501cadd36c94d4f82efe9b64be" args="(cMessage *msg, simtime_t_cref time)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#aa59aef501cadd36c94d4f82efe9b64be">sendSelfMessage</a> (cMessage *msg, simtime_t_cref time)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Schedule self message to passed point in time. <br/></td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="addc3dfa9056f0acafefacd34d5d059bf"></a><!-- doxytag: member="BasePhyLayer::protocolId" ref="addc3dfa9056f0acafefacd34d5d059bf" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>protocolId</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afedc2cd6f80601fb040b56256e6cc756"></a><!-- doxytag: member="BasePhyLayer::thermalNoise" ref="afedc2cd6f80601fb040b56256e6cc756" args="" -->
<a class="el" href="a00052.html">ConstantSimpleConstMapping</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#afedc2cd6f80601fb040b56256e6cc756">thermalNoise</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Defines the strength of the thermal noise. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a80fe7028b2fbf92f61dd30b79e30a86d"></a><!-- doxytag: member="BasePhyLayer::maxTXPower" ref="a80fe7028b2fbf92f61dd30b79e30a86d" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a80fe7028b2fbf92f61dd30b79e30a86d">maxTXPower</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The maximum transmission power a message can be send with. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7eaa041636b623066b5abd87a38afa25"></a><!-- doxytag: member="BasePhyLayer::sensitivity" ref="a7eaa041636b623066b5abd87a38afa25" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a7eaa041636b623066b5abd87a38afa25">sensitivity</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The sensitivity describes the minimum strength a signal must have to be received. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a71f6c8e91a8f597a5d213b30c64b0cf8"></a><!-- doxytag: member="BasePhyLayer::recordStats" ref="a71f6c8e91a8f597a5d213b30c64b0cf8" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a71f6c8e91a8f597a5d213b30c64b0cf8">recordStats</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stores if tracking of statistics (esp. cOutvectors) is enabled. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a38d35bc99079eff49deb6c870b1175e7"></a><!-- doxytag: member="BasePhyLayer::channelInfo" ref="a38d35bc99079eff49deb6c870b1175e7" args="" -->
<a class="el" href="a00042.html">ChannelInfo</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a38d35bc99079eff49deb6c870b1175e7">channelInfo</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Channel info keeps track of received AirFrames and provides information about currently active AirFrames at the channel. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6aefa7200582ec18d6ac5f8f8092a166"></a><!-- doxytag: member="BasePhyLayer::radio" ref="a6aefa7200582ec18d6ac5f8f8092a166" args="" -->
<a class="el" href="a00158.html">Radio</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a6aefa7200582ec18d6ac5f8f8092a166">radio</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The state machine storing the current radio state (TX, RX, SLEEP). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5be00b3a133596d8ed78a9f8e38973d4"></a><!-- doxytag: member="BasePhyLayer::decider" ref="a5be00b3a133596d8ed78a9f8e38973d4" args="" -->
<a class="el" href="a00067.html">Decider</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a5be00b3a133596d8ed78a9f8e38973d4">decider</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointer to the decider module. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abc00fc5777ef641f72b5a4d85bf65c93"></a><!-- doxytag: member="BasePhyLayer::analogueModels" ref="abc00fc5777ef641f72b5a4d85bf65c93" args="" -->
<a class="el" href="a00026.html#ac8dca20c727bdb1494d97da1c64bb55d">AnalogueModelList</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#abc00fc5777ef641f72b5a4d85bf65c93">analogueModels</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">List of the analogue models to use. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a49fcd06f6c27aab1d14d13eaecc09f1b"></a><!-- doxytag: member="BasePhyLayer::upperLayerIn" ref="a49fcd06f6c27aab1d14d13eaecc09f1b" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a49fcd06f6c27aab1d14d13eaecc09f1b">upperLayerIn</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The id of the in-data gate from the Mac layer. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a334fbbb0a1608058c46906ef2c90045f"></a><!-- doxytag: member="BasePhyLayer::upperLayerOut" ref="a334fbbb0a1608058c46906ef2c90045f" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a334fbbb0a1608058c46906ef2c90045f">upperLayerOut</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The id of the out-data gate to the Mac layer. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aca9b66970dd836cc696dd0907c58598b"></a><!-- doxytag: member="BasePhyLayer::upperControlOut" ref="aca9b66970dd836cc696dd0907c58598b" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#aca9b66970dd836cc696dd0907c58598b">upperControlOut</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The id of the out-control gate to the Mac layer. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab58c7430371f1ba135e0a641d150c1e3"></a><!-- doxytag: member="BasePhyLayer::upperControlIn" ref="ab58c7430371f1ba135e0a641d150c1e3" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#ab58c7430371f1ba135e0a641d150c1e3">upperControlIn</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The id of the in-control gate from the Mac layer. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac28de586b21162c377a180233299a1d5"></a><!-- doxytag: member="BasePhyLayer::radioSwitchingOverTimer" ref="ac28de586b21162c377a180233299a1d5" args="" -->
cMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#ac28de586b21162c377a180233299a1d5">radioSwitchingOverTimer</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Self message scheduled to the point in time when the switching process of the radio is over. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2ce22bc20ab469e99352958face5468d"></a><!-- doxytag: member="BasePhyLayer::txOverTimer" ref="a2ce22bc20ab469e99352958face5468d" args="" -->
cMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a2ce22bc20ab469e99352958face5468d">txOverTimer</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Self message scheduled to the point in time when the transmission of an AirFrame is over. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a48f5fc0fe990ee5dbe31911437a586f9"></a><!-- doxytag: member="BasePhyLayer::headerLength" ref="a48f5fc0fe990ee5dbe31911437a586f9" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a48f5fc0fe990ee5dbe31911437a586f9">headerLength</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stores the length of the phy header in bits. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad1de573273df163a5fc2b8b537c65e23"></a><!-- doxytag: member="BasePhyLayer::world" ref="ad1de573273df163a5fc2b8b537c65e23" args="" -->
<a class="el" href="a00027.html">BaseWorldUtility</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#ad1de573273df163a5fc2b8b537c65e23">world</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointer to the World Utility, to obtain some global information. <br/></td></tr>
<tr><td colspan="2"><h2>Static Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static short&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#ac68a290868512c992f8a49b6af7b6c7c">airFramePriority</a> = 10</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Defines the scheduling priority of AirFrames.  <a href="#ac68a290868512c992f8a49b6af7b6c7c"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7582bacd4cd232ebf9eeaee6ec473a64"></a><!-- doxytag: member="BasePhyLayer::getParametersFromXML" ref="a7582bacd4cd232ebf9eeaee6ec473a64" args="(cXMLElement *xmlData, ParameterMap &amp;outputMap) const " -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a7582bacd4cd232ebf9eeaee6ec473a64">getParametersFromXML</a> (cXMLElement *xmlData, <a class="el" href="a00026.html#af29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;outputMap) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Utility function. Reads the parameters of a XML element and stores them in the passed ParameterMap reference. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8ea7353793eed2f1a7b0cd1caacd72e9"></a><!-- doxytag: member="BasePhyLayer::initializeAnalogueModels" ref="a8ea7353793eed2f1a7b0cd1caacd72e9" args="(cXMLElement *xmlConfig)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a8ea7353793eed2f1a7b0cd1caacd72e9">initializeAnalogueModels</a> (cXMLElement *xmlConfig)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes the AnalogueModels with the data from the passed XML-config data. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9da4f8ffaa373a0de7895cbea524816b"></a><!-- doxytag: member="BasePhyLayer::initializeDecider" ref="a9da4f8ffaa373a0de7895cbea524816b" args="(cXMLElement *xmlConfig)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a9da4f8ffaa373a0de7895cbea524816b">initializeDecider</a> (cXMLElement *xmlConfig)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes the <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> with the data from the passed XML-config data. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6dd46cf3eb4cac8e6fe56a4f17cf8f55"></a><!-- doxytag: member="BasePhyLayer::BasePhyLayer" ref="a6dd46cf3eb4cac8e6fe56a4f17cf8f55" args="(const BasePhyLayer &amp;)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a6dd46cf3eb4cac8e6fe56a4f17cf8f55">BasePhyLayer</a> (const <a class="el" href="a00026.html">BasePhyLayer</a> &amp;)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy constructor is not allowed. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7dc17265602d237a6981845df223fa54"></a><!-- doxytag: member="BasePhyLayer::operator=" ref="a7dc17265602d237a6981845df223fa54" args="(const BasePhyLayer &amp;)" -->
<a class="el" href="a00026.html">BasePhyLayer</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a7dc17265602d237a6981845df223fa54">operator=</a> (const <a class="el" href="a00026.html">BasePhyLayer</a> &amp;)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Assignment operator is not allowed. <br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>The <a class="el" href="a00026.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> represents the physical layer of a nic. </p>
<p>The <a class="el" href="a00026.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> is directly connected to the mac layer via OMNeT channels and is able to send messages to other physical layers through sub-classing from ChannelAcces.</p>
<p>The <a class="el" href="a00026.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> encapsulates two sub modules. The AnalogueModels, which are responsible for simulating the attenuation of received signals and the <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> which provides the main functionality of the physical layer like signal classification (noise or not noise) and demodulation (calculating transmission errors).</p>
<p>The <a class="el" href="a00026.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> itself is responsible for the OMNeT depended parts of the physical layer which are the following:</p>
<p>Module initialization:</p>
<ul>
<li>read ned-parameters and initialize module, <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> and AnalogueModels.</li>
</ul>
<p>Message handling:</p>
<ul>
<li>receive messages from mac layer and hand them to the <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> or directly send them to the channel</li>
<li>receive AirFrames from the channel, hand them to the AnalogueModels for filtering, simulate delay and transmission duration, hand it to the <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> for evaluation and send received packets to the mac layer</li>
<li>keep track of currently active AirFrames on the channel (see <a class="el" href="a00042.html" title="This class is used by the BasePhyLayer to keep track of the AirFrames on the channel...">ChannelInfo</a>)</li>
</ul>
<p>The actual evaluation of incoming signals is done by the <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a>.</p>
<p>base class <a class="el" href="a00041.html" title="Basic class for all physical layers, please don&#39;t touch!!">ChannelAccess</a>:</p>
<ul>
<li>provides access to the channel via the <a class="el" href="a00050.html" title="BaseConnectionManager implementation which only defines a specific max interference...">ConnectionManager</a></li>
</ul>
<p>base class <a class="el" href="a00076.html" title="This class is the interface for a Decider to the BasePhyLayer.">DeciderToPhyInterface</a>:</p>
<ul>
<li>interface for the <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a></li>
</ul>
<p>base class <a class="el" href="a00119.html" title="Defines the methods provided by the phy to the mac layer.">MacToPhyInterface</a>:</p>
<ul>
<li>interface for the Mac </li>
</ul>

<p>Definition at line <a class="el" href="a00260_source.html#l00066">66</a> of file <a class="el" href="a00260_source.html">BasePhyLayer.h</a>.</p>
<hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="a1333b977d8e274e32b80a4b300c96bc1"></a><!-- doxytag: member="BasePhyLayer::AirFrameStates" ref="a1333b977d8e274e32b80a4b300c96bc1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="a00026.html#a1333b977d8e274e32b80a4b300c96bc1">BasePhyLayer::AirFrameStates</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The states of the receiving process for AirFrames. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a1333b977d8e274e32b80a4b300c96bc1aa0cb17278ea70e7e327de30aad32e0a0"></a><!-- doxytag: member="START_RECEIVE" ref="a1333b977d8e274e32b80a4b300c96bc1aa0cb17278ea70e7e327de30aad32e0a0" args="" -->START_RECEIVE</em>&nbsp;</td><td>
<p>Start of actual receiving process of the AirFrame. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a1333b977d8e274e32b80a4b300c96bc1a2900d4f5f03ec09b83e5c24744924755"></a><!-- doxytag: member="RECEIVING" ref="a1333b977d8e274e32b80a4b300c96bc1a2900d4f5f03ec09b83e5c24744924755" args="" -->RECEIVING</em>&nbsp;</td><td>
<p>AirFrame is being received. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a1333b977d8e274e32b80a4b300c96bc1a8c8f8a59dc873e035f19750598ceb157"></a><!-- doxytag: member="END_RECEIVE" ref="a1333b977d8e274e32b80a4b300c96bc1a8c8f8a59dc873e035f19750598ceb157" args="" -->END_RECEIVE</em>&nbsp;</td><td>
<p>Receiving process over. </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="a00260_source.html#l00149">149</a> of file <a class="el" href="a00260_source.html">BasePhyLayer.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00149"></a>00149                       {
<a name="l00151"></a>00151     <a class="code" href="a00026.html#a1333b977d8e274e32b80a4b300c96bc1aa0cb17278ea70e7e327de30aad32e0a0" title="Start of actual receiving process of the AirFrame.">START_RECEIVE</a> = 1,
<a name="l00153"></a>00153     <a class="code" href="a00026.html#a1333b977d8e274e32b80a4b300c96bc1a2900d4f5f03ec09b83e5c24744924755" title="AirFrame is being received.">RECEIVING</a>,
<a name="l00155"></a>00155     <a class="code" href="a00026.html#a1333b977d8e274e32b80a4b300c96bc1a8c8f8a59dc873e035f19750598ceb157" title="Receiving process over.">END_RECEIVE</a>
<a name="l00156"></a>00156   };
</pre></div></p>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a0fc69907490ed2752d2a888ef26348ff"></a><!-- doxytag: member="BasePhyLayer::~BasePhyLayer" ref="a0fc69907490ed2752d2a888ef26348ff" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BasePhyLayer::~BasePhyLayer </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Free the pointer to the decider and the AnalogueModels and the <a class="el" href="a00158.html" title="The class that represents the Radio as a state machine.">Radio</a>. </p>

<p>Definition at line <a class="el" href="a00259_source.html#l00666">666</a> of file <a class="el" href="a00259_source.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00260_source.html#l00119">analogueModels</a>, <a class="el" href="a00260_source.html#l00107">channelInfo</a>, <a class="el" href="a00260_source.html#l00113">decider</a>, <a class="el" href="a00261_source.html#l00197">ChannelInfo::getAirFrames()</a>, <a class="el" href="a00278_source.html#l00344">Radio::getAnalogueModel()</a>, <a class="el" href="a00260_source.html#l00110">radio</a>, <a class="el" href="a00260_source.html#l00140">radioSwitchingOverTimer</a>, <a class="el" href="a00260_source.html#l00092">thermalNoise</a>, and <a class="el" href="a00260_source.html#l00146">txOverTimer</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00666"></a>00666                             {
<a name="l00667"></a>00667   <span class="comment">//get AirFrames from ChannelInfo and delete</span>
<a name="l00668"></a>00668   <span class="comment">//(although ChannelInfo normally owns the AirFrames it</span>
<a name="l00669"></a>00669   <span class="comment">//is not able to cancel and delete them itself</span>
<a name="l00670"></a>00670   <a class="code" href="a00076.html#a94647bd7fd3cb6276450a17a2473f031" title="Type for container of AirFrames.">AirFrameVector</a> channel;
<a name="l00671"></a>00671   <a class="code" href="a00026.html#a38d35bc99079eff49deb6c870b1175e7" title="Channel info keeps track of received AirFrames and provides information about currently...">channelInfo</a>.<a class="code" href="a00042.html#a76e9891245a5df7dd6bfb14e99e343e5" title="Fills the passed AirFrameVector reference with the AirFrames which intersect with...">getAirFrames</a>(0, simTime(), channel);
<a name="l00672"></a>00672 
<a name="l00673"></a>00673   <span class="keywordflow">for</span>(AirFrameVector::iterator it = channel.begin();
<a name="l00674"></a>00674     it != channel.end(); ++it)
<a name="l00675"></a>00675   {
<a name="l00676"></a>00676     cancelAndDelete(*it);
<a name="l00677"></a>00677   }
<a name="l00678"></a>00678 
<a name="l00679"></a>00679   <span class="comment">//free timer messages</span>
<a name="l00680"></a>00680   <span class="keywordflow">if</span>(<a class="code" href="a00026.html#a2ce22bc20ab469e99352958face5468d" title="Self message scheduled to the point in time when the transmission of an AirFrame...">txOverTimer</a>) {
<a name="l00681"></a>00681     cancelAndDelete(<a class="code" href="a00026.html#a2ce22bc20ab469e99352958face5468d" title="Self message scheduled to the point in time when the transmission of an AirFrame...">txOverTimer</a>);
<a name="l00682"></a>00682   }
<a name="l00683"></a>00683   <span class="keywordflow">if</span>(<a class="code" href="a00026.html#ac28de586b21162c377a180233299a1d5" title="Self message scheduled to the point in time when the switching process of the radio...">radioSwitchingOverTimer</a>) {
<a name="l00684"></a>00684         cancelAndDelete(<a class="code" href="a00026.html#ac28de586b21162c377a180233299a1d5" title="Self message scheduled to the point in time when the switching process of the radio...">radioSwitchingOverTimer</a>);
<a name="l00685"></a>00685   }
<a name="l00686"></a>00686 
<a name="l00687"></a>00687   <span class="comment">//free thermal noise mapping</span>
<a name="l00688"></a>00688   <span class="keywordflow">if</span>(<a class="code" href="a00026.html#afedc2cd6f80601fb040b56256e6cc756" title="Defines the strength of the thermal noise.">thermalNoise</a>) {
<a name="l00689"></a>00689     <span class="keyword">delete</span> <a class="code" href="a00026.html#afedc2cd6f80601fb040b56256e6cc756" title="Defines the strength of the thermal noise.">thermalNoise</a>;
<a name="l00690"></a>00690   }
<a name="l00691"></a>00691 
<a name="l00692"></a>00692   <span class="comment">//free Decider</span>
<a name="l00693"></a>00693   <span class="keywordflow">if</span>(<a class="code" href="a00026.html#a5be00b3a133596d8ed78a9f8e38973d4" title="Pointer to the decider module.">decider</a> != 0) {
<a name="l00694"></a>00694     <span class="keyword">delete</span> <a class="code" href="a00026.html#a5be00b3a133596d8ed78a9f8e38973d4" title="Pointer to the decider module.">decider</a>;
<a name="l00695"></a>00695   }
<a name="l00696"></a>00696 
<a name="l00697"></a>00697   <span class="comment">/*</span>
<a name="l00698"></a>00698 <span class="comment">   * get a pointer to the radios RSAM again to avoid deleting it,</span>
<a name="l00699"></a>00699 <span class="comment">   * it is not created by calling new (BasePhyLayer is not the owner)!</span>
<a name="l00700"></a>00700 <span class="comment">   */</span>
<a name="l00701"></a>00701   <a class="code" href="a00007.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a>* rsamPointer = <a class="code" href="a00026.html#a6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a> ? <a class="code" href="a00026.html#a6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>-&gt;<a class="code" href="a00158.html#ab9833b839dbe4187fdfa41e36ba171f1" title="Returns a pointer to the RadioStateAnalogueModel.">getAnalogueModel</a>() : NULL;
<a name="l00702"></a>00702 
<a name="l00703"></a>00703   <span class="comment">//free AnalogueModels</span>
<a name="l00704"></a>00704   <span class="keywordflow">for</span>(AnalogueModelList::const_iterator it = <a class="code" href="a00026.html#abc00fc5777ef641f72b5a4d85bf65c93" title="List of the analogue models to use.">analogueModels</a>.begin();
<a name="l00705"></a>00705     it != <a class="code" href="a00026.html#abc00fc5777ef641f72b5a4d85bf65c93" title="List of the analogue models to use.">analogueModels</a>.end(); ++it) {
<a name="l00706"></a>00706 
<a name="l00707"></a>00707     AnalogueModelList::value_type tmp = *it;
<a name="l00708"></a>00708 
<a name="l00709"></a>00709     <span class="comment">// do not delete the RSAM, it&apos;s not allocated by new!</span>
<a name="l00710"></a>00710     <span class="keywordflow">if</span> (tmp == rsamPointer) {
<a name="l00711"></a>00711       rsamPointer = 0;
<a name="l00712"></a>00712       <span class="keywordflow">continue</span>;
<a name="l00713"></a>00713     }
<a name="l00714"></a>00714 
<a name="l00715"></a>00715     <span class="keywordflow">if</span>(tmp != 0) {
<a name="l00716"></a>00716       <span class="keyword">delete</span> tmp;
<a name="l00717"></a>00717     }
<a name="l00718"></a>00718   }
<a name="l00719"></a>00719 
<a name="l00720"></a>00720 
<a name="l00721"></a>00721   <span class="comment">// free radio</span>
<a name="l00722"></a>00722   <span class="keywordflow">if</span>(<a class="code" href="a00026.html#a6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a> != 0) {
<a name="l00723"></a>00723     <span class="keyword">delete</span> <a class="code" href="a00026.html#a6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>;
<a name="l00724"></a>00724   }
<a name="l00725"></a>00725 }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aa4c75db0828cf579907b1e9a9c683e99"></a><!-- doxytag: member="BasePhyLayer::cancelScheduledMessage" ref="aa4c75db0828cf579907b1e9a9c683e99" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::cancelScheduledMessage </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tells the <a class="el" href="a00149.html" title="Provides initialisation for several AnalogueModels and Deciders from modules directory...">PhyLayer</a> to cancel a scheduled message (AirFrame or ControlMessage). </p>
<p>Used by the <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> if it doesn't need to handle an AirFrame or ControlMessage again anymore. </p>

<p>Implements <a class="el" href="a00076.html#af85151048dba05ec27e378000fd95403">DeciderToPhyInterface</a>.</p>

<p>Definition at line <a class="el" href="a00259_source.html#l00840">840</a> of file <a class="el" href="a00259_source.html">BasePhyLayer.cc</a>.</p>

<p>Referenced by <a class="el" href="a00259_source.html#l00849">rescheduleMessage()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00840"></a>00840                                                        {
<a name="l00841"></a>00841   <span class="keywordflow">if</span>(msg-&gt;isScheduled()){
<a name="l00842"></a>00842     cancelEvent(msg);
<a name="l00843"></a>00843   } <span class="keywordflow">else</span> {
<a name="l00844"></a>00844     EV &lt;&lt; <span class="stringliteral">&quot;Warning: Decider wanted to cancel a scheduled message but message&quot;</span>
<a name="l00845"></a>00845        &lt;&lt; <span class="stringliteral">&quot; wasn&apos;t actually scheduled. Message is: &quot;</span> &lt;&lt; msg &lt;&lt; endl;
<a name="l00846"></a>00846   }
<a name="l00847"></a>00847 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="adb6dcf56295ceb53b34e83eb409a40a2"></a><!-- doxytag: member="BasePhyLayer::filterSignal" ref="adb6dcf56295ceb53b34e83eb409a40a2" args="(AirFrame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::filterSignal </td>
          <td>(</td>
          <td class="paramtype">AirFrame *&nbsp;</td>
          <td class="paramname"> <em>frame</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Filters the passed AirFrame's <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a> by every registered <a class="el" href="a00007.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a>. </p>

<p><p>claim the <a class="el" href="a00127.html" title="Class to store object position and movement.">Move</a> pattern of the sender from the <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a> </p>
</p>

<p>Definition at line <a class="el" href="a00259_source.html#l00643">643</a> of file <a class="el" href="a00259_source.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00260_source.html#l00119">analogueModels</a>, <a class="el" href="a00245_source.html#l00184">BaseMobility::getCurrentPosition()</a>, and <a class="el" href="a00222_source.html#l00173">ChannelAccess::getMobilityModule()</a>.</p>

<p>Referenced by <a class="el" href="a00259_source.html#l00389">handleAirFrameStartReceive()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00643"></a>00643                                                {
<a name="l00644"></a>00644   <span class="keywordflow">if</span> (<a class="code" href="a00026.html#abc00fc5777ef641f72b5a4d85bf65c93" title="List of the analogue models to use.">analogueModels</a>.empty())
<a name="l00645"></a>00645     <span class="keywordflow">return</span>;
<a name="l00646"></a>00646 
<a name="l00647"></a>00647   <a class="code" href="a00041.html" title="Basic class for all physical layers, please don&amp;#39;t touch!!">ChannelAccess</a> *<span class="keyword">const</span> senderModule   = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="a00041.html" title="Basic class for all physical layers, please don&amp;#39;t touch!!">ChannelAccess</a> *const<span class="keyword">&gt;</span>(frame-&gt;getSenderModule());
<a name="l00648"></a>00648   <a class="code" href="a00041.html" title="Basic class for all physical layers, please don&amp;#39;t touch!!">ChannelAccess</a> *<span class="keyword">const</span> receiverModule = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="a00041.html" title="Basic class for all physical layers, please don&amp;#39;t touch!!">ChannelAccess</a> *const<span class="keyword">&gt;</span>(frame-&gt;getArrivalModule());
<a name="l00649"></a>00649   <span class="comment">//const simtime_t      sStart         = frame-&gt;getSignal().getReceptionStart();</span>
<a name="l00650"></a>00650 
<a name="l00651"></a>00651   assert(senderModule); assert(receiverModule);
<a name="l00652"></a>00652 
<a name="l00654"></a>00654   <a class="code" href="a00023.html" title="Base module for all mobility modules.">ChannelMobilityPtrType</a> sendersMobility  = senderModule   ? senderModule-&gt;<a class="code" href="a00041.html#a46308b607a41da6686d4ef144a4e9968" title="Returns the host&amp;#39;s mobility module.">getMobilityModule</a>()   : NULL;
<a name="l00655"></a>00655   <a class="code" href="a00023.html" title="Base module for all mobility modules.">ChannelMobilityPtrType</a> receiverMobility = receiverModule ? receiverModule-&gt;<a class="code" href="a00041.html#a46308b607a41da6686d4ef144a4e9968" title="Returns the host&amp;#39;s mobility module.">getMobilityModule</a>() : NULL;
<a name="l00656"></a>00656 
<a name="l00657"></a>00657   <span class="keyword">const</span> <a class="code" href="a00062.html" title="Class for storing 3D coordinates.">Coord</a> sendersPos  = sendersMobility  ? sendersMobility-&gt;<a class="code" href="a00023.html#a43e40c6e56445ca9439d7d44a37b12c1" title="Returns the current position at the current simulation time.">getCurrentPosition</a>(<span class="comment">/*sStart*/</span>) : NoMobiltyPos;
<a name="l00658"></a>00658   <span class="keyword">const</span> <a class="code" href="a00062.html" title="Class for storing 3D coordinates.">Coord</a> receiverPos = receiverMobility ? receiverMobility-&gt;<a class="code" href="a00023.html#a43e40c6e56445ca9439d7d44a37b12c1" title="Returns the current position at the current simulation time.">getCurrentPosition</a>(<span class="comment">/*sStart*/</span>): NoMobiltyPos;
<a name="l00659"></a>00659 
<a name="l00660"></a>00660   <span class="keywordflow">for</span>(AnalogueModelList::const_iterator it = <a class="code" href="a00026.html#abc00fc5777ef641f72b5a4d85bf65c93" title="List of the analogue models to use.">analogueModels</a>.begin(); it != <a class="code" href="a00026.html#abc00fc5777ef641f72b5a4d85bf65c93" title="List of the analogue models to use.">analogueModels</a>.end(); ++it)
<a name="l00661"></a>00661     (*it)-&gt;filterSignal(frame, sendersPos, receiverPos);
<a name="l00662"></a>00662 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ada6c556e50ead146f822dadf6ea2a472"></a><!-- doxytag: member="BasePhyLayer::finishRadioSwitching" ref="ada6c556e50ead146f822dadf6ea2a472" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::finishRadioSwitching </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called the moment the simulated switching process of the <a class="el" href="a00158.html" title="The class that represents the Radio as a state machine.">Radio</a> is finished. </p>
<p>The <a class="el" href="a00158.html" title="The class that represents the Radio as a state machine.">Radio</a> is set the new RadioState and the MAC Layer is sent a confirmation message. </p>

<p>Reimplemented in <a class="el" href="a00150.html#a69a2284db629830c12a625e60d3221ad">PhyLayerBattery</a>, and <a class="el" href="a00151.html#ab708baeafda67c040b853c3d192ed516">PhyLayerUWBIR</a>.</p>

<p>Definition at line <a class="el" href="a00259_source.html#l00735">735</a> of file <a class="el" href="a00259_source.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00277_source.html#l00187">Radio::endSwitch()</a>, <a class="el" href="a00260_source.html#l00110">radio</a>, <a class="el" href="a00270_source.html#l00031">MacToPhyInterface::RADIO_SWITCHING_OVER</a>, and <a class="el" href="a00259_source.html#l00813">sendControlMsgToMac()</a>.</p>

<p>Referenced by <a class="el" href="a00259_source.html#l00590">handleSelfMessage()</a>, and <a class="el" href="a00259_source.html#l00741">setRadioState()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00736"></a>00736 {
<a name="l00737"></a>00737   <a class="code" href="a00026.html#a6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>-&gt;<a class="code" href="a00158.html#aceb966be7e36e87068ae3424de8a5928" title="called by PhyLayer when duration-time for the current switching process is up">endSwitch</a>(simTime());
<a name="l00738"></a>00738   <a class="code" href="a00026.html#a76d0386516d18d1cc64af5ef6fb315cd" title="Called by the Decider to send a control message to the MACLayer.">sendControlMsgToMac</a>(<span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;Radio switching over&quot;</span>, <a class="code" href="a00119.html#a36bc50a86bf1cc0f9efd374613d61a52a876c7366bd2bcb675b41e60007831d06" title="Indicates the end of a radio switch.">RADIO_SWITCHING_OVER</a>));
<a name="l00739"></a>00739 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af46970ea279e357d360f47aa46537c1f"></a><!-- doxytag: member="BasePhyLayer::getAnalogueModelFromName" ref="af46970ea279e357d360f47aa46537c1f" args="(std::string name, ParameterMap &amp;params) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00007.html">AnalogueModel</a> * BasePhyLayer::getAnalogueModelFromName </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00026.html#af29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>params</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates and returns an instance of the <a class="el" href="a00007.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a> with the specified name. </p>
<p>The returned <a class="el" href="a00007.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a> has to be generated with the "new" command. The <a class="el" href="a00026.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> keeps the ownership of the returned <a class="el" href="a00007.html" title="Interface for the analogue models of the physical layer.">AnalogueModel</a>.</p>
<p>This method is used by the <a class="el" href="a00026.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> during initialisation to load the AnalogueModels which has been specified in the ned file.</p>
<p>This method has to be overridden if you want to be able to load your own AnalogueModels. </p>

<p>Reimplemented in <a class="el" href="a00149.html#a6401f4304c6b938c4685340803262e9c">PhyLayer</a>, <a class="el" href="a00151.html#a8ecb0d21f7960fe54141eb608c420ef5">PhyLayerUWBIR</a>, and <a class="el" href="a00166.html#a7397f0b7d057ce896bd8bbf4504664fd">SamplePhyLayer</a>.</p>

<p>Definition at line <a class="el" href="a00259_source.html#l00326">326</a> of file <a class="el" href="a00259_source.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00278_source.html#l00344">Radio::getAnalogueModel()</a>, and <a class="el" href="a00260_source.html#l00110">radio</a>.</p>

<p>Referenced by <a class="el" href="a00259_source.html#l00257">initializeAnalogueModels()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00326"></a>00326                                                                                                     {
<a name="l00327"></a>00327 
<a name="l00328"></a>00328   <span class="comment">// add default analogue models here</span>
<a name="l00329"></a>00329 
<a name="l00330"></a>00330   <span class="comment">// case &quot;RSAM&quot;, pointer is valid as long as the radio exists</span>
<a name="l00331"></a>00331   <span class="keywordflow">if</span> (name == <span class="stringliteral">&quot;RadioStateAnalogueModel&quot;</span>)
<a name="l00332"></a>00332   {
<a name="l00333"></a>00333     <span class="keywordflow">return</span> <a class="code" href="a00026.html#a6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>-&gt;<a class="code" href="a00158.html#ab9833b839dbe4187fdfa41e36ba171f1" title="Returns a pointer to the RadioStateAnalogueModel.">getAnalogueModel</a>();
<a name="l00334"></a>00334   }
<a name="l00335"></a>00335 
<a name="l00336"></a>00336   <span class="keywordflow">return</span> 0;
<a name="l00337"></a>00337 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8cc235ebda1b8ff6dcf17b6b0b91fc13"></a><!-- doxytag: member="BasePhyLayer::getChannelState" ref="a8cc235ebda1b8ff6dcf17b6b0b91fc13" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00043.html">ChannelState</a> BasePhyLayer::getChannelState </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the current state of the channel. </p>
<p>See <a class="el" href="a00043.html" title="Provides information about the current state of the channel:.">ChannelState</a> for details. </p>

<p>Implements <a class="el" href="a00119.html#affa30a25b96ffe387b22c68ca35f77a5">MacToPhyInterface</a>.</p>

<p>Definition at line <a class="el" href="a00259_source.html#l00769">769</a> of file <a class="el" href="a00259_source.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00260_source.html#l00113">decider</a>, and <a class="el" href="a00265_source.html#l00016">Decider::getChannelState()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00769"></a>00769                                                  {
<a name="l00770"></a>00770   Enter_Method_Silent();
<a name="l00771"></a>00771   assert(<a class="code" href="a00026.html#a5be00b3a133596d8ed78a9f8e38973d4" title="Pointer to the decider module.">decider</a>);
<a name="l00772"></a>00772   <span class="keywordflow">return</span> <a class="code" href="a00026.html#a5be00b3a133596d8ed78a9f8e38973d4" title="Pointer to the decider module.">decider</a>-&gt;<a class="code" href="a00067.html#aa9f0dcd955639fa2c16233f4654a82bc" title="A function that returns information about the channel state.">getChannelState</a>();
<a name="l00773"></a>00773 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a095d1b5fd25b9ada3ac86d3c9237c3f8"></a><!-- doxytag: member="BasePhyLayer::getDeciderFromName" ref="a095d1b5fd25b9ada3ac86d3c9237c3f8" args="(std::string name, ParameterMap &amp;params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00067.html">Decider</a> * BasePhyLayer::getDeciderFromName </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00026.html#af29abf3259af16b051ce48b0db7a64c0">ParameterMap</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>params</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates and returns an instance of the <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> with the specified name. </p>
<p>The returned <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> has to be generated with the "new" command. The <a class="el" href="a00026.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> keeps the ownership of the returned <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a>.</p>
<p>This method is used by the <a class="el" href="a00026.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> during initialisation to load the <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> which has been specified in the ned file.</p>
<p>This method has to be overridden if you want to be able to load your own <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a>. </p>

<p>Reimplemented in <a class="el" href="a00149.html#aa09a8558e04d2aba287be91d7fbd2548">PhyLayer</a>, <a class="el" href="a00150.html#a7d09d3b83e7a6ad89682101aaa084579">PhyLayerBattery</a>, <a class="el" href="a00151.html#af44692e4d9585da22958c11707df9631">PhyLayerUWBIR</a>, and <a class="el" href="a00166.html#a92f8ad35c7cfed1e712ee00ead259aee">SamplePhyLayer</a>.</p>

<p>Definition at line <a class="el" href="a00259_source.html#l00249">249</a> of file <a class="el" href="a00259_source.html">BasePhyLayer.cc</a>.</p>

<p>Referenced by <a class="el" href="a00259_source.html#l00206">initializeDecider()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00250"></a>00250 {
<a name="l00251"></a>00251   <span class="keywordflow">return</span> 0;
<a name="l00252"></a>00252 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aae998c3fac0c23ddf6c93b00ef533479"></a><!-- doxytag: member="BasePhyLayer::getPhyHeaderLength" ref="aae998c3fac0c23ddf6c93b00ef533479" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BasePhyLayer::getPhyHeaderLength </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the length of the phy header in bits. </p>
<p>Since the MAC layer has to create the signal for a transmission it has to know the total length of the packet and therefore needs the length of the phy header. </p>

<p>Implements <a class="el" href="a00119.html#a33d2b623de8374e17224467d413a3c55">MacToPhyInterface</a>.</p>

<p>Definition at line <a class="el" href="a00259_source.html#l00775">775</a> of file <a class="el" href="a00259_source.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00260_source.html#l00159">headerLength</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00775"></a>00775                                            {
<a name="l00776"></a>00776   Enter_Method_Silent();
<a name="l00777"></a>00777   <span class="keywordflow">if</span> (<a class="code" href="a00026.html#a48f5fc0fe990ee5dbe31911437a586f9" title="Stores the length of the phy header in bits.">headerLength</a> &lt; 0)
<a name="l00778"></a>00778     <span class="keywordflow">return</span> par(<span class="stringliteral">&quot;headerLength&quot;</span>).longValue();
<a name="l00779"></a>00779   <span class="keywordflow">return</span> <a class="code" href="a00026.html#a48f5fc0fe990ee5dbe31911437a586f9" title="Stores the length of the phy header in bits.">headerLength</a>;
<a name="l00780"></a>00780 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a893db61c894236b50c4c56e569ceedbb"></a><!-- doxytag: member="BasePhyLayer::getRadioState" ref="a893db61c894236b50c4c56e569ceedbb" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BasePhyLayer::getRadioState </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the current state the radio is in. </p>
<p>See RadioState for possible values.</p>
<p>This method is mainly used by the mac layer. </p>

<p>Implements <a class="el" href="a00119.html#a00dd43576b4da205117d53bd3baadc71">MacToPhyInterface</a>.</p>

<p>Definition at line <a class="el" href="a00259_source.html#l00729">729</a> of file <a class="el" href="a00259_source.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00278_source.html#l00321">Radio::getCurrentState()</a>, and <a class="el" href="a00260_source.html#l00110">radio</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00729"></a>00729                                       {
<a name="l00730"></a>00730   Enter_Method_Silent();
<a name="l00731"></a>00731   assert(<a class="code" href="a00026.html#a6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>);
<a name="l00732"></a>00732   <span class="keywordflow">return</span> <a class="code" href="a00026.html#a6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>-&gt;<a class="code" href="a00158.html#af01639feb0bc2c90e850b5130d350a12" title="Returns the state the Radio is currently in.">getCurrentState</a>();
<a name="l00733"></a>00733 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a42664d512b88bedf58b5d21adc180984"></a><!-- doxytag: member="BasePhyLayer::getThermalNoise" ref="a42664d512b88bedf58b5d21adc180984" args="(simtime_t_cref from, simtime_t_cref to)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00055.html">ConstMapping</a> * BasePhyLayer::getThermalNoise </td>
          <td>(</td>
          <td class="paramtype">simtime_t_cref&nbsp;</td>
          <td class="paramname"> <em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t_cref&nbsp;</td>
          <td class="paramname"> <em>to</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a <a class="el" href="a00121.html" title="Represents a changeable mapping (mathematical function) from at least time to Argument::mapped_type...">Mapping</a> which defines the thermal noise in the passed time frame (in mW). </p>
<p>The implementing class of this method keeps ownership of the <a class="el" href="a00121.html" title="Represents a changeable mapping (mathematical function) from at least time to Argument::mapped_type...">Mapping</a>.</p>
<p>This implementation returns a constant mapping with the value of the "thermalNoise" module parameter</p>
<p>Override this method if you want to define a more complex thermal noise. </p>

<p>Implements <a class="el" href="a00076.html#a2c55926187883df5bc322c947d317534">DeciderToPhyInterface</a>.</p>

<p>Definition at line <a class="el" href="a00259_source.html#l00806">806</a> of file <a class="el" href="a00259_source.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00273_source.html#l01669">SimpleConstMapping::initializeArguments()</a>, and <a class="el" href="a00260_source.html#l00092">thermalNoise</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00806"></a>00806                                                                                       {
<a name="l00807"></a>00807   <span class="keywordflow">if</span>(<a class="code" href="a00026.html#afedc2cd6f80601fb040b56256e6cc756" title="Defines the strength of the thermal noise.">thermalNoise</a>)
<a name="l00808"></a>00808     <a class="code" href="a00026.html#afedc2cd6f80601fb040b56256e6cc756" title="Defines the strength of the thermal noise.">thermalNoise</a>-&gt;<a class="code" href="a00170.html#a17d3c5e8c98e7451a844d59c95c7272a" title="Initializes the key entry set with the passed position as entry.">initializeArguments</a>(<a class="code" href="a00009.html" title="Defines an argument for a mapping.">Argument</a>(from));
<a name="l00809"></a>00809 
<a name="l00810"></a>00810   <span class="keywordflow">return</span> <a class="code" href="a00026.html#afedc2cd6f80601fb040b56256e6cc756" title="Defines the strength of the thermal noise.">thermalNoise</a>;
<a name="l00811"></a>00811 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3880154c8db8b8efb5315cb6ef8f6c41"></a><!-- doxytag: member="BasePhyLayer::handleMessage" ref="a3880154c8db8b8efb5315cb6ef8f6c41" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::handleMessage </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>OMNeT++ handle message function. </p>
<p>Classify and forward message to subroutines.</p>
<ul>
<li>AirFrames from channel</li>
<li>self scheduled AirFrames</li>
<li>MacPackets from MAC layer</li>
<li>ControllMesasges from MAC layer</li>
<li>self messages like TX_OVER and RADIO_SWITCHED </li>
</ul>

<p>Reimplemented in <a class="el" href="a00166.html#aea91987fbece2dea329cf0a24dfa5450">SamplePhyLayer</a>.</p>

<p>Definition at line <a class="el" href="a00259_source.html#l00341">341</a> of file <a class="el" href="a00259_source.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00270_source.html#l00035">MacToPhyInterface::AIR_FRAME</a>, <a class="el" href="a00259_source.html#l00366">handleAirFrame()</a>, <a class="el" href="a00259_source.html#l00590">handleSelfMessage()</a>, <a class="el" href="a00259_source.html#l00578">handleUpperControlMessage()</a>, <a class="el" href="a00259_source.html#l00475">handleUpperMessage()</a>, <a class="el" href="a00260_source.html#l00134">upperControlIn</a>, and <a class="el" href="a00260_source.html#l00128">upperLayerIn</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00341"></a>00341                                               {
<a name="l00342"></a>00342 
<a name="l00343"></a>00343   <span class="comment">//self messages</span>
<a name="l00344"></a>00344   <span class="keywordflow">if</span>(msg-&gt;isSelfMessage()) {
<a name="l00345"></a>00345     <a class="code" href="a00026.html#a17088ad93f59e143ff6c7ba866a31982" title="Handles self scheduled messages.">handleSelfMessage</a>(msg);
<a name="l00346"></a>00346 
<a name="l00347"></a>00347   <span class="comment">//MacPkts &lt;- MacToPhyControlInfo</span>
<a name="l00348"></a>00348   } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(msg-&gt;getArrivalGateId() == <a class="code" href="a00026.html#a49fcd06f6c27aab1d14d13eaecc09f1b" title="The id of the in-data gate from the Mac layer.">upperLayerIn</a>) {
<a name="l00349"></a>00349     <a class="code" href="a00026.html#a17b1d469775962d23835dd5f43a639ac" title="Handles messages received from the upper layer through the data gate.">handleUpperMessage</a>(msg);
<a name="l00350"></a>00350 
<a name="l00351"></a>00351   <span class="comment">//controlmessages</span>
<a name="l00352"></a>00352   } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(msg-&gt;getArrivalGateId() == <a class="code" href="a00026.html#ab58c7430371f1ba135e0a641d150c1e3" title="The id of the in-control gate from the Mac layer.">upperControlIn</a>) {
<a name="l00353"></a>00353     <a class="code" href="a00026.html#a4cab267d310b5fd6cefe613fc8dfe71d" title="Handles messages received from the upper layer through the control gate.">handleUpperControlMessage</a>(msg);
<a name="l00354"></a>00354 
<a name="l00355"></a>00355   <span class="comment">//AirFrames</span>
<a name="l00356"></a>00356   } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(msg-&gt;getKind() == <a class="code" href="a00119.html#a36bc50a86bf1cc0f9efd374613d61a52a96eafe94b4f472727793a10013af7671" title="AirFrame kind.">AIR_FRAME</a>){
<a name="l00357"></a>00357     <a class="code" href="a00026.html#a8d6f371fa6ea6ca89cb78764a05f31dd" title="Handles messages received from the channel (probably AirFrames).">handleAirFrame</a>(static_cast&lt;AirFrame*&gt;(msg));
<a name="l00358"></a>00358 
<a name="l00359"></a>00359   <span class="comment">//unknown message</span>
<a name="l00360"></a>00360   } <span class="keywordflow">else</span> {
<a name="l00361"></a>00361     ev &lt;&lt; <span class="stringliteral">&quot;Unknown message received.&quot;</span> &lt;&lt; endl;
<a name="l00362"></a>00362     <span class="keyword">delete</span> msg;
<a name="l00363"></a>00363   }
<a name="l00364"></a>00364 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a08704deaf03b73c8eda67cc60e670853"></a><!-- doxytag: member="BasePhyLayer::initialize" ref="a08704deaf03b73c8eda67cc60e670853" args="(int stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::initialize </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stage</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>OMNeT++ initialization function. </p>
<p>Read simple parameters. Read and parse xml file for decider and analogue models configuration. </p>

<p>Reimplemented from <a class="el" href="a00041.html#af4c4d6652f6e3d4846cb3d2e826f4bed">ChannelAccess</a>.</p>

<p>Reimplemented in <a class="el" href="a00150.html#a815f95ad9fe89412ff3c5991ec1cfafe">PhyLayerBattery</a>, <a class="el" href="a00151.html#a0bb0cfac6ebb5459b7480bf9df337a3f">PhyLayerUWBIR</a>, and <a class="el" href="a00166.html#a51d4997ab7973ee4b174ae49fb9b658f">SamplePhyLayer</a>.</p>

<p>Definition at line <a class="el" href="a00259_source.html#l00064">64</a> of file <a class="el" href="a00259_source.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00222_source.html#l00075">ChannelAccess::cc</a>, <a class="el" href="a00284_source.html#l00152">FWMath::dBm2mW()</a>, <a class="el" href="a00260_source.html#l00159">headerLength</a>, <a class="el" href="a00259_source.html#l00257">initializeAnalogueModels()</a>, <a class="el" href="a00259_source.html#l00206">initializeDecider()</a>, <a class="el" href="a00259_source.html#l00124">initializeRadio()</a>, <a class="el" href="a00260_source.html#l00095">maxTXPower</a>, <a class="el" href="a00260_source.html#l00110">radio</a>, <a class="el" href="a00270_source.html#l00031">MacToPhyInterface::RADIO_SWITCHING_OVER</a>, <a class="el" href="a00260_source.html#l00140">radioSwitchingOverTimer</a>, <a class="el" href="a00260_source.html#l00101">recordStats</a>, <a class="el" href="a00260_source.html#l00098">sensitivity</a>, <a class="el" href="a00260_source.html#l00092">thermalNoise</a>, <a class="el" href="a00273_source.html#l00193">DimensionSet::timeDomain</a>, <a class="el" href="a00270_source.html#l00029">MacToPhyInterface::TX_OVER</a>, <a class="el" href="a00260_source.html#l00146">txOverTimer</a>, <a class="el" href="a00260_source.html#l00134">upperControlIn</a>, <a class="el" href="a00260_source.html#l00132">upperControlOut</a>, <a class="el" href="a00260_source.html#l00128">upperLayerIn</a>, <a class="el" href="a00260_source.html#l00130">upperLayerOut</a>, and <a class="el" href="a00260_source.html#l00162">world</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00064"></a>00064                                        {
<a name="l00065"></a>00065 
<a name="l00066"></a>00066   <a class="code" href="a00026.html#a08704deaf03b73c8eda67cc60e670853" title="OMNeT++ initialization function.">ChannelAccess::initialize</a>(stage);
<a name="l00067"></a>00067 
<a name="l00068"></a>00068   <span class="keywordflow">if</span> (stage == 0) {
<a name="l00069"></a>00069     <span class="comment">// if using sendDirect, make sure that messages arrive without delay</span>
<a name="l00070"></a>00070     gate(<span class="stringliteral">&quot;radioIn&quot;</span>)-&gt;setDeliverOnReceptionStart(<span class="keyword">true</span>);
<a name="l00071"></a>00071 
<a name="l00072"></a>00072     <span class="comment">//get gate ids</span>
<a name="l00073"></a>00073     <a class="code" href="a00026.html#a49fcd06f6c27aab1d14d13eaecc09f1b" title="The id of the in-data gate from the Mac layer.">upperLayerIn</a>    = findGate(<span class="stringliteral">&quot;upperLayerIn&quot;</span>);
<a name="l00074"></a>00074     <a class="code" href="a00026.html#a334fbbb0a1608058c46906ef2c90045f" title="The id of the out-data gate to the Mac layer.">upperLayerOut</a>   = findGate(<span class="stringliteral">&quot;upperLayerOut&quot;</span>);
<a name="l00075"></a>00075     <a class="code" href="a00026.html#aca9b66970dd836cc696dd0907c58598b" title="The id of the out-control gate to the Mac layer.">upperControlOut</a> = findGate(<span class="stringliteral">&quot;upperControlOut&quot;</span>);
<a name="l00076"></a>00076     <a class="code" href="a00026.html#ab58c7430371f1ba135e0a641d150c1e3" title="The id of the in-control gate from the Mac layer.">upperControlIn</a>  = findGate(<span class="stringliteral">&quot;upperControlIn&quot;</span>);
<a name="l00077"></a>00077 
<a name="l00078"></a>00078     <span class="comment">//read simple ned-parameters</span>
<a name="l00079"></a>00079     <span class="comment">//  - initialize basic parameters</span>
<a name="l00080"></a>00080     <span class="keywordflow">if</span>(par(<span class="stringliteral">&quot;useThermalNoise&quot;</span>).boolValue()) {
<a name="l00081"></a>00081       <span class="keywordtype">double</span> thermalNoiseVal = <a class="code" href="a00092.html#af308407856d9835b103f2421e373ee28">FWMath::dBm2mW</a>(par(<span class="stringliteral">&quot;thermalNoise&quot;</span>).doubleValue());
<a name="l00082"></a>00082       <a class="code" href="a00026.html#afedc2cd6f80601fb040b56256e6cc756" title="Defines the strength of the thermal noise.">thermalNoise</a> = <span class="keyword">new</span> <a class="code" href="a00052.html" title="Represents a constant mathematical mapping (f(x) = c).">ConstantSimpleConstMapping</a>(<a class="code" href="a00083.html#abf3b99a319deca6efc123ec52d77d867" title="Shortcut to a DimensionSet which only contains time.">DimensionSet::timeDomain</a>,
<a name="l00083"></a>00083                               thermalNoiseVal);
<a name="l00084"></a>00084     } <span class="keywordflow">else</span> {
<a name="l00085"></a>00085       <a class="code" href="a00026.html#afedc2cd6f80601fb040b56256e6cc756" title="Defines the strength of the thermal noise.">thermalNoise</a> = 0;
<a name="l00086"></a>00086     }
<a name="l00087"></a>00087     <a class="code" href="a00026.html#a48f5fc0fe990ee5dbe31911437a586f9" title="Stores the length of the phy header in bits.">headerLength</a> = par(<span class="stringliteral">&quot;headerLength&quot;</span>).longValue();
<a name="l00088"></a>00088     <a class="code" href="a00026.html#a7eaa041636b623066b5abd87a38afa25" title="The sensitivity describes the minimum strength a signal must have to be received...">sensitivity</a> = par(<span class="stringliteral">&quot;sensitivity&quot;</span>).doubleValue();
<a name="l00089"></a>00089     <a class="code" href="a00026.html#a7eaa041636b623066b5abd87a38afa25" title="The sensitivity describes the minimum strength a signal must have to be received...">sensitivity</a> = <a class="code" href="a00092.html#af308407856d9835b103f2421e373ee28">FWMath::dBm2mW</a>(<a class="code" href="a00026.html#a7eaa041636b623066b5abd87a38afa25" title="The sensitivity describes the minimum strength a signal must have to be received...">sensitivity</a>);
<a name="l00090"></a>00090     <a class="code" href="a00026.html#a80fe7028b2fbf92f61dd30b79e30a86d" title="The maximum transmission power a message can be send with.">maxTXPower</a> = par(<span class="stringliteral">&quot;maxTXPower&quot;</span>).doubleValue();
<a name="l00091"></a>00091 
<a name="l00092"></a>00092     <a class="code" href="a00026.html#a71f6c8e91a8f597a5d213b30c64b0cf8" title="Stores if tracking of statistics (esp. cOutvectors) is enabled.">recordStats</a> = par(<span class="stringliteral">&quot;recordStats&quot;</span>).boolValue();
<a name="l00093"></a>00093 
<a name="l00094"></a>00094     <span class="comment">//  - initialize radio</span>
<a name="l00095"></a>00095     <a class="code" href="a00026.html#a6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a> = <a class="code" href="a00026.html#ae1ca5e4f7cf6d91456a20a0068d3c417" title="Initializes and returns the radio class to use.">initializeRadio</a>();
<a name="l00096"></a>00096 
<a name="l00097"></a>00097     <span class="comment">// get pointer to the world module</span>
<a name="l00098"></a>00098     <a class="code" href="a00026.html#ad1de573273df163a5fc2b8b537c65e23" title="Pointer to the World Utility, to obtain some global information.">world</a> = <a class="code" href="a00090.html" title="Provides method templates to find omnet modules.">FindModule&lt;BaseWorldUtility*&gt;::findGlobalModule</a>();
<a name="l00099"></a>00099         <span class="keywordflow">if</span> (<a class="code" href="a00026.html#ad1de573273df163a5fc2b8b537c65e23" title="Pointer to the World Utility, to obtain some global information.">world</a> == NULL) {
<a name="l00100"></a>00100             opp_error(<span class="stringliteral">&quot;Could not find BaseWorldUtility module&quot;</span>);
<a name="l00101"></a>00101         }
<a name="l00102"></a>00102 
<a name="l00103"></a>00103         <span class="keywordflow">if</span>(<a class="code" href="a00041.html#aeaf55c84ea130e728c946d9cf98d206a" title="Pointer to the PropagationModel module.">cc</a>-&gt;hasPar(<span class="stringliteral">&quot;sat&quot;</span>)
<a name="l00104"></a>00104        &amp;&amp; (<a class="code" href="a00026.html#a7eaa041636b623066b5abd87a38afa25" title="The sensitivity describes the minimum strength a signal must have to be received...">sensitivity</a> - <a class="code" href="a00092.html#af308407856d9835b103f2421e373ee28">FWMath::dBm2mW</a>(<a class="code" href="a00041.html#aeaf55c84ea130e728c946d9cf98d206a" title="Pointer to the PropagationModel module.">cc</a>-&gt;par(<span class="stringliteral">&quot;sat&quot;</span>).doubleValue())) &lt; -0.000001) {
<a name="l00105"></a>00105             opp_error(<span class="stringliteral">&quot;Sensitivity can&apos;t be smaller than the &quot;</span>
<a name="l00106"></a>00106             <span class="stringliteral">&quot;signal attenuation threshold (sat) in ConnectionManager. &quot;</span>
<a name="l00107"></a>00107             <span class="stringliteral">&quot;Please adjust your omnetpp.ini file accordingly.&quot;</span>);
<a name="l00108"></a>00108     }
<a name="l00109"></a>00109 
<a name="l00110"></a>00110 <span class="comment">//  } else if (stage == 1){</span>
<a name="l00111"></a>00111     <span class="comment">//read complex(xml) ned-parameters</span>
<a name="l00112"></a>00112     <span class="comment">//  - analogue model parameters</span>
<a name="l00113"></a>00113     <a class="code" href="a00026.html#a8ea7353793eed2f1a7b0cd1caacd72e9" title="Initializes the AnalogueModels with the data from the passed XML-config data.">initializeAnalogueModels</a>(par(<span class="stringliteral">&quot;analogueModels&quot;</span>).xmlValue());
<a name="l00114"></a>00114     <span class="comment">//  - decider parameters</span>
<a name="l00115"></a>00115     <a class="code" href="a00026.html#a9da4f8ffaa373a0de7895cbea524816b" title="Initializes the Decider with the data from the passed XML-config data.">initializeDecider</a>(par(<span class="stringliteral">&quot;decider&quot;</span>).xmlValue());
<a name="l00116"></a>00116 
<a name="l00117"></a>00117     <span class="comment">//initialise timer messages</span>
<a name="l00118"></a>00118     <a class="code" href="a00026.html#ac28de586b21162c377a180233299a1d5" title="Self message scheduled to the point in time when the switching process of the radio...">radioSwitchingOverTimer</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;radio switching over&quot;</span>, <a class="code" href="a00119.html#a36bc50a86bf1cc0f9efd374613d61a52a876c7366bd2bcb675b41e60007831d06" title="Indicates the end of a radio switch.">RADIO_SWITCHING_OVER</a>);
<a name="l00119"></a>00119     <a class="code" href="a00026.html#a2ce22bc20ab469e99352958face5468d" title="Self message scheduled to the point in time when the transmission of an AirFrame...">txOverTimer</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;transmission over&quot;</span>, <a class="code" href="a00119.html#a36bc50a86bf1cc0f9efd374613d61a52ab00e54021af4a33a84ac61a7543c7528" title="Indicates the end of a send transmission.">TX_OVER</a>);
<a name="l00120"></a>00120 
<a name="l00121"></a>00121   }
<a name="l00122"></a>00122 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae1ca5e4f7cf6d91456a20a0068d3c417"></a><!-- doxytag: member="BasePhyLayer::initializeRadio" ref="ae1ca5e4f7cf6d91456a20a0068d3c417" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00158.html">Radio</a> * BasePhyLayer::initializeRadio </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes and returns the radio class to use. </p>
<p>Can be overridden by sub-classing phy layers to use their own <a class="el" href="a00158.html" title="The class that represents the Radio as a state machine.">Radio</a> implementations. </p>

<p>Reimplemented in <a class="el" href="a00151.html#a2a883bae9b74ed3c27bfd64246edb48f">PhyLayerUWBIR</a>.</p>

<p>Definition at line <a class="el" href="a00259_source.html#l00124">124</a> of file <a class="el" href="a00259_source.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00278_source.html#l00282">Radio::createNewRadio()</a>, <a class="el" href="a00260_source.html#l00110">radio</a>, <a class="el" href="a00259_source.html#l00045">readPar()</a>, <a class="el" href="a00260_source.html#l00101">recordStats</a>, <a class="el" href="a00278_source.html#l00206">Radio::RX</a>, <a class="el" href="a00277_source.html#l00172">Radio::setSwitchTime()</a>, <a class="el" href="a00278_source.html#l00210">Radio::SLEEP</a>, and <a class="el" href="a00278_source.html#l00208">Radio::TX</a>.</p>

<p>Referenced by <a class="el" href="a00259_source.html#l00064">initialize()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00124"></a>00124                                            {
<a name="l00125"></a>00125   <span class="keywordtype">int</span> initialRadioState = par(<span class="stringliteral">&quot;initialRadioState&quot;</span>).longValue();
<a name="l00126"></a>00126   <span class="keywordtype">double</span> radioMinAtt = par(<span class="stringliteral">&quot;radioMinAtt&quot;</span>).doubleValue();
<a name="l00127"></a>00127   <span class="keywordtype">double</span> radioMaxAtt = par(<span class="stringliteral">&quot;radioMaxAtt&quot;</span>).doubleValue();
<a name="l00128"></a>00128   <span class="keywordtype">int</span> nbRadioChannels = <a class="code" href="a00026.html#a356934b3e1dd4c9d40132a260b98e904" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">&quot;nbRadioChannels&quot;</span>, 1);
<a name="l00129"></a>00129   <span class="keywordtype">int</span> initialRadioChannel = <a class="code" href="a00026.html#a356934b3e1dd4c9d40132a260b98e904" title="Reads and returns the parameter with the passed name.">readPar</a>(<span class="stringliteral">&quot;initialRadioChannel&quot;</span>, 0);
<a name="l00130"></a>00130 
<a name="l00131"></a>00131   <a class="code" href="a00158.html" title="The class that represents the Radio as a state machine.">Radio</a>* <a class="code" href="a00026.html#a6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a> = <a class="code" href="a00158.html#a9e07516ee3943514f6cb7598158c5d5a" title="Creates a new instance of this class.">Radio::createNewRadio</a>(<a class="code" href="a00026.html#a71f6c8e91a8f597a5d213b30c64b0cf8" title="Stores if tracking of statistics (esp. cOutvectors) is enabled.">recordStats</a>, initialRadioState,
<a name="l00132"></a>00132                      radioMinAtt, radioMaxAtt,
<a name="l00133"></a>00133                      initialRadioChannel, nbRadioChannels);
<a name="l00134"></a>00134 
<a name="l00135"></a>00135   <span class="comment">//  - switch times to TX</span>
<a name="l00136"></a>00136   <span class="comment">//if no RX to TX defined asume same time as sleep to TX</span>
<a name="l00137"></a>00137   radio-&gt;<a class="code" href="a00158.html#aed80922c736427067f27669c87aaf4f8" title="function called by PhyLayer in order to make an entry in the switch times matrix...">setSwitchTime</a>(<a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaa0a9f9ba2fd83cf0f5f4eaf4f32d6a9c1" title="receiving state">Radio::RX</a>, <a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaa55eab2480eb0876c6b76dc0df92882f7" title="transmitting state">Radio::TX</a>, (hasPar(<span class="stringliteral">&quot;timeRXToTX&quot;</span>) ? par(<span class="stringliteral">&quot;timeRXToTX&quot;</span>) : par(<span class="stringliteral">&quot;timeSleepToTX&quot;</span>)).doubleValue());
<a name="l00138"></a>00138   <span class="comment">//if no sleep to TX defined asume same time as RX to TX</span>
<a name="l00139"></a>00139   radio-&gt;<a class="code" href="a00158.html#aed80922c736427067f27669c87aaf4f8" title="function called by PhyLayer in order to make an entry in the switch times matrix...">setSwitchTime</a>(<a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaac023b5b1d5d9ddbbff72007fb46449a7" title="sleeping">Radio::SLEEP</a>, <a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaa55eab2480eb0876c6b76dc0df92882f7" title="transmitting state">Radio::TX</a>, (hasPar(<span class="stringliteral">&quot;timeSleepToTX&quot;</span>) ? par(<span class="stringliteral">&quot;timeSleepToTX&quot;</span>) : par(<span class="stringliteral">&quot;timeRXToTX&quot;</span>)).doubleValue());
<a name="l00140"></a>00140 
<a name="l00141"></a>00141   <span class="comment">//  - switch times to RX</span>
<a name="l00142"></a>00142   <span class="comment">//if no TX to RX defined asume same time as sleep to RX</span>
<a name="l00143"></a>00143   radio-&gt;<a class="code" href="a00158.html#aed80922c736427067f27669c87aaf4f8" title="function called by PhyLayer in order to make an entry in the switch times matrix...">setSwitchTime</a>(<a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaa55eab2480eb0876c6b76dc0df92882f7" title="transmitting state">Radio::TX</a>, <a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaa0a9f9ba2fd83cf0f5f4eaf4f32d6a9c1" title="receiving state">Radio::RX</a>, (hasPar(<span class="stringliteral">&quot;timeTXToRX&quot;</span>) ? par(<span class="stringliteral">&quot;timeTXToRX&quot;</span>) : par(<span class="stringliteral">&quot;timeSleepToRX&quot;</span>)).doubleValue());
<a name="l00144"></a>00144   <span class="comment">//if no sleep to RX defined asume same time as TX to RX</span>
<a name="l00145"></a>00145   radio-&gt;<a class="code" href="a00158.html#aed80922c736427067f27669c87aaf4f8" title="function called by PhyLayer in order to make an entry in the switch times matrix...">setSwitchTime</a>(<a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaac023b5b1d5d9ddbbff72007fb46449a7" title="sleeping">Radio::SLEEP</a>, <a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaa0a9f9ba2fd83cf0f5f4eaf4f32d6a9c1" title="receiving state">Radio::RX</a>, (hasPar(<span class="stringliteral">&quot;timeSleepToRX&quot;</span>) ? par(<span class="stringliteral">&quot;timeSleepToRX&quot;</span>) : par(<span class="stringliteral">&quot;timeTXToRX&quot;</span>)).doubleValue());
<a name="l00146"></a>00146 
<a name="l00147"></a>00147   <span class="comment">//  - switch times to sleep</span>
<a name="l00148"></a>00148   <span class="comment">//if no TX to sleep defined asume same time as RX to sleep</span>
<a name="l00149"></a>00149   radio-&gt;<a class="code" href="a00158.html#aed80922c736427067f27669c87aaf4f8" title="function called by PhyLayer in order to make an entry in the switch times matrix...">setSwitchTime</a>(<a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaa55eab2480eb0876c6b76dc0df92882f7" title="transmitting state">Radio::TX</a>, <a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaac023b5b1d5d9ddbbff72007fb46449a7" title="sleeping">Radio::SLEEP</a>, (hasPar(<span class="stringliteral">&quot;timeTXToSleep&quot;</span>) ? par(<span class="stringliteral">&quot;timeTXToSleep&quot;</span>) : par(<span class="stringliteral">&quot;timeRXToSleep&quot;</span>)).doubleValue());
<a name="l00150"></a>00150   <span class="comment">//if no RX to sleep defined asume same time as TX to sleep</span>
<a name="l00151"></a>00151   radio-&gt;<a class="code" href="a00158.html#aed80922c736427067f27669c87aaf4f8" title="function called by PhyLayer in order to make an entry in the switch times matrix...">setSwitchTime</a>(<a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaa0a9f9ba2fd83cf0f5f4eaf4f32d6a9c1" title="receiving state">Radio::RX</a>, <a class="code" href="a00158.html#a7314de88eaecfa054e682ccc84ef0ffaac023b5b1d5d9ddbbff72007fb46449a7" title="sleeping">Radio::SLEEP</a>, (hasPar(<span class="stringliteral">&quot;timeRXToSleep&quot;</span>) ? par(<span class="stringliteral">&quot;timeRXToSleep&quot;</span>) : par(<span class="stringliteral">&quot;timeTXToSleep&quot;</span>)).doubleValue());
<a name="l00152"></a>00152 
<a name="l00153"></a>00153   <span class="keywordflow">return</span> radio;
<a name="l00154"></a>00154 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a618479a7b36d43594ab3e8a7d80007bb"></a><!-- doxytag: member="BasePhyLayer::isKnownProtocolId" ref="a618479a7b36d43594ab3e8a7d80007bb" args="(int id) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool BasePhyLayer::isKnownProtocolId </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>id</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true if the protocol with the passed identifier is decodeable by the decider. </p>
<p>If the protocol with the passed id is not understood by this phy layers decider the according AirFrame is not passed to the it but only is added to channel info to be available as interference to the decider.</p>
<p>Default implementation checks only if the passed id is the same as the one returned by "myProtocolId()".</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>id</em>&nbsp;</td><td>The identifier of the protocol of an AirFrame. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns true if the passed protocol id is supported by this phy- layer. </dd></dl>

<p>Definition at line <a class="el" href="a00260_source.html#l00390">390</a> of file <a class="el" href="a00260_source.html">BasePhyLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00259_source.html#l00389">handleAirFrameStartReceive()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00390"></a>00390 { <span class="keywordflow">return</span> <span class="keywordtype">id</span> == <a class="code" href="a00026.html#adecf85d8636ac48e1ce8cea176a3c71c" title="Returns the identifier of the protocol this phy uses to send messages.">myProtocolId</a>(); }
</pre></div></p>

</div>
</div>
<a class="anchor" id="adecf85d8636ac48e1ce8cea176a3c71c"></a><!-- doxytag: member="BasePhyLayer::myProtocolId" ref="adecf85d8636ac48e1ce8cea176a3c71c" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int BasePhyLayer::myProtocolId </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the identifier of the protocol this phy uses to send messages. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>An integer representing the identifier of the used protocol. </dd></dl>

<p>Definition at line <a class="el" href="a00260_source.html#l00373">373</a> of file <a class="el" href="a00260_source.html">BasePhyLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00411_source.html#l00363">PhyLayerUWBIR::encapsMsg()</a>, and <a class="el" href="a00259_source.html#l00506">encapsMsg()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00373"></a>00373 { <span class="keywordflow">return</span> protocolId; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a356934b3e1dd4c9d40132a260b98e904"></a><!-- doxytag: member="BasePhyLayer::readPar" ref="a356934b3e1dd4c9d40132a260b98e904" args="(const char *parName, const T defaultValue) const " -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">T BasePhyLayer::readPar </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>parName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const T&nbsp;</td>
          <td class="paramname"> <em>defaultValue</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reads and returns the parameter with the passed name. </p>
<p>If the parameter couldn't be found the value of defaultValue is returned.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>parName</em>&nbsp;</td><td>- the name of the ned-parameter </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>defaultValue</em>&nbsp;</td><td>- the value to be returned if the parameter couldn't be found </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00259_source.html#l00045">45</a> of file <a class="el" href="a00259_source.html">BasePhyLayer.cc</a>.</p>

<p>Referenced by <a class="el" href="a00411_source.html#l00049">PhyLayerUWBIR::initializeRadio()</a>, and <a class="el" href="a00259_source.html#l00124">initializeRadio()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00045"></a>00045                                                                                          {
<a name="l00046"></a>00046   <span class="keywordflow">if</span>(hasPar(parName))
<a name="l00047"></a>00047     <span class="keywordflow">return</span> par(parName);
<a name="l00048"></a>00048   <span class="keywordflow">return</span> defaultValue;
<a name="l00049"></a>00049 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4be8fe4abf2c9705625f93114aa6d337"></a><!-- doxytag: member="BasePhyLayer::recordScalar" ref="a4be8fe4abf2c9705625f93114aa6d337" args="(const char *name, double value, const char *unit=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::recordScalar </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>unit</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Records a double into the scalar result file. </p>
<p>Implements the method from <a class="el" href="a00076.html" title="This class is the interface for a Decider to the BasePhyLayer.">DeciderToPhyInterface</a>, method-calls are forwarded to OMNeT-method 'recordScalar'. </p>

<p>Implements <a class="el" href="a00076.html#a9183eb9c635a185f18da631f2d2d9f1c">DeciderToPhyInterface</a>.</p>

<p>Definition at line <a class="el" href="a00259_source.html#l00862">862</a> of file <a class="el" href="a00259_source.html">BasePhyLayer.cc</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00862"></a>00862                                                                                 {
<a name="l00863"></a>00863   <a class="code" href="a00026.html#a4be8fe4abf2c9705625f93114aa6d337" title="Records a double into the scalar result file.">ChannelAccess::recordScalar</a>(name, value, unit);
<a name="l00864"></a>00864 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac012473c1be0df5df5f901ad1a3e890e"></a><!-- doxytag: member="BasePhyLayer::rescheduleMessage" ref="ac012473c1be0df5df5f901ad1a3e890e" args="(cMessage *msg, simtime_t_cref t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::rescheduleMessage </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t_cref&nbsp;</td>
          <td class="paramname"> <em>t</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tells the <a class="el" href="a00149.html" title="Provides initialisation for several AnalogueModels and Deciders from modules directory...">PhyLayer</a> to reschedule a message (AirFrame or ControlMessage). </p>
<p>Used by the <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> if it has to handle an AirFrame or an control message earlier than it has returned to the <a class="el" href="a00149.html" title="Provides initialisation for several AnalogueModels and Deciders from modules directory...">PhyLayer</a> the last time the <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> handled that message. </p>

<p>Implements <a class="el" href="a00076.html#a223fb24be9268abba32e90181fa248b9">DeciderToPhyInterface</a>.</p>

<p>Definition at line <a class="el" href="a00259_source.html#l00849">849</a> of file <a class="el" href="a00259_source.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00259_source.html#l00840">cancelScheduledMessage()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00849"></a>00849                                                                     {
<a name="l00850"></a>00850   <a class="code" href="a00026.html#aa4c75db0828cf579907b1e9a9c683e99" title="Tells the PhyLayer to cancel a scheduled message (AirFrame or ControlMessage).">cancelScheduledMessage</a>(msg);
<a name="l00851"></a>00851   scheduleAt(t, msg);
<a name="l00852"></a>00852 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a76d0386516d18d1cc64af5ef6fb315cd"></a><!-- doxytag: member="BasePhyLayer::sendControlMsgToMac" ref="a76d0386516d18d1cc64af5ef6fb315cd" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::sendControlMsgToMac </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called by the <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> to send a control message to the MACLayer. </p>
<p>This function can be used to answer a ChannelSenseRequest to the MACLayer </p>

<p>Implements <a class="el" href="a00076.html#a319e413b963f03ff218b0d0024fb66b9">DeciderToPhyInterface</a>.</p>

<p>Definition at line <a class="el" href="a00259_source.html#l00813">813</a> of file <a class="el" href="a00259_source.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00270_source.html#l00033">MacToPhyInterface::CHANNEL_SENSE_REQUEST</a>, <a class="el" href="a00260_source.html#l00107">channelInfo</a>, <a class="el" href="a00262_source.html#l00517">ChannelInfo::isRecording()</a>, <a class="el" href="a00259_source.html#l00622">sendControlMessageUp()</a>, and <a class="el" href="a00262_source.html#l00504">ChannelInfo::stopRecording()</a>.</p>

<p>Referenced by <a class="el" href="a00259_source.html#l00735">finishRadioSwitching()</a>, and <a class="el" href="a00259_source.html#l00590">handleSelfMessage()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00813"></a>00813                                                     {
<a name="l00814"></a>00814   <span class="keywordflow">if</span>(msg-&gt;getKind() == <a class="code" href="a00119.html#a36bc50a86bf1cc0f9efd374613d61a52aa6ff58f5815b155504d37339ee5c7222" title="Channel sense control message between Mac and Phy.">CHANNEL_SENSE_REQUEST</a>) {
<a name="l00815"></a>00815     <span class="keywordflow">if</span>(<a class="code" href="a00026.html#a38d35bc99079eff49deb6c870b1175e7" title="Channel info keeps track of received AirFrames and provides information about currently...">channelInfo</a>.<a class="code" href="a00042.html#a5b1b8d56aa2fa64b5d79c0cf5c3167a9" title="Returns true if ChannelInfo is currently recording.">isRecording</a>()) {
<a name="l00816"></a>00816       <a class="code" href="a00026.html#a38d35bc99079eff49deb6c870b1175e7" title="Channel info keeps track of received AirFrames and provides information about currently...">channelInfo</a>.<a class="code" href="a00042.html#a884277584d1abf73eaca5df0c61e08c9" title="Tells ChannelInfo to stop recording Information from now on.">stopRecording</a>();
<a name="l00817"></a>00817     }
<a name="l00818"></a>00818   }
<a name="l00819"></a>00819   <a class="code" href="a00026.html#aaa439e85a8bc20a39477055aecf04993" title="Sends the passed control message to the upper layer.">sendControlMessageUp</a>(msg);
<a name="l00820"></a>00820 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0e9f0ccf4ed1d8377aa3f00b931a3e71"></a><!-- doxytag: member="BasePhyLayer::sendUp" ref="a0e9f0ccf4ed1d8377aa3f00b931a3e71" args="(AirFrame *packet, DeciderResult *result)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BasePhyLayer::sendUp </td>
          <td>(</td>
          <td class="paramtype">AirFrame *&nbsp;</td>
          <td class="paramname"> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00072.html">DeciderResult</a> *&nbsp;</td>
          <td class="paramname"> <em>result</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called to send an AirFrame with <a class="el" href="a00072.html" title="A class to represent the result of a processed packet (that is not noise) by the...">DeciderResult</a> to the MACLayer. </p>
<p>When a packet is completely received and not noise, the <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> call this function to send the packet together with the corresponding <a class="el" href="a00072.html" title="A class to represent the result of a processed packet (that is not noise) by the...">DeciderResult</a> up to MACLayer </p>

<p>Implements <a class="el" href="a00076.html#a3c0676323e402449d0972890c6a14df3">DeciderToPhyInterface</a>.</p>

<p>Definition at line <a class="el" href="a00259_source.html#l00822">822</a> of file <a class="el" href="a00259_source.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00259_source.html#l00626">sendMacPktUp()</a>, and <a class="el" href="a00259_source.html#l00869">setUpControlInfo()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00822"></a>00822                                                                 {
<a name="l00823"></a>00823 
<a name="l00824"></a>00824   coreEV &lt;&lt; <span class="stringliteral">&quot;Decapsulating MacPacket from Airframe with ID &quot;</span> &lt;&lt; frame-&gt;getId() &lt;&lt; <span class="stringliteral">&quot; and sending it up to MAC.&quot;</span> &lt;&lt; endl;
<a name="l00825"></a>00825 
<a name="l00826"></a>00826   cMessage* packet = frame-&gt;decapsulate();
<a name="l00827"></a>00827 
<a name="l00828"></a>00828   assert(packet);
<a name="l00829"></a>00829 
<a name="l00830"></a>00830   <a class="code" href="a00026.html#af629dfbac6c68d0310ed91a7520c7ab2" title="Attaches a &amp;quot;control info&amp;quot; (PhyToMac) structure (object) to the message...">setUpControlInfo</a>(packet, result);
<a name="l00831"></a>00831 
<a name="l00832"></a>00832   <a class="code" href="a00026.html#af5ac9665c3f3eaee7846ef0ba141b858" title="Sends the passed MacPkt to the upper layer.">sendMacPktUp</a>(packet);
<a name="l00833"></a>00833 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5170b3aadae25dc6b9e61974076be04b"></a><!-- doxytag: member="BasePhyLayer::setRadioState" ref="a5170b3aadae25dc6b9e61974076be04b" args="(int rs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t BasePhyLayer::setRadioState </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rs</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tells the <a class="el" href="a00026.html" title="The BasePhyLayer represents the physical layer of a nic.">BasePhyLayer</a> to switch to the specified radio state. </p>
<p>The switching process can take some time depending on the specified switching times in the ned file.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>-1: Error code if the <a class="el" href="a00158.html" title="The class that represents the Radio as a state machine.">Radio</a> is currently switching else: switching time from the current RadioState to the new RadioState </dd></dl>

<p>Implements <a class="el" href="a00119.html#ad25abbad9aa16bdbf24bf1dd582b1c6f">MacToPhyInterface</a>.</p>

<p>Reimplemented in <a class="el" href="a00150.html#ab297612cef7286db7722d19ea3a8924f">PhyLayerBattery</a>, and <a class="el" href="a00151.html#a20ac8e3956abe65f59c69d6dcd54ec1d">PhyLayerUWBIR</a>.</p>

<p>Definition at line <a class="el" href="a00259_source.html#l00741">741</a> of file <a class="el" href="a00259_source.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00259_source.html#l00735">finishRadioSwitching()</a>, <a class="el" href="a00260_source.html#l00110">radio</a>, <a class="el" href="a00260_source.html#l00140">radioSwitchingOverTimer</a>, <a class="el" href="a00259_source.html#l00635">sendSelfMessage()</a>, <a class="el" href="a00277_source.html#l00140">Radio::switchTo()</a>, and <a class="el" href="a00260_source.html#l00146">txOverTimer</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00741"></a>00741                                             {
<a name="l00742"></a>00742   Enter_Method_Silent();
<a name="l00743"></a>00743   assert(<a class="code" href="a00026.html#a6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>);
<a name="l00744"></a>00744 
<a name="l00745"></a>00745   <span class="keywordflow">if</span>(<a class="code" href="a00026.html#a2ce22bc20ab469e99352958face5468d" title="Self message scheduled to the point in time when the transmission of an AirFrame...">txOverTimer</a> &amp;&amp; <a class="code" href="a00026.html#a2ce22bc20ab469e99352958face5468d" title="Self message scheduled to the point in time when the transmission of an AirFrame...">txOverTimer</a>-&gt;isScheduled()) {
<a name="l00746"></a>00746     opp_warning(<span class="stringliteral">&quot;Switched radio while sending an AirFrame. The effects this would have on the transmission are not simulated by the BasePhyLayer!&quot;</span>);
<a name="l00747"></a>00747   }
<a name="l00748"></a>00748 
<a name="l00749"></a>00749   simtime_t switchTime = <a class="code" href="a00026.html#a6aefa7200582ec18d6ac5f8f8092a166" title="The state machine storing the current radio state (TX, RX, SLEEP).">radio</a>-&gt;<a class="code" href="a00158.html#aab434b342c42f1dbfa1df3640afbb4b0" title="A function called by the Physical Layer to start the switching process to a new RadioState...">switchTo</a>(rs, simTime());
<a name="l00750"></a>00750 
<a name="l00751"></a>00751   <span class="comment">//invalid switch time, we are probably already switching</span>
<a name="l00752"></a>00752   <span class="keywordflow">if</span>(switchTime &lt; 0)
<a name="l00753"></a>00753     <span class="keywordflow">return</span> switchTime;
<a name="l00754"></a>00754 
<a name="l00755"></a>00755   <span class="comment">// if switching is done in exactly zero-time no extra self-message is scheduled</span>
<a name="l00756"></a>00756   <span class="keywordflow">if</span> (switchTime == 0.0)
<a name="l00757"></a>00757   {
<a name="l00758"></a>00758     <span class="comment">// TODO: in case of zero-time-switch, send no control-message to mac!</span>
<a name="l00759"></a>00759     <span class="comment">// maybe call a method finishRadioSwitchingSilent()</span>
<a name="l00760"></a>00760     <a class="code" href="a00026.html#ada6c556e50ead146f822dadf6ea2a472" title="Called the moment the simulated switching process of the Radio is finished.">finishRadioSwitching</a>();
<a name="l00761"></a>00761   } <span class="keywordflow">else</span>
<a name="l00762"></a>00762   {
<a name="l00763"></a>00763     <a class="code" href="a00026.html#aa59aef501cadd36c94d4f82efe9b64be" title="Schedule self message to passed point in time.">sendSelfMessage</a>(<a class="code" href="a00026.html#ac28de586b21162c377a180233299a1d5" title="Self message scheduled to the point in time when the switching process of the radio...">radioSwitchingOverTimer</a>, simTime() + switchTime);
<a name="l00764"></a>00764   }
<a name="l00765"></a>00765 
<a name="l00766"></a>00766   <span class="keywordflow">return</span> switchTime;
<a name="l00767"></a>00767 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af629dfbac6c68d0310ed91a7520c7ab2"></a><!-- doxytag: member="BasePhyLayer::setUpControlInfo" ref="af629dfbac6c68d0310ed91a7520c7ab2" args="(cMessage *const pMsg, DeciderResult *const pDeciderResult)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cObject * BasePhyLayer::setUpControlInfo </td>
          <td>(</td>
          <td class="paramtype">cMessage *const &nbsp;</td>
          <td class="paramname"> <em>pMsg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00072.html">DeciderResult</a> *const &nbsp;</td>
          <td class="paramname"> <em>pDeciderResult</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Attaches a "control info" (PhyToMac) structure (object) to the message pMsg. </p>
<p>This is most useful when passing packets between protocol layers of a protocol stack, the control info will contain the decider result.</p>
<p>The "control info" object will be deleted when the message is deleted. Only one "control info" structure can be attached (the second setL3ToL2ControlInfo() call throws an error).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pMsg</em>&nbsp;</td><td>The message where the "control info" shall be attached. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pSrcAddr</em>&nbsp;</td><td>The MAC address of the message receiver. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00259_source.html#l00869">869</a> of file <a class="el" href="a00259_source.html">BasePhyLayer.cc</a>.</p>

<p>References <a class="el" href="a00276_source.html#l00067">PhyToMacControlInfo::setControlInfo()</a>.</p>

<p>Referenced by <a class="el" href="a00259_source.html#l00822">sendUp()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00870"></a>00870 {
<a name="l00871"></a>00871   <span class="keywordflow">return</span> <a class="code" href="a00153.html#a7d5a61c8f8a55edd3ea9e7d8195543ef" title="Attaches a &amp;quot;control info&amp;quot; structure (object) to the message pMsg.">PhyToMacControlInfo::setControlInfo</a>(pMsg, pDeciderResult);
<a name="l00872"></a>00872 }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ac68a290868512c992f8a49b6af7b6c7c"></a><!-- doxytag: member="BasePhyLayer::airFramePriority" ref="ac68a290868512c992f8a49b6af7b6c7c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">short <a class="el" href="a00026.html#ac68a290868512c992f8a49b6af7b6c7c">BasePhyLayer::airFramePriority</a> = 10<code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Defines the scheduling priority of AirFrames. </p>
<p>AirFrames use a slightly higher priority than normal to ensure channel consistency. This means that before anything else happens at a time point t every AirFrame which ended at t has been removed and every AirFrame started at t has been added to the channel.</p>
<p>An example where this matters is a ChannelSenseRequest which ends at the same time as an AirFrame starts (or ends). Depending on which message is handled first the result of ChannelSenseRequest would differ. </p>

<p>Definition at line <a class="el" href="a00260_source.html#l00089">89</a> of file <a class="el" href="a00260_source.html">BasePhyLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00411_source.html#l00363">PhyLayerUWBIR::encapsMsg()</a>, and <a class="el" href="a00259_source.html#l00506">encapsMsg()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/base/phyLayer/<a class="el" href="a00260_source.html">BasePhyLayer.h</a></li>
<li>src/base/phyLayer/<a class="el" href="a00259_source.html">BasePhyLayer.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed Dec 14 16:01:48 2011 for MiXiM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
