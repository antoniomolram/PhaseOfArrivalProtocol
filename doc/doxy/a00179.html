<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MiXiM: SNRThresholdDecider Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>SNRThresholdDecider Class Reference<br/>
<small>
[<a class="el" href="a00447.html">decider - decider modules</a>]</small>
</h1><!-- doxytag: class="SNRThresholdDecider" --><!-- doxytag: inherits="BaseDecider" -->
<p><a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> implementation which decides a signals correctness by checking its SNR against a threshold.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="a00415_source.html">SNRThresholdDecider.h</a>&gt;</code></p>

<p>Inherits <a class="el" href="a00016.html">BaseDecider</a>.</p>
<div class="dynheader">
Collaboration diagram for SNRThresholdDecider:</div>
<div class="dynsection">
<div class="center"><img src="a00783.png" border="0" usemap="#SNRThresholdDecider_coll__map" alt="Collaboration graph"/></div>
<map name="SNRThresholdDecider_coll__map" id="SNRThresholdDecider_coll__map">
<area shape="rect" href="a00016.html" title="Provides some base functionality for most common deciders." alt="" coords="33,5,129,32"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="a00784.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00179.html#a5de72610fa410544fd6ff678b6f72f56">SNRThresholdDecider</a> (<a class="el" href="a00076.html">DeciderToPhyInterface</a> *<a class="el" href="a00067.html#ac0f72556cb799d883b4219cab58320bb">phy</a>, double <a class="el" href="a00179.html#abdb6b19743460a19e900c4b6d38c483b">snrThreshold</a>, double <a class="el" href="a00016.html#a5eece8bf532f92912ccbd0a3bc4d6fb0">sensitivity</a>, double <a class="el" href="a00179.html#a8f32acd24c8c84efee941211d1f81c98">busyThreshold</a>, int <a class="el" href="a00016.html#a33e7f02028e78116193d09d6cdbc987e">myIndex</a>=-1, bool <a class="el" href="a00016.html#aa22cd5156240713e37578172ba5557ce">debug</a>=false)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes a new <a class="el" href="a00179.html" title="Decider implementation which decides a signals correctness by checking its SNR against...">SNRThresholdDecider</a>.  <a href="#a5de72610fa410544fd6ff678b6f72f56"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="a00043.html">ChannelState</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00179.html#aa777b8c29fabf14d30d03972fed515d0">getChannelState</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A function that returns information about the channel state.  <a href="#aa777b8c29fabf14d30d03972fed515d0"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00179.html#abb6ae13f91f830a9e6cd975426b9d6df">checkIfAboveThreshold</a> (<a class="el" href="a00121.html">Mapping</a> *map, simtime_t_cref start, simtime_t_cref end) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Checks a mapping against a specific threshold (element-wise).  <a href="#abb6ae13f91f830a9e6cd975426b9d6df"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00179.html#ace13845f43c5328cea40eb00c59af2b3">processNewSignal</a> (AirFrame *frame)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Processes a new <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>. Returns the time it wants to handle the signal again.  <a href="#ace13845f43c5328cea40eb00c59af2b3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00179.html#a6002f2ee8ffa35ded0162c72f93c9fba">processSignalEnd</a> (AirFrame *frame)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Processes a received AirFrame.  <a href="#a6002f2ee8ffa35ded0162c72f93c9fba"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0946c7a3e2ee04e2bb1c2dce4b7be7ec"></a><!-- doxytag: member="SNRThresholdDecider::canAnswerCSR" ref="a0946c7a3e2ee04e2bb1c2dce4b7be7ec" args="(const CSRInfo &amp;requestInfo)" -->
virtual simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00179.html#a0946c7a3e2ee04e2bb1c2dce4b7be7ec">canAnswerCSR</a> (const <a class="el" href="a00182.html">CSRInfo</a> &amp;requestInfo)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns point in time when the ChannelSenseRequest of the passed CSRInfo can be answered (e.g. because channel state changed or timeout is reached). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00179.html#aa7e33361b328274b04ff7bd2d6206e6d">answerCSR</a> (<a class="el" href="a00182.html">CSRInfo</a> &amp;requestInfo)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Answers the ChannelSenseRequest (CSR) from the passed CSRInfo.  <a href="#aa7e33361b328274b04ff7bd2d6206e6d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00179.html#ae900f58c344f86cea2dbf21b55a74d85">isIdleRSSI</a> (double rssi) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns whether the passed rssi value indicates a idle channel.  <a href="#ae900f58c344f86cea2dbf21b55a74d85"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abdb6b19743460a19e900c4b6d38c483b"></a><!-- doxytag: member="SNRThresholdDecider::snrThreshold" ref="abdb6b19743460a19e900c4b6d38c483b" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00179.html#abdb6b19743460a19e900c4b6d38c483b">snrThreshold</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Threshold value for checking a SNR-map (SNR-threshold). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8f32acd24c8c84efee941211d1f81c98"></a><!-- doxytag: member="SNRThresholdDecider::busyThreshold" ref="a8f32acd24c8c84efee941211d1f81c98" args="" -->
double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00179.html#a8f32acd24c8c84efee941211d1f81c98">busyThreshold</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The threshold rssi level above which the channel is considered busy. <br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p><a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> implementation which decides a signals correctness by checking its SNR against a threshold. </p>
<p><a class="el" href="a00179.html" title="Decider implementation which decides a signals correctness by checking its SNR against...">SNRThresholdDecider</a> decides the channel state (idle/busy) at hand of the current received total power level (independent from signal or noise). If its above the threshold defined by the "busyThreshold" parameter it considers the channel busy. The RSSI value returned by this <a class="el" href="a00067.html" title="The basic Decider class.">Decider</a> for a ChannelSenseRequest over time is always the RSSI value at the end of the sense.</p>
<p><a class="el" href="a00179.html" title="Decider implementation which decides a signals correctness by checking its SNR against...">SNRThresholdDecider</a> implements only instantaneous channel sensing therefore it can only handle "UNTIL_IDLE" and "UNTIL_BUSY" ChannelSenseRequests but not "UNTIL_TIMEOUT".</p>
<p>Instantaneous channel sensing means <a class="el" href="a00179.html" title="Decider implementation which decides a signals correctness by checking its SNR against...">SNRThresholdDecider</a> is simplified in the way that the channel does not has to be below the threshold for a certain amount of time to be considered idle (how it would be in reality), but immediately after the RSSI drops below the threshold the channel is considered idle. This means "UNTIL_IDLE" and "UNTIL_BUSY" request are also answered at the first moment the channel drops below or raises above the threshold. <a class="el" href="a00179.html" title="Decider implementation which decides a signals correctness by checking its SNR against...">SNRThresholdDecider</a> does not support "UNTIL_TIMEOUT" requests because they are used to calculate the channel state over a time period (by averaging over it for example) which is not consistent with using instantaneous idle/busy changes. </p>

<p>Definition at line <a class="el" href="a00415_source.html#l00036">36</a> of file <a class="el" href="a00415_source.html">SNRThresholdDecider.h</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a5de72610fa410544fd6ff678b6f72f56"></a><!-- doxytag: member="SNRThresholdDecider::SNRThresholdDecider" ref="a5de72610fa410544fd6ff678b6f72f56" args="(DeciderToPhyInterface *phy, double snrThreshold, double sensitivity, double busyThreshold, int myIndex=&#45;1, bool debug=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SNRThresholdDecider::SNRThresholdDecider </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00076.html">DeciderToPhyInterface</a> *&nbsp;</td>
          <td class="paramname"> <em>phy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>snrThreshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>sensitivity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>busyThreshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>myIndex</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>debug</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes a new <a class="el" href="a00179.html" title="Decider implementation which decides a signals correctness by checking its SNR against...">SNRThresholdDecider</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>phy</em>&nbsp;</td><td>- pointer to the deciders phy layer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>snrThreshold</em>&nbsp;</td><td>- the threshold (as fraction) above which a signal is received correctly </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sensitivity</em>&nbsp;</td><td>- the sensitivity (in mW) of the physical layer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>busyThreshold</em>&nbsp;</td><td>- the rssi threshold (in mW) above which the channel is considered idle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>myIndex</em>&nbsp;</td><td>- the index of the host of this deciders phy (for debugging output) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>debug</em>&nbsp;</td><td>- should debug messages be displayed? </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00415_source.html#l00119">119</a> of file <a class="el" href="a00415_source.html">SNRThresholdDecider.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00124"></a>00124                            :
<a name="l00125"></a>00125     <a class="code" href="a00016.html#acff4618fa7a9c2e9abf257e60e487de2" title="Initializes the decider with the passed values.">BaseDecider</a>(phy, <a class="code" href="a00016.html#a5eece8bf532f92912ccbd0a3bc4d6fb0" title="sensitivity value for receiving an AirFrame">sensitivity</a>, <a class="code" href="a00016.html#a33e7f02028e78116193d09d6cdbc987e" title="index for this Decider-instance given by Phy-Layer (mostly Host-index)">myIndex</a>, <a class="code" href="a00016.html#aa22cd5156240713e37578172ba5557ce" title="toggles display of debugging messages">debug</a>),
<a name="l00126"></a>00126     <a class="code" href="a00179.html#abdb6b19743460a19e900c4b6d38c483b" title="Threshold value for checking a SNR-map (SNR-threshold).">snrThreshold</a>(<a class="code" href="a00179.html#abdb6b19743460a19e900c4b6d38c483b" title="Threshold value for checking a SNR-map (SNR-threshold).">snrThreshold</a>),
<a name="l00127"></a>00127     <a class="code" href="a00179.html#a8f32acd24c8c84efee941211d1f81c98" title="The threshold rssi level above which the channel is considered busy.">busyThreshold</a>(<a class="code" href="a00179.html#a8f32acd24c8c84efee941211d1f81c98" title="The threshold rssi level above which the channel is considered busy.">busyThreshold</a>)
<a name="l00128"></a>00128   {}

</pre></div></p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aa7e33361b328274b04ff7bd2d6206e6d"></a><!-- doxytag: member="SNRThresholdDecider::answerCSR" ref="aa7e33361b328274b04ff7bd2d6206e6d" args="(CSRInfo &amp;requestInfo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SNRThresholdDecider::answerCSR </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00182.html">CSRInfo</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>requestInfo</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Answers the ChannelSenseRequest (CSR) from the passed CSRInfo. </p>
<p>Calculates the rssi value and the channel idle state and sends the CSR together with the result back to the mac layer. </p>

<p>Reimplemented from <a class="el" href="a00016.html#ab8e925001d1f8630338c50f8ec10bb0d">BaseDecider</a>.</p>

<p>Definition at line <a class="el" href="a00414_source.html#l00109">109</a> of file <a class="el" href="a00414_source.html">SNRThresholdDecider.cc</a>.</p>

<p>References <a class="el" href="a00414_source.html#l00101">getChannelState()</a>, <a class="el" href="a00266_source.html#l00072">Decider::phy</a>, and <a class="el" href="a00076.html#a319e413b963f03ff218b0d0024fb66b9">DeciderToPhyInterface::sendControlMsgToMac()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00110"></a>00110 {
<a name="l00111"></a>00111   <span class="comment">// put the sensing-result to the request and</span>
<a name="l00112"></a>00112   <span class="comment">// send it to the Mac-Layer as Control-message (via Interface)</span>
<a name="l00113"></a>00113   requestInfo.first-&gt;setResult( <a class="code" href="a00179.html#aa777b8c29fabf14d30d03972fed515d0" title="A function that returns information about the channel state.">getChannelState</a>() );
<a name="l00114"></a>00114   <a class="code" href="a00067.html#ac0f72556cb799d883b4219cab58320bb" title="A pointer to the physical layer of this Decider.">phy</a>-&gt;<a class="code" href="a00076.html#a319e413b963f03ff218b0d0024fb66b9" title="Called by the Decider to send a control message to the MACLayer.">sendControlMsgToMac</a>(requestInfo.first);
<a name="l00115"></a>00115 
<a name="l00116"></a>00116   requestInfo.first = 0;
<a name="l00117"></a>00117   requestInfo.second = -1;
<a name="l00118"></a>00118   requestInfo.canAnswerAt = -1;
<a name="l00119"></a>00119 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="abb6ae13f91f830a9e6cd975426b9d6df"></a><!-- doxytag: member="SNRThresholdDecider::checkIfAboveThreshold" ref="abb6ae13f91f830a9e6cd975426b9d6df" args="(Mapping *map, simtime_t_cref start, simtime_t_cref end) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SNRThresholdDecider::checkIfAboveThreshold </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00121.html">Mapping</a> *&nbsp;</td>
          <td class="paramname"> <em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t_cref&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t_cref&nbsp;</td>
          <td class="paramname"> <em>end</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks a mapping against a specific threshold (element-wise). </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>true , if every entry of the mapping is above threshold false , otherwise </dd></dl>

<p>Definition at line <a class="el" href="a00414_source.html#l00053">53</a> of file <a class="el" href="a00414_source.html">SNRThresholdDecider.cc</a>.</p>

<p>References <a class="el" href="a00273_source.html#l01314">Mapping::createConstIterator()</a>, <a class="el" href="a00258_source.html#l00130">BaseDecider::debug</a>, <a class="el" href="a00056.html#a1f4cae3b170754a76049b8e81b2e3c07">ConstMappingIterator::getNextPosition()</a>, <a class="el" href="a00056.html#a047e853613d5a19ff34526d0cff8fcf9">ConstMappingIterator::getPosition()</a>, <a class="el" href="a00272_source.html#l00090">Argument::getTime()</a>, <a class="el" href="a00056.html#ad4419c259e747867f003d07d62d4259f">ConstMappingIterator::getValue()</a>, <a class="el" href="a00056.html#ad4bac7233c154b7086c6124d2e21be49">ConstMappingIterator::hasNext()</a>, <a class="el" href="a00056.html#a607d741e2d841265851a85670f247c46">ConstMappingIterator::iterateTo()</a>, <a class="el" href="a00056.html#afdafa6870cd19b3d35674a7bc777585d">ConstMappingIterator::next()</a>, and <a class="el" href="a00415_source.html#l00040">snrThreshold</a>.</p>

<p>Referenced by <a class="el" href="a00414_source.html#l00172">processSignalEnd()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00054"></a>00054 {
<a name="l00055"></a>00055   assert(map);
<a name="l00056"></a>00056 
<a name="l00057"></a>00057   <span class="keywordflow">if</span>(<a class="code" href="a00016.html#aa22cd5156240713e37578172ba5557ce" title="toggles display of debugging messages">debug</a>){
<a name="l00058"></a>00058     deciderEV &lt;&lt; <span class="stringliteral">&quot;Checking if SNR is above Threshold of &quot;</span> &lt;&lt; <a class="code" href="a00179.html#abdb6b19743460a19e900c4b6d38c483b" title="Threshold value for checking a SNR-map (SNR-threshold).">snrThreshold</a> &lt;&lt; endl;
<a name="l00059"></a>00059   }
<a name="l00060"></a>00060 
<a name="l00061"></a>00061   <span class="comment">// check every entry in the mapping against threshold value</span>
<a name="l00062"></a>00062   <a class="code" href="a00056.html" title="Defines an const iterator for a ConstMapping which is able to iterate over the Mapping...">ConstMappingIterator</a>* it = map-&gt;<a class="code" href="a00121.html#acdf62aed4b8a469e63c036e75567c2e3" title="Returns an ConstMappingIterator by use of the respective implementation of the &amp;quot;createIterator(...">createConstIterator</a>(<a class="code" href="a00009.html" title="Defines an argument for a mapping.">Argument</a>(start));
<a name="l00063"></a>00063   <span class="comment">// check if values at start-time fulfill snrThreshold-criterion</span>
<a name="l00064"></a>00064   <span class="keywordflow">if</span>(<a class="code" href="a00016.html#aa22cd5156240713e37578172ba5557ce" title="toggles display of debugging messages">debug</a>){
<a name="l00065"></a>00065     deciderEV &lt;&lt; <span class="stringliteral">&quot;SNR at time &quot;</span> &lt;&lt; start &lt;&lt; <span class="stringliteral">&quot; is &quot;</span> &lt;&lt; it-&gt;<a class="code" href="a00056.html#ad4419c259e747867f003d07d62d4259f" title="Returns the value of the Mapping at the current position.">getValue</a>() &lt;&lt; endl;
<a name="l00066"></a>00066   }
<a name="l00067"></a>00067   <span class="keywordflow">if</span> ( it-&gt;<a class="code" href="a00056.html#ad4419c259e747867f003d07d62d4259f" title="Returns the value of the Mapping at the current position.">getValue</a>() &lt;= <a class="code" href="a00179.html#abdb6b19743460a19e900c4b6d38c483b" title="Threshold value for checking a SNR-map (SNR-threshold).">snrThreshold</a> ){
<a name="l00068"></a>00068     <span class="keyword">delete</span> it;
<a name="l00069"></a>00069     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00070"></a>00070   }
<a name="l00071"></a>00071 
<a name="l00072"></a>00072   <span class="keywordflow">while</span> ( it-&gt;<a class="code" href="a00056.html#ad4bac7233c154b7086c6124d2e21be49" title="Returns true if the iterator has a next value it can iterate to on a call to &amp;quot;next()&amp;quot;...">hasNext</a>() &amp;&amp; it-&gt;<a class="code" href="a00056.html#a1f4cae3b170754a76049b8e81b2e3c07" title="Returns the position the next call to &amp;quot;next()&amp;quot; of this Iterator would iterate...">getNextPosition</a>().<a class="code" href="a00009.html#a2ecb3b041b5b8721d6767531e4ac792a" title="Returns the time value of this argument.">getTime</a>() &lt; end)
<a name="l00073"></a>00073   {
<a name="l00074"></a>00074     it-&gt;<a class="code" href="a00056.html#afdafa6870cd19b3d35674a7bc777585d" title="Iterates to the next position of the Mapping.">next</a>();
<a name="l00075"></a>00075 
<a name="l00076"></a>00076     <span class="keywordflow">if</span>(<a class="code" href="a00016.html#aa22cd5156240713e37578172ba5557ce" title="toggles display of debugging messages">debug</a>){
<a name="l00077"></a>00077       deciderEV &lt;&lt; <span class="stringliteral">&quot;SNR at time &quot;</span> &lt;&lt; it-&gt;<a class="code" href="a00056.html#a047e853613d5a19ff34526d0cff8fcf9" title="Returns the current position of the iterator.">getPosition</a>().<a class="code" href="a00009.html#a2ecb3b041b5b8721d6767531e4ac792a" title="Returns the time value of this argument.">getTime</a>() &lt;&lt; <span class="stringliteral">&quot; is &quot;</span> &lt;&lt; it-&gt;<a class="code" href="a00056.html#ad4419c259e747867f003d07d62d4259f" title="Returns the value of the Mapping at the current position.">getValue</a>() &lt;&lt; endl;
<a name="l00078"></a>00078     }
<a name="l00079"></a>00079 
<a name="l00080"></a>00080     <span class="comment">// perform the check for smaller entry</span>
<a name="l00081"></a>00081     <span class="keywordflow">if</span> ( it-&gt;<a class="code" href="a00056.html#ad4419c259e747867f003d07d62d4259f" title="Returns the value of the Mapping at the current position.">getValue</a>() &lt;= <a class="code" href="a00179.html#abdb6b19743460a19e900c4b6d38c483b" title="Threshold value for checking a SNR-map (SNR-threshold).">snrThreshold</a>) {
<a name="l00082"></a>00082       <span class="keyword">delete</span> it;
<a name="l00083"></a>00083       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00084"></a>00084     }
<a name="l00085"></a>00085   }
<a name="l00086"></a>00086 
<a name="l00087"></a>00087   it-&gt;<a class="code" href="a00056.html#a607d741e2d841265851a85670f247c46" title="Iterates to the specified position. This method should be used if the new position...">iterateTo</a>(<a class="code" href="a00009.html" title="Defines an argument for a mapping.">Argument</a>(end));
<a name="l00088"></a>00088   <span class="keywordflow">if</span>(<a class="code" href="a00016.html#aa22cd5156240713e37578172ba5557ce" title="toggles display of debugging messages">debug</a>){
<a name="l00089"></a>00089     deciderEV &lt;&lt; <span class="stringliteral">&quot;SNR at time &quot;</span> &lt;&lt; end &lt;&lt; <span class="stringliteral">&quot; is &quot;</span> &lt;&lt; it-&gt;<a class="code" href="a00056.html#ad4419c259e747867f003d07d62d4259f" title="Returns the value of the Mapping at the current position.">getValue</a>() &lt;&lt; endl;
<a name="l00090"></a>00090   }
<a name="l00091"></a>00091 
<a name="l00092"></a>00092   <span class="keywordflow">if</span> ( it-&gt;<a class="code" href="a00056.html#ad4419c259e747867f003d07d62d4259f" title="Returns the value of the Mapping at the current position.">getValue</a>() &lt;= <a class="code" href="a00179.html#abdb6b19743460a19e900c4b6d38c483b" title="Threshold value for checking a SNR-map (SNR-threshold).">snrThreshold</a> ){
<a name="l00093"></a>00093     <span class="keyword">delete</span> it;
<a name="l00094"></a>00094     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00095"></a>00095   }
<a name="l00096"></a>00096 
<a name="l00097"></a>00097   <span class="keyword">delete</span> it;
<a name="l00098"></a>00098   <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00099"></a>00099 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa777b8c29fabf14d30d03972fed515d0"></a><!-- doxytag: member="SNRThresholdDecider::getChannelState" ref="aa777b8c29fabf14d30d03972fed515d0" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00043.html">ChannelState</a> SNRThresholdDecider::getChannelState </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A function that returns information about the channel state. </p>
<p>It is an alternative for the MACLayer in order to obtain information immediately (in contrast to sending a ChannelSenseRequest, i.e. sending a cMessage over the OMNeT-control-channel) </p>

<p>Reimplemented from <a class="el" href="a00016.html#a35e3f8f4e683747fbec1618ee1608982">BaseDecider</a>.</p>

<p>Definition at line <a class="el" href="a00414_source.html#l00101">101</a> of file <a class="el" href="a00414_source.html">SNRThresholdDecider.cc</a>.</p>

<p>References <a class="el" href="a00257_source.html#l00198">BaseDecider::calcChannelSenseRSSI()</a>, <a class="el" href="a00076.html#afdcd74839d4a7c6ea34062c8e409220d">DeciderToPhyInterface::getSimTime()</a>, <a class="el" href="a00415_source.html#l00100">isIdleRSSI()</a>, and <a class="el" href="a00266_source.html#l00072">Decider::phy</a>.</p>

<p>Referenced by <a class="el" href="a00414_source.html#l00109">answerCSR()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00101"></a>00101                                                         {
<a name="l00102"></a>00102 
<a name="l00103"></a>00103   simtime_t now = <a class="code" href="a00067.html#ac0f72556cb799d883b4219cab58320bb" title="A pointer to the physical layer of this Decider.">phy</a>-&gt;<a class="code" href="a00076.html#afdcd74839d4a7c6ea34062c8e409220d" title="Returns the current simulation time.">getSimTime</a>();
<a name="l00104"></a>00104   <span class="keywordtype">double</span> rssiValue = <a class="code" href="a00016.html#ae692d8bb6e760aaac0d87895cbad14dc" title="Calculates the RSSI value for the passed interval.">calcChannelSenseRSSI</a>(now, now);
<a name="l00105"></a>00105 
<a name="l00106"></a>00106   <span class="keywordflow">return</span> <a class="code" href="a00043.html" title="Provides information about the current state of the channel:.">ChannelState</a>(<a class="code" href="a00179.html#ae900f58c344f86cea2dbf21b55a74d85" title="Returns whether the passed rssi value indicates a idle channel.">isIdleRSSI</a>(rssiValue), rssiValue);
<a name="l00107"></a>00107 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae900f58c344f86cea2dbf21b55a74d85"></a><!-- doxytag: member="SNRThresholdDecider::isIdleRSSI" ref="ae900f58c344f86cea2dbf21b55a74d85" args="(double rssi) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SNRThresholdDecider::isIdleRSSI </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>rssi</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns whether the passed rssi value indicates a idle channel. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rssi</em>&nbsp;</td><td>the channels rssi value to evaluate </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if the channel should be considered idle </dd></dl>

<p>Definition at line <a class="el" href="a00415_source.html#l00100">100</a> of file <a class="el" href="a00415_source.html">SNRThresholdDecider.h</a>.</p>

<p>Referenced by <a class="el" href="a00414_source.html#l00121">canAnswerCSR()</a>, and <a class="el" href="a00414_source.html#l00101">getChannelState()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00100"></a>00100                                      {
<a name="l00101"></a>00101     <span class="keywordflow">return</span> rssi &lt;= <a class="code" href="a00179.html#a8f32acd24c8c84efee941211d1f81c98" title="The threshold rssi level above which the channel is considered busy.">busyThreshold</a>;
<a name="l00102"></a>00102   }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ace13845f43c5328cea40eb00c59af2b3"></a><!-- doxytag: member="SNRThresholdDecider::processNewSignal" ref="ace13845f43c5328cea40eb00c59af2b3" args="(AirFrame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t SNRThresholdDecider::processNewSignal </td>
          <td>(</td>
          <td class="paramtype">AirFrame *&nbsp;</td>
          <td class="paramname"> <em>frame</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Processes a new <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>. Returns the time it wants to handle the signal again. </p>
<p>Checks if the signals receiving power is above the sensitivity of the radio and we are not already trying to receive another AirFrame. If thats the case it waits for the end of the signal.</p>
<p>Also checks if the new AirFrame changed the power level in the way that we can answer an ongoing channel sense request. </p>

<p>Reimplemented from <a class="el" href="a00016.html#a6a480f87157d0509c0c1fccf94ea9fef">BaseDecider</a>.</p>

<p>Definition at line <a class="el" href="a00414_source.html#l00008">8</a> of file <a class="el" href="a00414_source.html">SNRThresholdDecider.cc</a>.</p>

<p>References <a class="el" href="a00257_source.html#l00146">BaseDecider::channelStateChanged()</a>, <a class="el" href="a00258_source.html#l00078">BaseDecider::currentSignal</a>, <a class="el" href="a00258_source.html#l00068">BaseDecider::EXPECT_END</a>, <a class="el" href="a00280_source.html#l00242">Signal::getReceivingPower()</a>, <a class="el" href="a00279_source.html#l00144">Signal::getReceptionEnd()</a>, <a class="el" href="a00279_source.html#l00140">Signal::getReceptionStart()</a>, <a class="el" href="a00266_source.html#l00075">Decider::notAgain</a>, <a class="el" href="a00274_source.html#l00402">MappingUtils::post()</a>, and <a class="el" href="a00258_source.html#l00072">BaseDecider::sensitivity</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00009"></a>00009 {
<a name="l00010"></a>00010   <span class="comment">//the rssi level changes therefore we need to check if we can</span>
<a name="l00011"></a>00011   <span class="comment">//answer an ongoing ChannelSenseRequest now</span>
<a name="l00012"></a>00012   <a class="code" href="a00016.html#add7242168c4bb521c6335f3de590e4b0" title="Checks if the changed channel state enables us to answer any ongoing ChannelSenseRequests...">channelStateChanged</a>();
<a name="l00013"></a>00013 
<a name="l00014"></a>00014   <span class="keywordflow">if</span>(<a class="code" href="a00016.html#a22e578e992fab5ab54fe5fcdf196d9e3" title="pointer to the currently received AirFrame">currentSignal</a>.first != 0) {
<a name="l00015"></a>00015     deciderEV &lt;&lt; <span class="stringliteral">&quot;Already receiving another AirFrame!&quot;</span> &lt;&lt; endl;
<a name="l00016"></a>00016     <span class="keywordflow">return</span> <a class="code" href="a00067.html#a3edae7484aed7b0b874521c724bd3c30" title="simtime that tells the Phy-Layer not to pass an AirFrame again">notAgain</a>;
<a name="l00017"></a>00017   }
<a name="l00018"></a>00018 
<a name="l00019"></a>00019   <span class="comment">//get the receiving power of the Signal</span>
<a name="l00020"></a>00020   <span class="comment">//Note: We assume the transmission power is represented by a rectangular function</span>
<a name="l00021"></a>00021   <span class="comment">//which discontinuities (at start and end of the signal) are represented</span>
<a name="l00022"></a>00022   <span class="comment">//by two key entries with different values very close to each other (see</span>
<a name="l00023"></a>00023   <span class="comment">//MappingUtils &quot;addDiscontinuity&quot; method for details). This means</span>
<a name="l00024"></a>00024   <span class="comment">//the transmission- and therefore also the receiving-power-mapping is still zero</span>
<a name="l00025"></a>00025   <span class="comment">//at the exact start of the signal and not till one time step after the start its</span>
<a name="l00026"></a>00026   <span class="comment">//at its actual transmission(/receiving) power.</span>
<a name="l00027"></a>00027   <span class="comment">//Therefore we use MappingUtils &quot;post&quot;-method to ask for the receiving power</span>
<a name="l00028"></a>00028   <span class="comment">//at the correct position.</span>
<a name="l00029"></a>00029   <a class="code" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>&amp; signal = frame-&gt;getSignal();
<a name="l00030"></a>00030   simtime_t receivingStart = <a class="code" href="a00123.html#a31183e79401391df3e2d250846ae8d0e" title="returns the closest value of simtime after passed values">MappingUtils::post</a>(signal.<a class="code" href="a00168.html#a7c4710243cf87caf7dfc9f313e2619b2" title="Returns the point in time when the receiving of the Signal started at the receiver...">getReceptionStart</a>());
<a name="l00031"></a>00031   <span class="keywordtype">double</span> recvPower = signal.<a class="code" href="a00168.html#a513b1abac0b04549585257f7f5f8ebea" title="Calculates and returns the receiving power of this Signal. Ownership of the returned...">getReceivingPower</a>()-&gt;getValue(<a class="code" href="a00009.html" title="Defines an argument for a mapping.">Argument</a>(receivingStart));
<a name="l00032"></a>00032 
<a name="l00033"></a>00033   <span class="comment">// check whether signal is strong enough to receive</span>
<a name="l00034"></a>00034   <span class="keywordflow">if</span> ( recvPower &lt; <a class="code" href="a00016.html#a5eece8bf532f92912ccbd0a3bc4d6fb0" title="sensitivity value for receiving an AirFrame">sensitivity</a> )
<a name="l00035"></a>00035   {
<a name="l00036"></a>00036     deciderEV &lt;&lt; <span class="stringliteral">&quot;Signal is to weak (&quot;</span> &lt;&lt; recvPower &lt;&lt; <span class="stringliteral">&quot; &lt; &quot;</span> &lt;&lt; <a class="code" href="a00016.html#a5eece8bf532f92912ccbd0a3bc4d6fb0" title="sensitivity value for receiving an AirFrame">sensitivity</a>
<a name="l00037"></a>00037         &lt;&lt; <span class="stringliteral">&quot;) -&gt; do not receive.&quot;</span> &lt;&lt; endl;
<a name="l00038"></a>00038     <span class="comment">// Signal too weak, we can&apos;t receive it, tell PhyLayer that we don&apos;t want it again</span>
<a name="l00039"></a>00039     <span class="keywordflow">return</span> <a class="code" href="a00067.html#a3edae7484aed7b0b874521c724bd3c30" title="simtime that tells the Phy-Layer not to pass an AirFrame again">notAgain</a>;
<a name="l00040"></a>00040   }
<a name="l00041"></a>00041 
<a name="l00042"></a>00042   <span class="comment">// Signal is strong enough, receive this Signal and schedule it</span>
<a name="l00043"></a>00043   deciderEV &lt;&lt; <span class="stringliteral">&quot;Signal is strong enough (&quot;</span> &lt;&lt; recvPower &lt;&lt; <span class="stringliteral">&quot; &gt; &quot;</span> &lt;&lt; <a class="code" href="a00016.html#a5eece8bf532f92912ccbd0a3bc4d6fb0" title="sensitivity value for receiving an AirFrame">sensitivity</a>
<a name="l00044"></a>00044       &lt;&lt; <span class="stringliteral">&quot;) -&gt; Trying to receive AirFrame.&quot;</span> &lt;&lt; endl;
<a name="l00045"></a>00045 
<a name="l00046"></a>00046   <a class="code" href="a00016.html#a22e578e992fab5ab54fe5fcdf196d9e3" title="pointer to the currently received AirFrame">currentSignal</a>.first = frame;
<a name="l00047"></a>00047   <a class="code" href="a00016.html#a22e578e992fab5ab54fe5fcdf196d9e3" title="pointer to the currently received AirFrame">currentSignal</a>.second = <a class="code" href="a00016.html#ae4acbca8f960e9c49379ae2a82e2d90ba5539b8e545c0676dab0b0efb80dfeeac" title="Waiting for the end of the signal.">EXPECT_END</a>;
<a name="l00048"></a>00048 
<a name="l00049"></a>00049   <span class="keywordflow">return</span> signal.<a class="code" href="a00168.html#a2875223239e124d85949e1116cc12ae9" title="Returns the point in time when the receiving of the Signal ended at the receiver...">getReceptionEnd</a>();
<a name="l00050"></a>00050 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6002f2ee8ffa35ded0162c72f93c9fba"></a><!-- doxytag: member="SNRThresholdDecider::processSignalEnd" ref="a6002f2ee8ffa35ded0162c72f93c9fba" args="(AirFrame *frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t SNRThresholdDecider::processSignalEnd </td>
          <td>(</td>
          <td class="paramtype">AirFrame *&nbsp;</td>
          <td class="paramname"> <em>frame</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Processes a received AirFrame. </p>
<p>The SNR-mapping for the <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a> is created and checked against the Deciders SNR-threshold. Depending on that the received AirFrame is either sent up to the MAC-Layer or dropped.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>usually return a value for: 'do not pass it again' </dd></dl>

<p>Reimplemented from <a class="el" href="a00016.html#ab9cfef6c04e12d2524d45e881f341300">BaseDecider</a>.</p>

<p>Definition at line <a class="el" href="a00414_source.html#l00172">172</a> of file <a class="el" href="a00414_source.html">SNRThresholdDecider.cc</a>.</p>

<p>References <a class="el" href="a00257_source.html#l00222">BaseDecider::calculateSnrMapping()</a>, <a class="el" href="a00414_source.html#l00053">checkIfAboveThreshold()</a>, <a class="el" href="a00258_source.html#l00078">BaseDecider::currentSignal</a>, <a class="el" href="a00279_source.html#l00144">Signal::getReceptionEnd()</a>, <a class="el" href="a00279_source.html#l00140">Signal::getReceptionStart()</a>, <a class="el" href="a00266_source.html#l00075">Decider::notAgain</a>, <a class="el" href="a00266_source.html#l00072">Decider::phy</a>, <a class="el" href="a00274_source.html#l00402">MappingUtils::post()</a>, <a class="el" href="a00274_source.html#l00392">MappingUtils::pre()</a>, <a class="el" href="a00076.html#a3c0676323e402449d0972890c6a14df3">DeciderToPhyInterface::sendUp()</a>, and <a class="el" href="a00415_source.html#l00040">snrThreshold</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00173"></a>00173 {
<a name="l00174"></a>00174   assert(frame == <a class="code" href="a00016.html#a22e578e992fab5ab54fe5fcdf196d9e3" title="pointer to the currently received AirFrame">currentSignal</a>.first);
<a name="l00175"></a>00175   <span class="comment">// here the Signal is finally processed</span>
<a name="l00176"></a>00176 
<a name="l00177"></a>00177   <span class="comment">// first collect all necessary information</span>
<a name="l00178"></a>00178   <a class="code" href="a00121.html" title="Represents a changeable mapping (mathematical function) from at least time to Argument::mapped_type...">Mapping</a>* snrMap = <a class="code" href="a00016.html#abac709d59f48d292f147919854c002e2" title="Calculates a SNR-Mapping for a Signal.">calculateSnrMapping</a>(frame);
<a name="l00179"></a>00179   assert(snrMap);
<a name="l00180"></a>00180 
<a name="l00181"></a>00181   <span class="keyword">const</span> <a class="code" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>&amp; signal = frame-&gt;getSignal();
<a name="l00182"></a>00182   simtime_t start = signal.<a class="code" href="a00168.html#a7c4710243cf87caf7dfc9f313e2619b2" title="Returns the point in time when the receiving of the Signal started at the receiver...">getReceptionStart</a>();
<a name="l00183"></a>00183   simtime_t end = signal.<a class="code" href="a00168.html#a2875223239e124d85949e1116cc12ae9" title="Returns the point in time when the receiving of the Signal ended at the receiver...">getReceptionEnd</a>();
<a name="l00184"></a>00184 
<a name="l00185"></a>00185   <span class="comment">// NOTE: Since this decider does not consider the amount of time when the signal&apos;s SNR is</span>
<a name="l00186"></a>00186   <span class="comment">// below the threshold even the smallest (normally insignificant) drop causes this decider</span>
<a name="l00187"></a>00187   <span class="comment">// to reject reception of the signal.</span>
<a name="l00188"></a>00188   <span class="comment">// Since the default MiXiM-signal is still zero at its exact start and end, these points</span>
<a name="l00189"></a>00189   <span class="comment">// are ignored in the interval passed to the following method.</span>
<a name="l00190"></a>00190   <span class="keywordtype">bool</span> aboveThreshold = <a class="code" href="a00179.html#abb6ae13f91f830a9e6cd975426b9d6df" title="Checks a mapping against a specific threshold (element-wise).">checkIfAboveThreshold</a>(snrMap,
<a name="l00191"></a>00191                         <a class="code" href="a00123.html#a31183e79401391df3e2d250846ae8d0e" title="returns the closest value of simtime after passed values">MappingUtils::post</a>(start),
<a name="l00192"></a>00192                         <a class="code" href="a00123.html#a2cf7c04c0adea7f6e9fe49101b0197c3" title="returns the closest value of simtime before passed value">MappingUtils::pre</a>(end));
<a name="l00193"></a>00193 
<a name="l00194"></a>00194   <span class="comment">// check if the snrMapping is above the Decider&apos;s specific threshold,</span>
<a name="l00195"></a>00195   <span class="comment">// i.e. the Decider has received it correctly</span>
<a name="l00196"></a>00196   <span class="keywordflow">if</span> (aboveThreshold)
<a name="l00197"></a>00197   {
<a name="l00198"></a>00198     deciderEV &lt;&lt; <span class="stringliteral">&quot;SNR is above threshold(&quot;</span>&lt;&lt;<a class="code" href="a00179.html#abdb6b19743460a19e900c4b6d38c483b" title="Threshold value for checking a SNR-map (SNR-threshold).">snrThreshold</a>&lt;&lt;<span class="stringliteral">&quot;) -&gt; sending up.&quot;</span> &lt;&lt; endl;
<a name="l00199"></a>00199     <span class="comment">// go on with processing this AirFrame, send it to the Mac-Layer</span>
<a name="l00200"></a>00200     <a class="code" href="a00067.html#ac0f72556cb799d883b4219cab58320bb" title="A pointer to the physical layer of this Decider.">phy</a>-&gt;<a class="code" href="a00076.html#a3c0676323e402449d0972890c6a14df3" title="Called to send an AirFrame with DeciderResult to the MACLayer.">sendUp</a>(frame, <span class="keyword">new</span> <a class="code" href="a00072.html" title="A class to represent the result of a processed packet (that is not noise) by the...">DeciderResult</a>(<span class="keyword">true</span>));
<a name="l00201"></a>00201   } <span class="keywordflow">else</span>
<a name="l00202"></a>00202   {
<a name="l00203"></a>00203     deciderEV &lt;&lt; <span class="stringliteral">&quot;SNR is below threshold(&quot;</span>&lt;&lt;<a class="code" href="a00179.html#abdb6b19743460a19e900c4b6d38c483b" title="Threshold value for checking a SNR-map (SNR-threshold).">snrThreshold</a>&lt;&lt;<span class="stringliteral">&quot;) -&gt; dropped.&quot;</span> &lt;&lt; endl;
<a name="l00204"></a>00204   }
<a name="l00205"></a>00205 
<a name="l00206"></a>00206   <span class="keyword">delete</span> snrMap;
<a name="l00207"></a>00207   snrMap = 0;
<a name="l00208"></a>00208 
<a name="l00209"></a>00209 
<a name="l00210"></a>00210   <span class="comment">// we have processed this AirFrame and we prepare to receive the next one</span>
<a name="l00211"></a>00211   <a class="code" href="a00016.html#a22e578e992fab5ab54fe5fcdf196d9e3" title="pointer to the currently received AirFrame">currentSignal</a>.first = 0;
<a name="l00212"></a>00212 
<a name="l00213"></a>00213   <span class="keywordflow">return</span> <a class="code" href="a00067.html#a3edae7484aed7b0b874521c724bd3c30" title="simtime that tells the Phy-Layer not to pass an AirFrame again">notAgain</a>;
<a name="l00214"></a>00214 }
</pre></div></p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/modules/phy/<a class="el" href="a00415_source.html">SNRThresholdDecider.h</a></li>
<li>src/modules/phy/<a class="el" href="a00414_source.html">SNRThresholdDecider.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed Dec 14 16:01:51 2011 for MiXiM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
