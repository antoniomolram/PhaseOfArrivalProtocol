<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MiXiM: BaseLayer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>BaseLayer Class Reference<br/>
<small>
[<a class="el" href="a00451.html">baseModules - base module classes of MiXiM</a>]</small>
</h1><!-- doxytag: class="BaseLayer" --><!-- doxytag: inherits="BatteryAccess" -->
<p>A very simple layer template.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="a00241_source.html">BaseLayer.h</a>&gt;</code></p>

<p>Inherits <a class="el" href="a00028.html">BatteryAccess</a>.</p>

<p>Inherited by <a class="el" href="a00004.html">Aggregation</a>, <a class="el" href="a00012.html">BaseApplLayer</a>, <a class="el" href="a00022.html">BaseMacLayer</a>, <a class="el" href="a00025.html">BaseNetwLayer</a>, <a class="el" href="a00136.html">NetworkStackTrafficGen</a>, and <a class="el" href="a00167.html">SensorApplLayer</a>.</p>
<div class="dynheader">
Collaboration diagram for BaseLayer:</div>
<div class="dynsection">
<div class="center"><img src="a00508.png" border="0" usemap="#BaseLayer_coll__map" alt="Collaboration graph"/></div>
<map name="BaseLayer_coll__map" id="BaseLayer_coll__map">
<area shape="rect" href="a00028.html" title="Extends BaseModule by several methods which provide access to the battery module..." alt="" coords="5,5,112,32"/><area shape="rect" href="a00177.html" title="Helper function to initialize signal change identifier on use and not on initializing..." alt="" coords="136,5,251,32"/><area shape="rect" href="a00146.html" title="PassedMessage" alt="" coords="309,5,429,32"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="a00509.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0afd7ae9809a632ee75a136838029c07"></a><!-- doxytag: member="BaseLayer::BaseLayer" ref="a0afd7ae9809a632ee75a136838029c07" args="(unsigned stacksize)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>BaseLayer</b> (unsigned stacksize)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#a70f5ea30a9980d57b8384faed29ec3eb">initialize</a> (int)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialization of the module and some variables.  <a href="#a70f5ea30a9980d57b8384faed29ec3eb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#a8039dac8d02052c97c1fcc209910fdde">handleMessage</a> (cMessage *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called every time a message arrives.  <a href="#a8039dac8d02052c97c1fcc209910fdde"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5ab11502dbeeea89693d29841376a2f7"></a><!-- doxytag: member="BaseLayer::finish" ref="a5ab11502dbeeea89693d29841376a2f7" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#a5ab11502dbeeea89693d29841376a2f7">finish</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called when the simulation has finished. <br/></td></tr>
<tr><td colspan="2"><h2>Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a665bf8ad06b2c4b5419669869e68ef00"></a><!-- doxytag: member="BaseLayer::catPacketSignal" ref="a665bf8ad06b2c4b5419669869e68ef00" args="" -->
static const <a class="el" href="a00177.html">simsignalwrap_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#a665bf8ad06b2c4b5419669869e68ef00">catPacketSignal</a> = <a class="el" href="a00177.html">simsignalwrap_t</a>(MIXIM_SIGNAL_PACKET_NAME)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">SignalID for packets. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8474b0b98731b2d66c9fe3a3ae040edd"></a><!-- doxytag: member="BaseLayer::catPassedMsgSignal" ref="a8474b0b98731b2d66c9fe3a3ae040edd" args="" -->
static const <a class="el" href="a00177.html">simsignalwrap_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#a8474b0b98731b2d66c9fe3a3ae040edd">catPassedMsgSignal</a> = <a class="el" href="a00177.html">simsignalwrap_t</a>(MIXIM_SIGNAL_PASSEDMSG_NAME)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a> for passed messages. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad8ba02d92dd106da1d85192eb28250c0"></a><!-- doxytag: member="BaseLayer::catDroppedPacketSignal" ref="ad8ba02d92dd106da1d85192eb28250c0" args="" -->
static const <a class="el" href="a00177.html">simsignalwrap_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#ad8ba02d92dd106da1d85192eb28250c0">catDroppedPacketSignal</a> = <a class="el" href="a00177.html">simsignalwrap_t</a>(MIXIM_SIGNAL_DROPPEDPACKET_NAME)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a> for dropped packets. <br/></td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Handle Messages</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpab8d27efd7842b98784514a28b760dd0"></a>Functions to be redefined by the programmer</p>
<p>These are the functions provided to add own functionality to your modules. These functions are called whenever a self message or a data message from the upper or lower layer arrives respectively. </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a87d7e1e5aa73216f07e35d7be4358924"></a><!-- doxytag: member="BaseLayer::handleSelfMsg" ref="a87d7e1e5aa73216f07e35d7be4358924" args="(cMessage *msg)=0" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#a87d7e1e5aa73216f07e35d7be4358924">handleSelfMsg</a> (cMessage *msg)=0</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle self messages such as timer... <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#a8c0fcfb2e806357a65d5bdb1c338627b">handleUpperMsg</a> (cMessage *msg)=0</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle messages from upper layer.  <a href="#a8c0fcfb2e806357a65d5bdb1c338627b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5ca2278405070baa474dfbf059930247"></a><!-- doxytag: member="BaseLayer::handleLowerMsg" ref="a5ca2278405070baa474dfbf059930247" args="(cMessage *msg)=0" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#a5ca2278405070baa474dfbf059930247">handleLowerMsg</a> (cMessage *msg)=0</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle messages from lower layer. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa37925527fae20a5de1a755103056219"></a><!-- doxytag: member="BaseLayer::handleLowerControl" ref="aa37925527fae20a5de1a755103056219" args="(cMessage *msg)=0" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#aa37925527fae20a5de1a755103056219">handleLowerControl</a> (cMessage *msg)=0</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle control messages from lower layer. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab412568faae75040194e01d5e541dd67"></a><!-- doxytag: member="BaseLayer::handleUpperControl" ref="ab412568faae75040194e01d5e541dd67" args="(cMessage *msg)=0" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#ab412568faae75040194e01d5e541dd67">handleUpperControl</a> (cMessage *msg)=0</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle control messages from upper layer. <br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Convenience Functions</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp53bdfa711ff12fb44fc5694cc4f74c67"></a>Functions for convenience - NOT to be modified</p>
<p>These are functions taking care of message encapsulation and message sending. Normally you should not need to alter these.</p>
<p>All these functions assume that YOU do all the necessary handling of control information etc. before you use them. </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#a1873d6e3fc6d92cf8482b39f1c5ac6c8">sendDown</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends a message to the lower layer.  <a href="#a1873d6e3fc6d92cf8482b39f1c5ac6c8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#adbf061566606041db811b519f0400ed5">sendUp</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends a message to the upper layer.  <a href="#adbf061566606041db811b519f0400ed5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa1190a06fb4dfb15d8ff001468335dc8"></a><!-- doxytag: member="BaseLayer::sendControlUp" ref="aa1190a06fb4dfb15d8ff001468335dc8" args="(cMessage *msg)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#aa1190a06fb4dfb15d8ff001468335dc8">sendControlUp</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends a control message to an upper layer. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6d01a0f56978740d7617c2e338858cc3"></a><!-- doxytag: member="BaseLayer::sendControlDown" ref="a6d01a0f56978740d7617c2e338858cc3" args="(cMessage *msg)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#a6d01a0f56978740d7617c2e338858cc3">sendControlDown</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends a control message to a lower layer. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a33f4f320f4b6c4ec48651847338ff47f"></a><!-- doxytag: member="BaseLayer::recordPacket" ref="a33f4f320f4b6c4ec48651847338ff47f" args="(PassedMessage::direction_t dir, PassedMessage::gates_t gate, const cMessage *m)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>recordPacket</b> (PassedMessage::direction_t dir, PassedMessage::gates_t gate, const cMessage *m)</td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adf7be46c3b45429ae7e45c466202eebd"></a><!-- doxytag: member="BaseLayer::passedMsg" ref="adf7be46c3b45429ae7e45c466202eebd" args="" -->
<a class="el" href="a00146.html">PassedMessage</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#adf7be46c3b45429ae7e45c466202eebd">passedMsg</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The last message passed through this layer. This variable will be only not NULL if we are in statistic recording mode. <br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">gate ids</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp481665710f419031fda498e9d32fd64f"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa73b04b4b90c5d44adf7b1ea1264412d"></a><!-- doxytag: member="BaseLayer::upperLayerIn" ref="aa73b04b4b90c5d44adf7b1ea1264412d" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>upperLayerIn</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6a901380d0b82b72898cad4ba6cff331"></a><!-- doxytag: member="BaseLayer::upperLayerOut" ref="a6a901380d0b82b72898cad4ba6cff331" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>upperLayerOut</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abf4366df3282b3358945a3267538b93a"></a><!-- doxytag: member="BaseLayer::lowerLayerIn" ref="abf4366df3282b3358945a3267538b93a" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>lowerLayerIn</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa77fd3b24dc3caec970d7f5c48626e52"></a><!-- doxytag: member="BaseLayer::lowerLayerOut" ref="aa77fd3b24dc3caec970d7f5c48626e52" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>lowerLayerOut</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aba75bba311458c62b4b2fa2bb9711a91"></a><!-- doxytag: member="BaseLayer::upperControlIn" ref="aba75bba311458c62b4b2fa2bb9711a91" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>upperControlIn</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5e0a6cb17bfc2fd3127ac884d0e9d3c8"></a><!-- doxytag: member="BaseLayer::upperControlOut" ref="a5e0a6cb17bfc2fd3127ac884d0e9d3c8" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>upperControlOut</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1d2eb99059680b97b366ae8342f18af5"></a><!-- doxytag: member="BaseLayer::lowerControlIn" ref="a1d2eb99059680b97b366ae8342f18af5" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>lowerControlIn</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a380159410191c5ea0e5f95766a4814dd"></a><!-- doxytag: member="BaseLayer::lowerControlOut" ref="a380159410191c5ea0e5f95766a4814dd" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>lowerControlOut</b></td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae32ebb422e76d38e48231ebd84fe772b"></a><!-- doxytag: member="BaseLayer::BaseLayer" ref="ae32ebb422e76d38e48231ebd84fe772b" args="(const BaseLayer &amp;)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#ae32ebb422e76d38e48231ebd84fe772b">BaseLayer</a> (const <a class="el" href="a00021.html">BaseLayer</a> &amp;)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy constructor is not allowed. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a063fda133f5220b9db525cd32c6d683b"></a><!-- doxytag: member="BaseLayer::operator=" ref="a063fda133f5220b9db525cd32c6d683b" args="(const BaseLayer &amp;)" -->
<a class="el" href="a00021.html">BaseLayer</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00021.html#a063fda133f5220b9db525cd32c6d683b">operator=</a> (const <a class="el" href="a00021.html">BaseLayer</a> &amp;)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Assignment operator is not allowed. <br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>A very simple layer template. </p>
<p>This module provides basic abstractions that ease development of a network or MAC layer.</p>
<dl class="author"><dt><b>Author:</b></dt><dd>Andreas Koepke </dd></dl>

<p>Definition at line <a class="el" href="a00241_source.html#l00039">39</a> of file <a class="el" href="a00241_source.html">BaseLayer.h</a>.</p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a8039dac8d02052c97c1fcc209910fdde"></a><!-- doxytag: member="BaseLayer::handleMessage" ref="a8039dac8d02052c97c1fcc209910fdde" args="(cMessage *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseLayer::handleMessage </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called every time a message arrives. </p>
<p>The basic handle message function.</p>
<p>Depending on the gate a message arrives handleMessage just calls different handle*Msg functions to further process the message.</p>
<p>You should not make any changes in this function but implement all your functionality into the handle*Msg functions called from here.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="a00021.html#a8c0fcfb2e806357a65d5bdb1c338627b" title="Handle messages from upper layer.">handleUpperMsg</a>, <a class="el" href="a00021.html#a5ca2278405070baa474dfbf059930247" title="Handle messages from lower layer.">handleLowerMsg</a>, <a class="el" href="a00021.html#a87d7e1e5aa73216f07e35d7be4358924" title="Handle self messages such as timer...">handleSelfMsg</a> </dd></dl>

<p>Definition at line <a class="el" href="a00240_source.html#l00075">75</a> of file <a class="el" href="a00240_source.html">BaseLayer.cc</a>.</p>

<p>References <a class="el" href="a00021.html#aa37925527fae20a5de1a755103056219">handleLowerControl()</a>, <a class="el" href="a00021.html#a5ca2278405070baa474dfbf059930247">handleLowerMsg()</a>, <a class="el" href="a00021.html#a87d7e1e5aa73216f07e35d7be4358924">handleSelfMsg()</a>, <a class="el" href="a00021.html#ab412568faae75040194e01d5e541dd67">handleUpperControl()</a>, and <a class="el" href="a00021.html#a8c0fcfb2e806357a65d5bdb1c338627b">handleUpperMsg()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00076"></a>00076 {
<a name="l00077"></a>00077     <span class="keywordflow">if</span> (msg-&gt;isSelfMessage()){
<a name="l00078"></a>00078         <a class="code" href="a00021.html#a87d7e1e5aa73216f07e35d7be4358924" title="Handle self messages such as timer...">handleSelfMsg</a>(msg);
<a name="l00079"></a>00079     } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(msg-&gt;getArrivalGateId()==upperLayerIn) {
<a name="l00080"></a>00080         recordPacket(PassedMessage::INCOMING,PassedMessage::UPPER_DATA,msg);
<a name="l00081"></a>00081         <a class="code" href="a00021.html#a8c0fcfb2e806357a65d5bdb1c338627b" title="Handle messages from upper layer.">handleUpperMsg</a>(msg);
<a name="l00082"></a>00082     } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(msg-&gt;getArrivalGateId()==upperControlIn) {
<a name="l00083"></a>00083         recordPacket(PassedMessage::INCOMING,PassedMessage::UPPER_CONTROL,msg);
<a name="l00084"></a>00084         <a class="code" href="a00021.html#ab412568faae75040194e01d5e541dd67" title="Handle control messages from upper layer.">handleUpperControl</a>(msg);
<a name="l00085"></a>00085     } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(msg-&gt;getArrivalGateId()==lowerControlIn){
<a name="l00086"></a>00086         recordPacket(PassedMessage::INCOMING,PassedMessage::LOWER_CONTROL,msg);
<a name="l00087"></a>00087         <a class="code" href="a00021.html#aa37925527fae20a5de1a755103056219" title="Handle control messages from lower layer.">handleLowerControl</a>(msg);
<a name="l00088"></a>00088     } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(msg-&gt;getArrivalGateId()==lowerLayerIn) {
<a name="l00089"></a>00089         recordPacket(PassedMessage::INCOMING,PassedMessage::LOWER_DATA,msg);
<a name="l00090"></a>00090         <a class="code" href="a00021.html#a5ca2278405070baa474dfbf059930247" title="Handle messages from lower layer.">handleLowerMsg</a>(msg);
<a name="l00091"></a>00091     }
<a name="l00092"></a>00092     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(msg-&gt;getArrivalGateId()==-1) {
<a name="l00093"></a>00093         <span class="comment">/* Classes extending this class may not use all the gates, f.e.</span>
<a name="l00094"></a>00094 <span class="comment">         * BaseApplLayer has no upper gates. In this case all upper gate-</span>
<a name="l00095"></a>00095 <span class="comment">         * handles are initialized to -1. When getArrivalGateId() equals -1,</span>
<a name="l00096"></a>00096 <span class="comment">         * it would be wrong to forward the message to one of these gates,</span>
<a name="l00097"></a>00097 <span class="comment">         * as they actually don&apos;t exist, so raise an error instead.</span>
<a name="l00098"></a>00098 <span class="comment">         */</span>
<a name="l00099"></a>00099         opp_error(<span class="stringliteral">&quot;No self message and no gateID?? Check configuration.&quot;</span>);
<a name="l00100"></a>00100     } <span class="keywordflow">else</span> {
<a name="l00101"></a>00101         <span class="comment">/* msg-&gt;getArrivalGateId() should be valid, but it isn&apos;t recognized</span>
<a name="l00102"></a>00102 <span class="comment">         * here. This could signal the case that this class is extended</span>
<a name="l00103"></a>00103 <span class="comment">         * with extra gates, but handleMessage() isn&apos;t overridden to</span>
<a name="l00104"></a>00104 <span class="comment">         * check for the new gate(s).</span>
<a name="l00105"></a>00105 <span class="comment">         */</span>
<a name="l00106"></a>00106         opp_error(<span class="stringliteral">&quot;Unknown gateID?? Check configuration or override handleMessage().&quot;</span>);
<a name="l00107"></a>00107     }
<a name="l00108"></a>00108 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8c0fcfb2e806357a65d5bdb1c338627b"></a><!-- doxytag: member="BaseLayer::handleUpperMsg" ref="a8c0fcfb2e806357a65d5bdb1c338627b" args="(cMessage *msg)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void BaseLayer::handleUpperMsg </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle messages from upper layer. </p>
<p>This function is pure virtual here, because there is no reasonable guess what to do with it by default. </p>

<p>Implemented in <a class="el" href="a00012.html#a29c15eb83ed7749c838c005a3fb554d4">BaseApplLayer</a>, <a class="el" href="a00022.html#a6de2ca07018de313a7147a03e6d77bff">BaseMacLayer</a>, <a class="el" href="a00025.html#a0b473fbb2517ac7b0c633afdb002c269">BaseNetwLayer</a>, <a class="el" href="a00167.html#a999fc38567d79965df17646dcbf38e84">SensorApplLayer</a>, <a class="el" href="a00033.html#a43c9f5377b89dd4cd4e4e48fb3e96107">BMacLayer</a>, <a class="el" href="a00064.html#ad85c18d90e41eb2074593a44b64ab855">csma</a>, <a class="el" href="a00066.html#a06c96c060afdff5c0f348b5ebef5c54d">CSMAMacLayer</a>, <a class="el" href="a00113.html#a7de5ee6f865e3ae8e7a9841291d36a37">LMacLayer</a>, <a class="el" href="a00115.html#af7e230f8713536482417699f2f6bee71">Mac80211</a>, <a class="el" href="a00086.html#afd462238bd49ed699157a22acc4b4d15">DummyRoute</a>, <a class="el" href="a00091.html#a37fea31a3b2493ee86f1b3efa7dd885a">Flood</a>, <a class="el" href="a00156.html#a7bf4d5846300082695448feb01b9899e">ProbabilisticBroadcast</a>, <a class="el" href="a00202.html#aca0392ef347f060c9950238620245357">WiseRoute</a>, <a class="el" href="a00004.html#a9723e5a17551e41ae8a7de5078f6ac7f">Aggregation</a>, and <a class="el" href="a00136.html#aa27138585461e46f30446c79fd273cd5">NetworkStackTrafficGen</a>.</p>

<p>Referenced by <a class="el" href="a00240_source.html#l00075">handleMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a70f5ea30a9980d57b8384faed29ec3eb"></a><!-- doxytag: member="BaseLayer::initialize" ref="a70f5ea30a9980d57b8384faed29ec3eb" args="(int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseLayer::initialize </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stage</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialization of the module and some variables. </p>
<p>First we have to initialize the module from which we derived ours, in this case <a class="el" href="a00024.html" title="Base class for all simple modules of a host.">BaseModule</a>. This module takes care of the gate initialization. </p>

<p>Reimplemented from <a class="el" href="a00024.html#a03030e439aaf030c83da6e71e8be2f80">BaseModule</a>.</p>

<p>Reimplemented in <a class="el" href="a00012.html#aa3ebaf5d1d1bdbec4648b07f65eb4145">BaseApplLayer</a>, <a class="el" href="a00022.html#a61c82dc3b225eac37f7fa9936c28c2c3">BaseMacLayer</a>, <a class="el" href="a00025.html#a1e521b5549bfe29ae94d95265c0fe8d2">BaseNetwLayer</a>, <a class="el" href="a00184.html#a8df32483962ebc40e1eed225716e54cb">TestApplLayer</a>, <a class="el" href="a00038.html#ae693c2f1fc343d8c253778a1de1c4082">BurstApplLayer</a>, <a class="el" href="a00039.html#a8ccaf74e9a310c5f45447283df6dee7e">BurstApplLayerBattery</a>, <a class="el" href="a00167.html#aac9612746afd57f4393658789d3c64fe">SensorApplLayer</a>, <a class="el" href="a00190.html#a083fea2270d41c26495fbc8e2bbe95be">TrafficGen</a>, <a class="el" href="a00006.html#abab6939a0c82122391528d386df97c2c">AlohaMacLayer</a>, <a class="el" href="a00033.html#aacfdc6bca51f7097b58556fdf1744689">BMacLayer</a>, <a class="el" href="a00064.html#a24e7a48bd1d9036139c75b558ade4161">csma</a>, <a class="el" href="a00065.html#abbb7175c6f28345ca29c3ca6f98732fc">CSMA802154</a>, <a class="el" href="a00066.html#a660262c629f33b00401249d3fdac49be">CSMAMacLayer</a>, <a class="el" href="a00113.html#a2100ca7de5c5eedb3e7f0e11ca9fca14">LMacLayer</a>, <a class="el" href="a00115.html#ab81dae24d79c2ef010301e2c219966c1">Mac80211</a>, <a class="el" href="a00116.html#aa7351afc794f983e34dbc86d63cb3dea">Mac80211MultiChannel</a>, <a class="el" href="a00198.html#a0fcaae9c3cefb73372b7290ff4d9092d">UWBIRMac</a>, <a class="el" href="a00002.html#ad3541d0be9b308c1b72633d25300afdb">AdaptiveProbabilisticBroadcast</a>, <a class="el" href="a00086.html#abdee96cebdcaeef041d21f4dd8d90b9d">DummyRoute</a>, <a class="el" href="a00091.html#ab47e1d524db55d57edc7f86db5d92735">Flood</a>, <a class="el" href="a00156.html#abf8d4a866267695fc27802ada7862526">ProbabilisticBroadcast</a>, <a class="el" href="a00202.html#ade7fd8114864ff11327435c57cab0e53">WiseRoute</a>, <a class="el" href="a00004.html#acf3b1cfc2915c422e5a10e7993884b9b">Aggregation</a>, and <a class="el" href="a00136.html#a4ad89047bebb99eaad2fd239cbc9e601">NetworkStackTrafficGen</a>.</p>

<p>Definition at line <a class="el" href="a00240_source.html#l00041">41</a> of file <a class="el" href="a00240_source.html">BaseLayer.cc</a>.</p>

<p>References <a class="el" href="a00241_source.html#l00064">passedMsg</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00042"></a>00042 {
<a name="l00043"></a>00043     <a class="code" href="a00021.html#a70f5ea30a9980d57b8384faed29ec3eb" title="Initialization of the module and some variables.">BatteryAccess::initialize</a>(stage);
<a name="l00044"></a>00044     <span class="keywordflow">if</span>(stage==0){
<a name="l00045"></a>00045         <a class="code" href="a00021.html#adf7be46c3b45429ae7e45c466202eebd" title="The last message passed through this layer. This variable will be only not NULL if...">passedMsg</a> = NULL;
<a name="l00046"></a>00046         <span class="keywordflow">if</span> (hasPar(<span class="stringliteral">&quot;stats&quot;</span>) &amp;&amp; par(<span class="stringliteral">&quot;stats&quot;</span>).boolValue()) {
<a name="l00047"></a>00047             <a class="code" href="a00021.html#adf7be46c3b45429ae7e45c466202eebd" title="The last message passed through this layer. This variable will be only not NULL if...">passedMsg</a> = <span class="keyword">new</span> <a class="code" href="a00146.html">PassedMessage</a>();
<a name="l00048"></a>00048             <span class="keywordflow">if</span> (<a class="code" href="a00021.html#adf7be46c3b45429ae7e45c466202eebd" title="The last message passed through this layer. This variable will be only not NULL if...">passedMsg</a> != NULL) {
<a name="l00049"></a>00049                 <a class="code" href="a00021.html#adf7be46c3b45429ae7e45c466202eebd" title="The last message passed through this layer. This variable will be only not NULL if...">passedMsg</a>-&gt;fromModule = getId();
<a name="l00050"></a>00050             }
<a name="l00051"></a>00051         }
<a name="l00052"></a>00052         upperLayerIn    = findGate(<span class="stringliteral">&quot;upperLayerIn&quot;</span>);
<a name="l00053"></a>00053         upperLayerOut   = findGate(<span class="stringliteral">&quot;upperLayerOut&quot;</span>);
<a name="l00054"></a>00054         lowerLayerIn    = findGate(<span class="stringliteral">&quot;lowerLayerIn&quot;</span>);
<a name="l00055"></a>00055         lowerLayerOut   = findGate(<span class="stringliteral">&quot;lowerLayerOut&quot;</span>);
<a name="l00056"></a>00056         upperControlIn  = findGate(<span class="stringliteral">&quot;upperControlIn&quot;</span>);
<a name="l00057"></a>00057         upperControlOut = findGate(<span class="stringliteral">&quot;upperControlOut&quot;</span>);
<a name="l00058"></a>00058         lowerControlIn  = findGate(<span class="stringliteral">&quot;lowerControlIn&quot;</span>);
<a name="l00059"></a>00059         lowerControlOut = findGate(<span class="stringliteral">&quot;lowerControlOut&quot;</span>);
<a name="l00060"></a>00060     }
<a name="l00061"></a>00061 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1873d6e3fc6d92cf8482b39f1c5ac6c8"></a><!-- doxytag: member="BaseLayer::sendDown" ref="a1873d6e3fc6d92cf8482b39f1c5ac6c8" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseLayer::sendDown </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sends a message to the lower layer. </p>
<p>Short hand for send(msg, lowerLayerOut);</p>
<p>You have to take care of encapsulation We recommend that you use a pair of functions called encapsMsg/decapsMsg. </p>

<p>Definition at line <a class="el" href="a00240_source.html#l00110">110</a> of file <a class="el" href="a00240_source.html">BaseLayer.cc</a>.</p>

<p>Referenced by <a class="el" href="a00333_source.html#l00222">CSMAMacLayer::handleLowerControl()</a>, <a class="el" href="a00387_source.html#l00147">WiseRoute::handleLowerMsg()</a>, <a class="el" href="a00383_source.html#l00142">Flood::handleLowerMsg()</a>, <a class="el" href="a00387_source.html#l00119">WiseRoute::handleSelfMsg()</a>, <a class="el" href="a00385_source.html#l00106">ProbabilisticBroadcast::handleSelfMsg()</a>, <a class="el" href="a00335_source.html#l00153">LMacLayer::handleSelfMsg()</a>, <a class="el" href="a00422_source.html#l00053">Aggregation::handleUpperMsg()</a>, <a class="el" href="a00387_source.html#l00237">WiseRoute::handleUpperMsg()</a>, <a class="el" href="a00383_source.html#l00094">Flood::handleUpperMsg()</a>, <a class="el" href="a00381_source.html#l00048">DummyRoute::handleUpperMsg()</a>, <a class="el" href="a00248_source.html#l00145">BaseNetwLayer::handleUpperMsg()</a>, <a class="el" href="a00242_source.html#l00175">BaseMacLayer::handleUpperMsg()</a>, <a class="el" href="a00337_source.html#l00839">Mac80211::sendACKframe()</a>, <a class="el" href="a00321_source.html#l00100">TrafficGen::sendBroadcast()</a>, <a class="el" href="a00254_source.html#l00110">TestApplLayer::sendBroadcast()</a>, <a class="el" href="a00215_source.html#l00112">NetworkStackTrafficGen::sendBroadcast()</a>, <a class="el" href="a00337_source.html#l00935">Mac80211::sendBROADCASTframe()</a>, <a class="el" href="a00337_source.html#l00904">Mac80211::sendCTSframe()</a>, <a class="el" href="a00317_source.html#l00244">SensorApplLayer::sendData()</a>, <a class="el" href="a00337_source.html#l00803">Mac80211::sendDATAframe()</a>, <a class="el" href="a00327_source.html#l00565">BMacLayer::sendDataPacket()</a>, <a class="el" href="a00327_source.html#l00195">BMacLayer::sendMacAck()</a>, <a class="el" href="a00327_source.html#l00178">BMacLayer::sendPreamble()</a>, and <a class="el" href="a00337_source.html#l00867">Mac80211::sendRTSframe()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00110"></a>00110                                       {
<a name="l00111"></a>00111     recordPacket(PassedMessage::OUTGOING,PassedMessage::LOWER_DATA,msg);
<a name="l00112"></a>00112     send(msg, lowerLayerOut);
<a name="l00113"></a>00113 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="adbf061566606041db811b519f0400ed5"></a><!-- doxytag: member="BaseLayer::sendUp" ref="adbf061566606041db811b519f0400ed5" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseLayer::sendUp </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sends a message to the upper layer. </p>
<p>Short hand for send(msg, upperLayerOut); You have to take care of decapsulation and deletion of superflous frames. We recommend that you use a pair of functions decapsMsg/encapsMsg. </p>

<p>Definition at line <a class="el" href="a00240_source.html#l00115">115</a> of file <a class="el" href="a00240_source.html">BaseLayer.cc</a>.</p>

<p>Referenced by <a class="el" href="a00337_source.html#l00611">Mac80211::handleBroadcastMsg()</a>, <a class="el" href="a00337_source.html#l00542">Mac80211::handleDATAframe()</a>, <a class="el" href="a00422_source.html#l00103">Aggregation::handleLowerMsg()</a>, <a class="el" href="a00387_source.html#l00147">WiseRoute::handleLowerMsg()</a>, <a class="el" href="a00385_source.html#l00058">ProbabilisticBroadcast::handleLowerMsg()</a>, <a class="el" href="a00383_source.html#l00142">Flood::handleLowerMsg()</a>, <a class="el" href="a00381_source.html#l00035">DummyRoute::handleLowerMsg()</a>, <a class="el" href="a00333_source.html#l00204">CSMAMacLayer::handleLowerMsg()</a>, <a class="el" href="a00325_source.html#l00093">AlohaMacLayer::handleLowerMsg()</a>, <a class="el" href="a00248_source.html#l00128">BaseNetwLayer::handleLowerMsg()</a>, <a class="el" href="a00242_source.html#l00189">BaseMacLayer::handleLowerMsg()</a>, <a class="el" href="a00335_source.html#l00153">LMacLayer::handleSelfMsg()</a>, and <a class="el" href="a00327_source.html#l00224">BMacLayer::handleSelfMsg()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00115"></a>00115                                     {
<a name="l00116"></a>00116     recordPacket(PassedMessage::OUTGOING,PassedMessage::UPPER_DATA,msg);
<a name="l00117"></a>00117     send(msg, upperLayerOut);
<a name="l00118"></a>00118 }
</pre></div></p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/base/modules/<a class="el" href="a00241_source.html">BaseLayer.h</a></li>
<li>src/base/modules/<a class="el" href="a00240_source.html">BaseLayer.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed Dec 14 16:01:48 2011 for MiXiM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
