<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MiXiM: Flood Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Flood Class Reference<br/>
<small>
[<a class="el" href="a00442.html">netwLayer - network layer modules</a>]</small>
</h1><!-- doxytag: class="Flood" --><!-- doxytag: inherits="BaseNetwLayer" -->
<p>A simple flooding protocol.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="a00384_source.html">Flood.h</a>&gt;</code></p>

<p>Inherits <a class="el" href="a00025.html">BaseNetwLayer</a>.</p>
<div class="dynheader">
Collaboration diagram for Flood:</div>
<div class="dynsection">
<div class="center"><img src="a00622.png" border="0" usemap="#Flood_coll__map" alt="Collaboration graph"/></div>
<map name="Flood_coll__map" id="Flood_coll__map">
<area shape="rect" href="a00025.html" title="Base class for the network layer." alt="" coords="5,5,120,32"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="a00623.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00032.html">Bcast</a></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#ab47e1d524db55d57edc7f86db5d92735">initialize</a> (int)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialization of omnetpp.ini parameters.  <a href="#ab47e1d524db55d57edc7f86db5d92735"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acf27b1fb0d68b08a1ea752f2ff08b0a4"></a><!-- doxytag: member="Flood::finish" ref="acf27b1fb0d68b08a1ea752f2ff08b0a4" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#acf27b1fb0d68b08a1ea752f2ff08b0a4">finish</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called when the simulation has finished. <br/></td></tr>
<tr><td colspan="2"><h2>Protected Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa86c6dbba4ab62a707dcd62cb83ada23"></a><!-- doxytag: member="Flood::cBroadcastList" ref="aa86c6dbba4ab62a707dcd62cb83ada23" args="" -->
typedef std::list&lt; <a class="el" href="a00032.html">Bcast</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><b>cBroadcastList</b></td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a37fea31a3b2493ee86f1b3efa7dd885a">handleUpperMsg</a> (cMessage *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle messages from upper layer.  <a href="#a37fea31a3b2493ee86f1b3efa7dd885a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#ac8c12c3b58ff0f5092b2326f694a509e">handleLowerMsg</a> (cMessage *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle messages from lower layer.  <a href="#ac8c12c3b58ff0f5092b2326f694a509e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac684a409e61e05e4058e9846ad021ca9"></a><!-- doxytag: member="Flood::handleSelfMsg" ref="ac684a409e61e05e4058e9846ad021ca9" args="(cMessage *)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#ac684a409e61e05e4058e9846ad021ca9">handleSelfMsg</a> (cMessage *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">we have no self messages <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a2db7cb247083f81504dd2b52a583e9eb">notBroadcasted</a> (NetwPkt *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Checks whether a message was already broadcasted.  <a href="#a2db7cb247083f81504dd2b52a583e9eb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual NetwPkt *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#ab040d65ebb443a447e6ab9460d3f0f8f">encapsMsg</a> (cPacket *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Encapsulate higher layer packet into an NetwPkt.  <a href="#ab040d65ebb443a447e6ab9460d3f0f8f"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5fbbab943e750dc83ed4cb6450b83ea7"></a><!-- doxytag: member="Flood::seqNum" ref="a5fbbab943e750dc83ed4cb6450b83ea7" args="" -->
unsigned long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a5fbbab943e750dc83ed4cb6450b83ea7">seqNum</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Network layer sequence number. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ade22f0280705a8bc6ffbcddeb53a13e2"></a><!-- doxytag: member="Flood::defaultTtl" ref="ade22f0280705a8bc6ffbcddeb53a13e2" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#ade22f0280705a8bc6ffbcddeb53a13e2">defaultTtl</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default time-to-live (ttl) used for this module. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a475a6974782a10907352b83c18b63a21"></a><!-- doxytag: member="Flood::plainFlooding" ref="a475a6974782a10907352b83c18b63a21" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a475a6974782a10907352b83c18b63a21">plainFlooding</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Defines whether to use plain flooding or not. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa791a274b5cca9a70f8a484d0b4d9f25"></a><!-- doxytag: member="Flood::bcMsgs" ref="aa791a274b5cca9a70f8a484d0b4d9f25" args="" -->
cBroadcastList&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#aa791a274b5cca9a70f8a484d0b4d9f25">bcMsgs</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">List of already broadcasted messages. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8573f479f7cebbcf51efc90d5068b4a3"></a><!-- doxytag: member="Flood::bcMaxEntries" ref="a8573f479f7cebbcf51efc90d5068b4a3" args="" -->
unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a8573f479f7cebbcf51efc90d5068b4a3">bcMaxEntries</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Max number of entries in the list of already broadcasted messages. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0ebe4588526fe16bede5b8fb75506265"></a><!-- doxytag: member="Flood::bcDelTime" ref="a0ebe4588526fe16bede5b8fb75506265" args="" -->
simtime_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a0ebe4588526fe16bede5b8fb75506265">bcDelTime</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Time after which an entry for an already broadcasted msg can be deleted. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa261dbd0a1c54f07da4e8fa13a07b821"></a><!-- doxytag: member="Flood::nbDataPacketsReceived" ref="aa261dbd0a1c54f07da4e8fa13a07b821" args="" -->
long&nbsp;</td><td class="memItemRight" valign="bottom"><b>nbDataPacketsReceived</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afe0eabe3bfd53e1195e3876f8b18b520"></a><!-- doxytag: member="Flood::nbDataPacketsSent" ref="afe0eabe3bfd53e1195e3876f8b18b520" args="" -->
long&nbsp;</td><td class="memItemRight" valign="bottom"><b>nbDataPacketsSent</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aceac6b52cb227c09f3f3d8d2b7e12f55"></a><!-- doxytag: member="Flood::nbDataPacketsForwarded" ref="aceac6b52cb227c09f3f3d8d2b7e12f55" args="" -->
long&nbsp;</td><td class="memItemRight" valign="bottom"><b>nbDataPacketsForwarded</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae102cca4d79c56b99bc641688465ffc4"></a><!-- doxytag: member="Flood::nbHops" ref="ae102cca4d79c56b99bc641688465ffc4" args="" -->
long&nbsp;</td><td class="memItemRight" valign="bottom"><b>nbHops</b></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>A simple flooding protocol. </p>
<p>This implementation uses plain flooding, i.e. it "remembers" (stores) already broadcasted messages in a list and does not rebroadcast them again, if it gets another copy of that message.</p>
<p>The maximum number of entires for that list can be defined in the .ini file (<a class="el" href="a00091.html#a8573f479f7cebbcf51efc90d5068b4a3">bcMaxEntries</a>) as well as the time after which an entry is deleted (<a class="el" href="a00091.html#a0ebe4588526fe16bede5b8fb75506265">bcDelTime</a>).</p>
<p>If you prefere a memory-less version you can comment out the </p>
<div class="fragment"><pre class="fragment">#define PLAINFLOODING </pre></div><dl class="author"><dt><b>Author:</b></dt><dd>Daniel Willkomm</dd></dl>
<p>ported to Mixim 2.0 by Theodoros Kapourniotis </p>

<p>Definition at line <a class="el" href="a00384_source.html#l00052">52</a> of file <a class="el" href="a00384_source.html">Flood.h</a>.</p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ab040d65ebb443a447e6ab9460d3f0f8f"></a><!-- doxytag: member="Flood::encapsMsg" ref="ab040d65ebb443a447e6ab9460d3f0f8f" args="(cPacket *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NetwPkt * Flood::encapsMsg </td>
          <td>(</td>
          <td class="paramtype">cPacket *&nbsp;</td>
          <td class="paramname"> <em>appPkt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Encapsulate higher layer packet into an NetwPkt. </p>
<p>Encapsulates the received ApplPkt into a NetwPkt and set all needed header fields. </p>

<p>Reimplemented from <a class="el" href="a00025.html#ab3da21cae2c9e90d48534f064893ed4a">BaseNetwLayer</a>.</p>

<p>Definition at line <a class="el" href="a00383_source.html#l00243">243</a> of file <a class="el" href="a00383_source.html">Flood.cc</a>.</p>

<p>References <a class="el" href="a00290_source.html#l00090">NetwControlInfo::getAddressFromControlInfo()</a>, <a class="el" href="a00249_source.html#l00069">BaseNetwLayer::headerLength</a>, <a class="el" href="a00295_source.html#l00060">LAddress::L2BROADCAST</a>, <a class="el" href="a00295_source.html#l00064">LAddress::L3BROADCAST</a>, <a class="el" href="a00249_source.html#l00075">BaseNetwLayer::myNetwAddr</a>, and <a class="el" href="a00248_source.html#l00180">BaseNetwLayer::setDownControlInfo()</a>.</p>

<p>Referenced by <a class="el" href="a00383_source.html#l00094">handleUpperMsg()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00243"></a>00243                                          {
<a name="l00244"></a>00244     <a class="code" href="a00105.html#aea56b60dcb5ae8c2bde465271daf7210" title="Type definition for a L2 (MAC) address.">LAddress::L2Type</a> macAddr;
<a name="l00245"></a>00245     <a class="code" href="a00105.html#ad85cd9e8d9e7e9cd5d02dd740c4a12a4" title="Type definition for a L3 (Network) address.">LAddress::L3Type</a> netwAddr;
<a name="l00246"></a>00246 
<a name="l00247"></a>00247     EV&lt;&lt;<span class="stringliteral">&quot;in encaps...\n&quot;</span>;
<a name="l00248"></a>00248 
<a name="l00249"></a>00249     NetwPkt *pkt = <span class="keyword">new</span> NetwPkt(appPkt-&gt;getName(), appPkt-&gt;getKind());
<a name="l00250"></a>00250     pkt-&gt;setBitLength(<a class="code" href="a00025.html#a9b802bd94a739e6202690d743ecc83a2" title="Length of the NetwPkt header Read from omnetpp.ini.">headerLength</a>);
<a name="l00251"></a>00251 
<a name="l00252"></a>00252     cObject* cInfo = appPkt-&gt;removeControlInfo();
<a name="l00253"></a>00253 
<a name="l00254"></a>00254     <span class="keywordflow">if</span>(cInfo == NULL){
<a name="l00255"></a>00255   EV &lt;&lt; <span class="stringliteral">&quot;warning: Application layer did not specifiy a destination L3 address\n&quot;</span>
<a name="l00256"></a>00256      &lt;&lt; <span class="stringliteral">&quot;\tusing broadcast address instead\n&quot;</span>;
<a name="l00257"></a>00257   netwAddr = <a class="code" href="a00105.html#a11d63e8d897e072ed94da77028d38f60" title="Broadcast address for L3 addresses.">LAddress::L3BROADCAST</a>;
<a name="l00258"></a>00258     } <span class="keywordflow">else</span> {
<a name="l00259"></a>00259   EV &lt;&lt;<span class="stringliteral">&quot;CInfo removed, netw addr=&quot;</span>&lt;&lt; <a class="code" href="a00135.html#a75c4c6c2073fcd17b73583b7243e8d21" title="extracts the address from &amp;quot;control info&amp;quot;.">NetwControlInfo::getAddressFromControlInfo</a>( cInfo ) &lt;&lt;endl;
<a name="l00260"></a>00260         netwAddr = <a class="code" href="a00135.html#a75c4c6c2073fcd17b73583b7243e8d21" title="extracts the address from &amp;quot;control info&amp;quot;.">NetwControlInfo::getAddressFromControlInfo</a>( cInfo );
<a name="l00261"></a>00261   <span class="keyword">delete</span> cInfo;
<a name="l00262"></a>00262     }
<a name="l00263"></a>00263 
<a name="l00264"></a>00264     pkt-&gt;setSrcAddr(<a class="code" href="a00025.html#a7df0d33fcf757b2e63af619f28bf3312" title="cached variable of my networ address">myNetwAddr</a>);
<a name="l00265"></a>00265     pkt-&gt;setDestAddr(netwAddr);
<a name="l00266"></a>00266     EV &lt;&lt; <span class="stringliteral">&quot; netw &quot;</span>&lt;&lt; <a class="code" href="a00025.html#a7df0d33fcf757b2e63af619f28bf3312" title="cached variable of my networ address">myNetwAddr</a> &lt;&lt; <span class="stringliteral">&quot; sending packet&quot;</span> &lt;&lt;endl;
<a name="l00267"></a>00267 
<a name="l00268"></a>00268     EV &lt;&lt; <span class="stringliteral">&quot;sendDown: nHop=L3BROADCAST -&gt; message has to be broadcasted&quot;</span>
<a name="l00269"></a>00269        &lt;&lt; <span class="stringliteral">&quot; -&gt; set destMac=L2BROADCAST&quot;</span> &lt;&lt; endl;
<a name="l00270"></a>00270     macAddr = <a class="code" href="a00105.html#a9f975ad0433f1fb8a01164f266a41f62" title="Broadcast address for L2 addresses.">LAddress::L2BROADCAST</a>;
<a name="l00271"></a>00271 
<a name="l00272"></a>00272     <a class="code" href="a00025.html#a627a9f853785bc061b1423ac6ad9ad21" title="Attaches a &amp;quot;control info&amp;quot; (NetwToMac) structure (object) to the message...">setDownControlInfo</a>(pkt, macAddr);
<a name="l00273"></a>00273 
<a name="l00274"></a>00274     <span class="comment">//encapsulate the application packet</span>
<a name="l00275"></a>00275     pkt-&gt;encapsulate(appPkt);
<a name="l00276"></a>00276     EV &lt;&lt;<span class="stringliteral">&quot; pkt encapsulated\n&quot;</span>;
<a name="l00277"></a>00277     <span class="keywordflow">return</span> pkt;
<a name="l00278"></a>00278 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac8c12c3b58ff0f5092b2326f694a509e"></a><!-- doxytag: member="Flood::handleLowerMsg" ref="ac8c12c3b58ff0f5092b2326f694a509e" args="(cMessage *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Flood::handleLowerMsg </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>m</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle messages from lower layer. </p>
<p>Messages from the mac layer will be forwarded to the application only if the are broadcast or destined for this node.</p>
<p>If the arrived message is a broadcast message it is also reflooded only if the tll field is bigger than one. Before the message is handed back to the mac layer the ttl field is reduced by one to account for this hop.</p>
<p>In the case of plain flooding the message will only be processed if there is no corresponding entry in the bcMsgs list (<a class="el" href="a00091.html#a2db7cb247083f81504dd2b52a583e9eb">notBroadcasted</a>). Otherwise the message will be deleted. </p>

<p>Reimplemented from <a class="el" href="a00025.html#a58afc64e0a96fe4d80d6b9f53cfd53c6">BaseNetwLayer</a>.</p>

<p>Definition at line <a class="el" href="a00383_source.html#l00142">142</a> of file <a class="el" href="a00383_source.html">Flood.cc</a>.</p>

<p>References <a class="el" href="a00248_source.html#l00064">BaseNetwLayer::decapsMsg()</a>, <a class="el" href="a00384_source.html#l00059">defaultTtl</a>, <a class="el" href="a00295_source.html#l00087">LAddress::isL3Broadcast()</a>, <a class="el" href="a00295_source.html#l00060">LAddress::L2BROADCAST</a>, <a class="el" href="a00249_source.html#l00075">BaseNetwLayer::myNetwAddr</a>, <a class="el" href="a00383_source.html#l00212">notBroadcasted()</a>, <a class="el" href="a00240_source.html#l00110">BaseLayer::sendDown()</a>, <a class="el" href="a00240_source.html#l00115">BaseLayer::sendUp()</a>, and <a class="el" href="a00248_source.html#l00180">BaseNetwLayer::setDownControlInfo()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00142"></a>00142                                       {
<a name="l00143"></a>00143   NetwPkt *msg = <span class="keyword">static_cast&lt;</span>NetwPkt *<span class="keyword">&gt;</span> (m);
<a name="l00144"></a>00144 
<a name="l00145"></a>00145   <span class="comment">//msg not broadcastes yet</span>
<a name="l00146"></a>00146   <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a2db7cb247083f81504dd2b52a583e9eb" title="Checks whether a message was already broadcasted.">notBroadcasted</a>(msg)) {
<a name="l00147"></a>00147     <span class="comment">//msg is for me</span>
<a name="l00148"></a>00148     <span class="keywordflow">if</span> (msg-&gt;getDestAddr() == <a class="code" href="a00025.html#a7df0d33fcf757b2e63af619f28bf3312" title="cached variable of my networ address">myNetwAddr</a>) {
<a name="l00149"></a>00149       EV&lt;&lt;<span class="stringliteral">&quot; data msg for me! send to Upper&quot;</span>&lt;&lt;endl;
<a name="l00150"></a>00150       nbHops = nbHops + (<a class="code" href="a00091.html#ade22f0280705a8bc6ffbcddeb53a13e2" title="Default time-to-live (ttl) used for this module.">defaultTtl</a> + 1 - msg-&gt;getTtl());
<a name="l00151"></a>00151       <a class="code" href="a00021.html#adbf061566606041db811b519f0400ed5" title="Sends a message to the upper layer.">sendUp</a>( <a class="code" href="a00025.html#addca7d4968a09f46dcfc2da9737e2f8e" title="decapsulate higher layer message from NetwPkt">decapsMsg</a>(msg) );
<a name="l00152"></a>00152       nbDataPacketsReceived++;
<a name="l00153"></a>00153     }
<a name="l00154"></a>00154     <span class="comment">//broadcast message</span>
<a name="l00155"></a>00155     <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="a00105.html#a97a5c1c1f73f4255cabc4e292c4ad503" title="Test if a L3 address (pSrcAddr) is a broadcast address.">LAddress::isL3Broadcast</a>(msg-&gt;getDestAddr()) ) {
<a name="l00156"></a>00156       <span class="comment">//check ttl and rebroadcast</span>
<a name="l00157"></a>00157       <span class="keywordflow">if</span>( msg-&gt;getTtl() &gt; 1 ) {
<a name="l00158"></a>00158         NetwPkt *dMsg;
<a name="l00159"></a>00159         EV &lt;&lt;<span class="stringliteral">&quot; data msg BROADCAST! ttl = &quot;</span>&lt;&lt;msg-&gt;getTtl()
<a name="l00160"></a>00160         &lt;&lt;<span class="stringliteral">&quot; &gt; 1 -&gt; rebroadcast msg &amp; send to upper\n&quot;</span>;
<a name="l00161"></a>00161         msg-&gt;setTtl( msg-&gt;getTtl()-1 );
<a name="l00162"></a>00162         dMsg = <span class="keyword">static_cast&lt;</span>NetwPkt*<span class="keyword">&gt;</span>(msg-&gt;dup());
<a name="l00163"></a>00163         <a class="code" href="a00025.html#a627a9f853785bc061b1423ac6ad9ad21" title="Attaches a &amp;quot;control info&amp;quot; (NetwToMac) structure (object) to the message...">setDownControlInfo</a>(dMsg, <a class="code" href="a00105.html#a9f975ad0433f1fb8a01164f266a41f62" title="Broadcast address for L2 addresses.">LAddress::L2BROADCAST</a>);
<a name="l00164"></a>00164         <a class="code" href="a00021.html#a1873d6e3fc6d92cf8482b39f1c5ac6c8" title="Sends a message to the lower layer.">sendDown</a>(dMsg);
<a name="l00165"></a>00165         nbDataPacketsForwarded++;
<a name="l00166"></a>00166       }
<a name="l00167"></a>00167       <span class="keywordflow">else</span>
<a name="l00168"></a>00168       EV &lt;&lt;<span class="stringliteral">&quot; max hops reached (ttl = &quot;</span>&lt;&lt;msg-&gt;getTtl()&lt;&lt;<span class="stringliteral">&quot;) -&gt; only send to upper\n&quot;</span>;
<a name="l00169"></a>00169 
<a name="l00170"></a>00170       <span class="comment">// message has to be forwarded to upper layer</span>
<a name="l00171"></a>00171       nbHops = nbHops + (<a class="code" href="a00091.html#ade22f0280705a8bc6ffbcddeb53a13e2" title="Default time-to-live (ttl) used for this module.">defaultTtl</a> + 1 - msg-&gt;getTtl());
<a name="l00172"></a>00172       <a class="code" href="a00021.html#adbf061566606041db811b519f0400ed5" title="Sends a message to the upper layer.">sendUp</a>( <a class="code" href="a00025.html#addca7d4968a09f46dcfc2da9737e2f8e" title="decapsulate higher layer message from NetwPkt">decapsMsg</a>(msg) );
<a name="l00173"></a>00173       nbDataPacketsReceived++;
<a name="l00174"></a>00174     }
<a name="l00175"></a>00175     <span class="comment">//not for me -&gt; rebroadcast</span>
<a name="l00176"></a>00176     <span class="keywordflow">else</span> {
<a name="l00177"></a>00177       <span class="comment">//check ttl and rebroadcast</span>
<a name="l00178"></a>00178       <span class="keywordflow">if</span>( msg-&gt;getTtl() &gt; 1 ) {
<a name="l00179"></a>00179         EV &lt;&lt;<span class="stringliteral">&quot; data msg not for me! ttl = &quot;</span>&lt;&lt;msg-&gt;getTtl()
<a name="l00180"></a>00180         &lt;&lt;<span class="stringliteral">&quot; &gt; 1 -&gt; forward\n&quot;</span>;
<a name="l00181"></a>00181         msg-&gt;setTtl( msg-&gt;getTtl()-1 );
<a name="l00182"></a>00182         <span class="comment">// needs to set the next hop address again to broadcast</span>
<a name="l00183"></a>00183         cObject *<span class="keyword">const</span> pCtrlInfo = msg-&gt;removeControlInfo();
<a name="l00184"></a>00184         <span class="keywordflow">if</span> (pCtrlInfo != NULL)
<a name="l00185"></a>00185           <span class="keyword">delete</span> pCtrlInfo;
<a name="l00186"></a>00186         <a class="code" href="a00025.html#a627a9f853785bc061b1423ac6ad9ad21" title="Attaches a &amp;quot;control info&amp;quot; (NetwToMac) structure (object) to the message...">setDownControlInfo</a>(msg, <a class="code" href="a00105.html#a9f975ad0433f1fb8a01164f266a41f62" title="Broadcast address for L2 addresses.">LAddress::L2BROADCAST</a>);
<a name="l00187"></a>00187         <a class="code" href="a00021.html#a1873d6e3fc6d92cf8482b39f1c5ac6c8" title="Sends a message to the lower layer.">sendDown</a>( msg );
<a name="l00188"></a>00188         nbDataPacketsForwarded++;
<a name="l00189"></a>00189       }
<a name="l00190"></a>00190       <span class="keywordflow">else</span> {
<a name="l00191"></a>00191         <span class="comment">//max hops reached -&gt; delete</span>
<a name="l00192"></a>00192         EV &lt;&lt;<span class="stringliteral">&quot; max hops reached (ttl = &quot;</span>&lt;&lt;msg-&gt;getTtl()&lt;&lt;<span class="stringliteral">&quot;) -&gt; delete msg\n&quot;</span>;
<a name="l00193"></a>00193         <span class="keyword">delete</span> msg;
<a name="l00194"></a>00194       }
<a name="l00195"></a>00195     }
<a name="l00196"></a>00196   }
<a name="l00197"></a>00197   <span class="keywordflow">else</span> {
<a name="l00198"></a>00198     EV &lt;&lt;<span class="stringliteral">&quot; data msg already BROADCASTed! delete msg\n&quot;</span>;
<a name="l00199"></a>00199     <span class="keyword">delete</span> msg;
<a name="l00200"></a>00200   }
<a name="l00201"></a>00201 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a37fea31a3b2493ee86f1b3efa7dd885a"></a><!-- doxytag: member="Flood::handleUpperMsg" ref="a37fea31a3b2493ee86f1b3efa7dd885a" args="(cMessage *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Flood::handleUpperMsg </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>m</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle messages from upper layer. </p>
<p>All messages have to get a sequence number and the ttl filed has to be specified. Afterwards the messages can be handed to the mac layer. The mac address is set to -1 (broadcast address) because the message is flooded (i.e. has to be send to all neighbors)</p>
<p>In the case of plain flooding the message sequence number and source address has also be stored in the bcMsgs list, so that this message will not be rebroadcasted, if a copy will be flooded back from the neigbouring nodes.</p>
<p>If the maximum number of entries is reached the first (oldest) entry is deleted. </p>

<p>Reimplemented from <a class="el" href="a00025.html#a0b473fbb2517ac7b0c633afdb002c269">BaseNetwLayer</a>.</p>

<p>Definition at line <a class="el" href="a00383_source.html#l00094">94</a> of file <a class="el" href="a00383_source.html">Flood.cc</a>.</p>

<p>References <a class="el" href="a00384_source.html#l00090">bcDelTime</a>, <a class="el" href="a00384_source.html#l00084">bcMaxEntries</a>, <a class="el" href="a00384_source.html#l00078">bcMsgs</a>, <a class="el" href="a00384_source.html#l00059">defaultTtl</a>, <a class="el" href="a00383_source.html#l00243">encapsMsg()</a>, <a class="el" href="a00384_source.html#l00062">plainFlooding</a>, <a class="el" href="a00240_source.html#l00110">BaseLayer::sendDown()</a>, and <a class="el" href="a00384_source.html#l00056">seqNum</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00094"></a>00094                                       {
<a name="l00095"></a>00095 
<a name="l00096"></a>00096   assert(dynamic_cast&lt;cPacket*&gt; (m));
<a name="l00097"></a>00097   NetwPkt *msg = <a class="code" href="a00091.html#ab040d65ebb443a447e6ab9460d3f0f8f" title="Encapsulate higher layer packet into an NetwPkt.">encapsMsg</a>(static_cast&lt;cPacket*&gt; (m));
<a name="l00098"></a>00098 
<a name="l00099"></a>00099   msg-&gt;setSeqNum(<a class="code" href="a00091.html#a5fbbab943e750dc83ed4cb6450b83ea7" title="Network layer sequence number.">seqNum</a>);
<a name="l00100"></a>00100   <a class="code" href="a00091.html#a5fbbab943e750dc83ed4cb6450b83ea7" title="Network layer sequence number.">seqNum</a>++;
<a name="l00101"></a>00101   msg-&gt;setTtl(<a class="code" href="a00091.html#ade22f0280705a8bc6ffbcddeb53a13e2" title="Default time-to-live (ttl) used for this module.">defaultTtl</a>);
<a name="l00102"></a>00102 
<a name="l00103"></a>00103   <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a475a6974782a10907352b83c18b63a21" title="Defines whether to use plain flooding or not.">plainFlooding</a>) {
<a name="l00104"></a>00104     <span class="keywordflow">if</span> (<a class="code" href="a00091.html#aa791a274b5cca9a70f8a484d0b4d9f25" title="List of already broadcasted messages.">bcMsgs</a>.size() &gt;= <a class="code" href="a00091.html#a8573f479f7cebbcf51efc90d5068b4a3" title="Max number of entries in the list of already broadcasted messages.">bcMaxEntries</a>) {
<a name="l00105"></a>00105       cBroadcastList::iterator it;
<a name="l00106"></a>00106 
<a name="l00107"></a>00107       <span class="comment">//serach the broadcast list of outdated entries and delete them</span>
<a name="l00108"></a>00108       <span class="keywordflow">for</span> (it = <a class="code" href="a00091.html#aa791a274b5cca9a70f8a484d0b4d9f25" title="List of already broadcasted messages.">bcMsgs</a>.begin(); it != <a class="code" href="a00091.html#aa791a274b5cca9a70f8a484d0b4d9f25" title="List of already broadcasted messages.">bcMsgs</a>.end(); ++it) {
<a name="l00109"></a>00109         <span class="keywordflow">if</span> (it-&gt;delTime &lt; simTime()) {
<a name="l00110"></a>00110           <a class="code" href="a00091.html#aa791a274b5cca9a70f8a484d0b4d9f25" title="List of already broadcasted messages.">bcMsgs</a>.erase(it);
<a name="l00111"></a>00111           it--;
<a name="l00112"></a>00112           <span class="keywordflow">break</span>;
<a name="l00113"></a>00113         }
<a name="l00114"></a>00114       }
<a name="l00115"></a>00115       <span class="comment">//delete oldest entry if max size is reached</span>
<a name="l00116"></a>00116       <span class="keywordflow">if</span> (<a class="code" href="a00091.html#aa791a274b5cca9a70f8a484d0b4d9f25" title="List of already broadcasted messages.">bcMsgs</a>.size() &gt;= <a class="code" href="a00091.html#a8573f479f7cebbcf51efc90d5068b4a3" title="Max number of entries in the list of already broadcasted messages.">bcMaxEntries</a>) {
<a name="l00117"></a>00117         EV&lt;&lt;<span class="stringliteral">&quot;bcMsgs is full, delete oldest entry&quot;</span>&lt;&lt;endl;
<a name="l00118"></a>00118         <a class="code" href="a00091.html#aa791a274b5cca9a70f8a484d0b4d9f25" title="List of already broadcasted messages.">bcMsgs</a>.pop_front();
<a name="l00119"></a>00119       }
<a name="l00120"></a>00120     }
<a name="l00121"></a>00121     <a class="code" href="a00091.html#aa791a274b5cca9a70f8a484d0b4d9f25" title="List of already broadcasted messages.">bcMsgs</a>.push_back(Bcast(msg-&gt;getSeqNum(), msg-&gt;getSrcAddr(), simTime() +<a class="code" href="a00091.html#a0ebe4588526fe16bede5b8fb75506265" title="Time after which an entry for an already broadcasted msg can be deleted.">bcDelTime</a>));
<a name="l00122"></a>00122     }
<a name="l00123"></a>00123         <span class="comment">//there is no routing so all messages are broadacst for the mac layer</span>
<a name="l00124"></a>00124 
<a name="l00125"></a>00125         <a class="code" href="a00021.html#a1873d6e3fc6d92cf8482b39f1c5ac6c8" title="Sends a message to the lower layer.">sendDown</a>(msg);
<a name="l00126"></a>00126         nbDataPacketsSent++;
<a name="l00127"></a>00127       }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab47e1d524db55d57edc7f86db5d92735"></a><!-- doxytag: member="Flood::initialize" ref="ab47e1d524db55d57edc7f86db5d92735" args="(int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Flood::initialize </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stage</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialization of omnetpp.ini parameters. </p>
<p>Reads all parameters from the ini file. If a parameter is not specified in the ini file a default value will be set. </p>

<p>Reimplemented from <a class="el" href="a00025.html#a1e521b5549bfe29ae94d95265c0fe8d2">BaseNetwLayer</a>.</p>

<p>Definition at line <a class="el" href="a00383_source.html#l00038">38</a> of file <a class="el" href="a00383_source.html">Flood.cc</a>.</p>

<p>References <a class="el" href="a00384_source.html#l00090">bcDelTime</a>, <a class="el" href="a00384_source.html#l00084">bcMaxEntries</a>, <a class="el" href="a00384_source.html#l00059">defaultTtl</a>, <a class="el" href="a00384_source.html#l00062">plainFlooding</a>, and <a class="el" href="a00384_source.html#l00056">seqNum</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00038"></a>00038                                 {
<a name="l00039"></a>00039   <a class="code" href="a00091.html#ab47e1d524db55d57edc7f86db5d92735" title="Initialization of omnetpp.ini parameters.">BaseNetwLayer::initialize</a>(stage);
<a name="l00040"></a>00040 
<a name="l00041"></a>00041   <span class="keywordflow">if</span> (stage == 0) {
<a name="l00042"></a>00042     <span class="comment">//initialize seqence number to 0</span>
<a name="l00043"></a>00043     <a class="code" href="a00091.html#a5fbbab943e750dc83ed4cb6450b83ea7" title="Network layer sequence number.">seqNum</a> = 0;
<a name="l00044"></a>00044     nbDataPacketsReceived = 0;
<a name="l00045"></a>00045     nbDataPacketsSent = 0;
<a name="l00046"></a>00046     nbDataPacketsForwarded = 0;
<a name="l00047"></a>00047     nbHops = 0;
<a name="l00048"></a>00048     hasPar(<span class="stringliteral">&quot;defaultTtl&quot;</span>) ? <a class="code" href="a00091.html#ade22f0280705a8bc6ffbcddeb53a13e2" title="Default time-to-live (ttl) used for this module.">defaultTtl</a> = par(<span class="stringliteral">&quot;defaultTtl&quot;</span>) : <a class="code" href="a00091.html#ade22f0280705a8bc6ffbcddeb53a13e2" title="Default time-to-live (ttl) used for this module.">defaultTtl</a> = 5;
<a name="l00049"></a>00049     hasPar(<span class="stringliteral">&quot;plainFlooding&quot;</span>) ? <a class="code" href="a00091.html#a475a6974782a10907352b83c18b63a21" title="Defines whether to use plain flooding or not.">plainFlooding</a> = par(<span class="stringliteral">&quot;plainFlooding&quot;</span>)
<a name="l00050"></a>00050         : <a class="code" href="a00091.html#a475a6974782a10907352b83c18b63a21" title="Defines whether to use plain flooding or not.">plainFlooding</a> = true;
<a name="l00051"></a>00051 
<a name="l00052"></a>00052     EV&lt;&lt; <span class="stringliteral">&quot;defaultTtl = &quot;</span> &lt;&lt; <a class="code" href="a00091.html#ade22f0280705a8bc6ffbcddeb53a13e2" title="Default time-to-live (ttl) used for this module.">defaultTtl</a>
<a name="l00053"></a>00053     &lt;&lt; <span class="stringliteral">&quot; plainFlooding = &quot;</span> &lt;&lt; <a class="code" href="a00091.html#a475a6974782a10907352b83c18b63a21" title="Defines whether to use plain flooding or not.">plainFlooding</a> &lt;&lt; endl;
<a name="l00054"></a>00054 
<a name="l00055"></a>00055     <span class="keywordflow">if</span>(<a class="code" href="a00091.html#a475a6974782a10907352b83c18b63a21" title="Defines whether to use plain flooding or not.">plainFlooding</a>) {
<a name="l00056"></a>00056       <span class="comment">//these parameters are only needed for plain flooding</span>
<a name="l00057"></a>00057       hasPar(<span class="stringliteral">&quot;bcMaxEntries&quot;</span>) ? <a class="code" href="a00091.html#a8573f479f7cebbcf51efc90d5068b4a3" title="Max number of entries in the list of already broadcasted messages.">bcMaxEntries</a> = par(<span class="stringliteral">&quot;bcMaxEntries&quot;</span>) : <a class="code" href="a00091.html#a8573f479f7cebbcf51efc90d5068b4a3" title="Max number of entries in the list of already broadcasted messages.">bcMaxEntries</a> = 30;
<a name="l00058"></a>00058 
<a name="l00059"></a>00059       hasPar(<span class="stringliteral">&quot;bcDelTime&quot;</span>) ? <a class="code" href="a00091.html#a0ebe4588526fe16bede5b8fb75506265" title="Time after which an entry for an already broadcasted msg can be deleted.">bcDelTime</a> = par(<span class="stringliteral">&quot;bcDelTime&quot;</span>) : <a class="code" href="a00091.html#a0ebe4588526fe16bede5b8fb75506265" title="Time after which an entry for an already broadcasted msg can be deleted.">bcDelTime</a> = 3.0;
<a name="l00060"></a>00060       EV &lt;&lt;<span class="stringliteral">&quot;bcMaxEntries = &quot;</span>&lt;&lt;<a class="code" href="a00091.html#a8573f479f7cebbcf51efc90d5068b4a3" title="Max number of entries in the list of already broadcasted messages.">bcMaxEntries</a>
<a name="l00061"></a>00061       &lt;&lt;<span class="stringliteral">&quot; bcDelTime = &quot;</span>&lt;&lt;<a class="code" href="a00091.html#a0ebe4588526fe16bede5b8fb75506265" title="Time after which an entry for an already broadcasted msg can be deleted.">bcDelTime</a>&lt;&lt;endl;
<a name="l00062"></a>00062     }
<a name="l00063"></a>00063   }
<a name="l00064"></a>00064 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2db7cb247083f81504dd2b52a583e9eb"></a><!-- doxytag: member="Flood::notBroadcasted" ref="a2db7cb247083f81504dd2b52a583e9eb" args="(NetwPkt *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Flood::notBroadcasted </td>
          <td>(</td>
          <td class="paramtype">NetwPkt *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks whether a message was already broadcasted. </p>
<p>The bcMsgs list is searched for the arrived message. If the message is in the list, it was already broadcasted and the function returns false.</p>
<p>Concurrently all outdated (older than bcDelTime) are deleted. If the list is full and a new message has to be entered, the oldest entry is deleted. </p>

<p>Definition at line <a class="el" href="a00383_source.html#l00212">212</a> of file <a class="el" href="a00383_source.html">Flood.cc</a>.</p>

<p>References <a class="el" href="a00384_source.html#l00090">bcDelTime</a>, <a class="el" href="a00384_source.html#l00084">bcMaxEntries</a>, <a class="el" href="a00384_source.html#l00078">bcMsgs</a>, and <a class="el" href="a00384_source.html#l00062">plainFlooding</a>.</p>

<p>Referenced by <a class="el" href="a00383_source.html#l00142">handleLowerMsg()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00212"></a>00212                                        {
<a name="l00213"></a>00213   <span class="keywordflow">if</span> (!<a class="code" href="a00091.html#a475a6974782a10907352b83c18b63a21" title="Defines whether to use plain flooding or not.">plainFlooding</a>)
<a name="l00214"></a>00214     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00215"></a>00215 
<a name="l00216"></a>00216   cBroadcastList::iterator it;
<a name="l00217"></a>00217 
<a name="l00218"></a>00218   <span class="comment">//serach the broadcast list of outdated entries and delete them</span>
<a name="l00219"></a>00219   <span class="keywordflow">for</span> (it = <a class="code" href="a00091.html#aa791a274b5cca9a70f8a484d0b4d9f25" title="List of already broadcasted messages.">bcMsgs</a>.begin(); it != <a class="code" href="a00091.html#aa791a274b5cca9a70f8a484d0b4d9f25" title="List of already broadcasted messages.">bcMsgs</a>.end(); it++) {
<a name="l00220"></a>00220     <span class="keywordflow">if</span> (it-&gt;delTime &lt; simTime()) {
<a name="l00221"></a>00221       <a class="code" href="a00091.html#aa791a274b5cca9a70f8a484d0b4d9f25" title="List of already broadcasted messages.">bcMsgs</a>.erase(it);
<a name="l00222"></a>00222       it--;
<a name="l00223"></a>00223     }
<a name="l00224"></a>00224     <span class="comment">//message was already broadcasted</span>
<a name="l00225"></a>00225     <span class="keywordflow">if</span> ((it-&gt;srcAddr == msg-&gt;getSrcAddr()) &amp;&amp; (it-&gt;seqNum
<a name="l00226"></a>00226         == msg-&gt;getSeqNum())) {
<a name="l00227"></a>00227       <span class="comment">// update entry</span>
<a name="l00228"></a>00228       it-&gt;delTime = simTime() + <a class="code" href="a00091.html#a0ebe4588526fe16bede5b8fb75506265" title="Time after which an entry for an already broadcasted msg can be deleted.">bcDelTime</a>;
<a name="l00229"></a>00229       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00230"></a>00230     }
<a name="l00231"></a>00231   }
<a name="l00232"></a>00232 
<a name="l00233"></a>00233   <span class="comment">//delete oldest entry if max size is reached</span>
<a name="l00234"></a>00234   <span class="keywordflow">if</span> (<a class="code" href="a00091.html#aa791a274b5cca9a70f8a484d0b4d9f25" title="List of already broadcasted messages.">bcMsgs</a>.size() &gt;= <a class="code" href="a00091.html#a8573f479f7cebbcf51efc90d5068b4a3" title="Max number of entries in the list of already broadcasted messages.">bcMaxEntries</a>) {
<a name="l00235"></a>00235     EV&lt;&lt;<span class="stringliteral">&quot;bcMsgs is full, delete oldest entry\n&quot;</span>;
<a name="l00236"></a>00236     <a class="code" href="a00091.html#aa791a274b5cca9a70f8a484d0b4d9f25" title="List of already broadcasted messages.">bcMsgs</a>.pop_front();
<a name="l00237"></a>00237   }
<a name="l00238"></a>00238 
<a name="l00239"></a>00239   <a class="code" href="a00091.html#aa791a274b5cca9a70f8a484d0b4d9f25" title="List of already broadcasted messages.">bcMsgs</a>.push_back(Bcast(msg-&gt;getSeqNum(), msg-&gt;getSrcAddr(), simTime() +<a class="code" href="a00091.html#a0ebe4588526fe16bede5b8fb75506265" title="Time after which an entry for an already broadcasted msg can be deleted.">bcDelTime</a>));
<a name="l00240"></a>00240     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00241"></a>00241 }
</pre></div></p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/modules/netw/<a class="el" href="a00384_source.html">Flood.h</a></li>
<li>src/modules/netw/<a class="el" href="a00383_source.html">Flood.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed Dec 14 16:01:49 2011 for MiXiM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
