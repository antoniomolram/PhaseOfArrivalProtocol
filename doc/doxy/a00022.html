<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MiXiM: BaseMacLayer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>BaseMacLayer Class Reference<br/>
<small>
[<a class="el" href="a00444.html">macLayer - MAC layer modules</a>,&nbsp;<a class="el" href="a00451.html">baseModules - base module classes of MiXiM</a>]</small>
</h1><!-- doxytag: class="BaseMacLayer" --><!-- doxytag: inherits="BaseLayer" -->
<p>A very simple MAC module template which provides de- and encapsulation of messages using the standard addresses. It also provides basic handling of lower layer messages.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="a00243_source.html">BaseMacLayer.h</a>&gt;</code></p>

<p>Inherits <a class="el" href="a00021.html">BaseLayer</a>.</p>

<p>Inherited by <a class="el" href="a00033.html">BMacLayer</a>, <a class="el" href="a00064.html">csma</a>, <a class="el" href="a00066.html">CSMAMacLayer</a>, <a class="el" href="a00113.html">LMacLayer</a>, <a class="el" href="a00115.html">Mac80211</a>, and <a class="el" href="a00198.html">UWBIRMac</a>.</p>
<div class="dynheader">
Collaboration diagram for BaseMacLayer:</div>
<div class="dynsection">
<div class="center"><img src="a00510.png" border="0" usemap="#BaseMacLayer_coll__map" alt="Collaboration graph"/></div>
<map name="BaseMacLayer_coll__map" id="BaseMacLayer_coll__map">
<area shape="rect" href="a00021.html" title="A very simple layer template." alt="" coords="5,5,91,32"/><area shape="rect" href="a00119.html" title="Defines the methods provided by the phy to the mac layer." alt="" coords="115,5,251,32"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="a00511.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#a8f1f4f485d6548964c1f1cbd75d1d9c7">BaseMacMessageKinds</a> { <a class="el" href="a00022.html#a8f1f4f485d6548964c1f1cbd75d1d9c7a0e31be8e59c319e75d7a9858ff984a2f">LAST_BASE_MAC_MESSAGE_KIND</a> =  23000
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>Message kinds used by this layer. </p>
 <a href="a00022.html#a8f1f4f485d6548964c1f1cbd75d1d9c7">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#a49e0e548a6c20d002bd67afa7b76c483">BaseMacControlKinds</a> { <a class="el" href="a00022.html#a49e0e548a6c20d002bd67afa7b76c483a5e5e0e55f7cc75b0d8bad06a212371f1">TX_OVER</a> =  23500, 
<a class="el" href="a00022.html#a49e0e548a6c20d002bd67afa7b76c483adebf9c77bbe6f19772866cccbef0fe4b">PACKET_DROPPED</a>, 
<a class="el" href="a00022.html#a49e0e548a6c20d002bd67afa7b76c483a914b2cf7aab4597589adb15d8fec8b18">LAST_BASE_MAC_CONTROL_KIND</a>
 }</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><p>Control message kinds used by this layer. </p>
 <a href="a00022.html#a49e0e548a6c20d002bd67afa7b76c483">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a23cf7efcbdc6fd3f30c5e8209bb4e033"></a><!-- doxytag: member="BaseMacLayer::BaseMacLayer" ref="a23cf7efcbdc6fd3f30c5e8209bb4e033" args="(unsigned stacksize)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>BaseMacLayer</b> (unsigned stacksize)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#a61c82dc3b225eac37f7fa9936c28c2c3">initialize</a> (int)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialization of the module and some variables.  <a href="#a61c82dc3b225eac37f7fa9936c28c2c3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afc72edc0b6187b41d084195028b9b61a"></a><!-- doxytag: member="BaseMacLayer::getMACAddress" ref="afc72edc0b6187b41d084195028b9b61a" args="() const " -->
const <a class="el" href="a00105.html#aea56b60dcb5ae8c2bde465271daf7210">LAddress::L2Type</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#afc72edc0b6187b41d084195028b9b61a">getMACAddress</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the MAC address of this MAC module. <br/></td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adc87295362ca7859cb6fe2a5bbe3c90d"></a><!-- doxytag: member="BaseMacLayer::registerInterface" ref="adc87295362ca7859cb6fe2a5bbe3c90d" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#adc87295362ca7859cb6fe2a5bbe3c90d">registerInterface</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Registers this bridge's NIC with INET's InterfaceTable. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#a6de2ca07018de313a7147a03e6d77bff">handleUpperMsg</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle messages comming from the network layer.  <a href="#a6de2ca07018de313a7147a03e6d77bff"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#a413375cec02b990a521b62086a02264c">handleLowerMsg</a> (cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="add5277c1a60dab10db40c8d9641e48c4"></a><!-- doxytag: member="BaseMacLayer::handleSelfMsg" ref="add5277c1a60dab10db40c8d9641e48c4" args="(cMessage *)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#add5277c1a60dab10db40c8d9641e48c4">handleSelfMsg</a> (cMessage *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle self messages such as timer... <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a796d456d593dfab3188b37e506dd76a8"></a><!-- doxytag: member="BaseMacLayer::handleLowerControl" ref="a796d456d593dfab3188b37e506dd76a8" args="(cMessage *msg)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#a796d456d593dfab3188b37e506dd76a8">handleLowerControl</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle control messages from lower layer. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae4679596514426f66e66cb5ca9c29275"></a><!-- doxytag: member="BaseMacLayer::handleUpperControl" ref="ae4679596514426f66e66cb5ca9c29275" args="(cMessage *)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#ae4679596514426f66e66cb5ca9c29275">handleUpperControl</a> (cMessage *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handle control messages from upper layer. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual cPacket *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#ab5c40c53eda6e5a5041bddebfab6e0b6">decapsMsg</a> (MacPkt *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">decapsulate the network message from the MacPkt  <a href="#ab5c40c53eda6e5a5041bddebfab6e0b6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual MacPkt *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#a32d47cbd6940c09071e0f0e777cf6716">encapsMsg</a> (cPacket *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Encapsulate the NetwPkt into an MacPkt.  <a href="#a32d47cbd6940c09071e0f0e777cf6716"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="a00168.html">Signal</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#a28ca155ff241c3e202a94724cc87b232">createSignal</a> (simtime_t_cref start, simtime_t_cref length, double power, double bitrate)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a simple <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a> defined over time with the passed parameters.  <a href="#a28ca155ff241c3e202a94724cc87b232"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00121.html">Mapping</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#a1c05648ce7d11bc767f9acd3d64ee067">createConstantMapping</a> (simtime_t_cref start, simtime_t_cref end, Argument::mapped_type_cref value)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a simple <a class="el" href="a00121.html" title="Represents a changeable mapping (mathematical function) from at least time to Argument::mapped_type...">Mapping</a> with a constant curve progression at the passed value.  <a href="#a1c05648ce7d11bc767f9acd3d64ee067"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00121.html">Mapping</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#a23ed373dcfd98255df5f5ffa7e30eec6">createRectangleMapping</a> (simtime_t_cref start, simtime_t_cref end, Argument::mapped_type_cref value)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a simple <a class="el" href="a00121.html" title="Represents a changeable mapping (mathematical function) from at least time to Argument::mapped_type...">Mapping</a> with a constant curve progression at the passed value and discontinuities at the boundaries.  <a href="#a23ed373dcfd98255df5f5ffa7e30eec6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3da0a0f34a80528e6efcb5593a073c55"></a><!-- doxytag: member="BaseMacLayer::createSingleFrequencyMapping" ref="a3da0a0f34a80528e6efcb5593a073c55" args="(simtime_t_cref start, simtime_t_cref end, Argument::mapped_type_cref centerFreq, Argument::mapped_type_cref bandWith, Argument::mapped_type_cref value)" -->
<a class="el" href="a00055.html">ConstMapping</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#a3da0a0f34a80528e6efcb5593a073c55">createSingleFrequencyMapping</a> (simtime_t_cref start, simtime_t_cref end, Argument::mapped_type_cref centerFreq, Argument::mapped_type_cref bandWith, Argument::mapped_type_cref value)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a <a class="el" href="a00121.html" title="Represents a changeable mapping (mathematical function) from at least time to Argument::mapped_type...">Mapping</a> defined over time and frequency with constant power in a certain frequency band. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00015.html">BaseConnectionManager</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#a68f36d36168a8ba5c8a4c84c17f1ba40">getConnectionManager</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a pointer to this MACs NICs <a class="el" href="a00050.html" title="BaseConnectionManager implementation which only defines a specific max interference...">ConnectionManager</a> module.  <a href="#a68f36d36168a8ba5c8a4c84c17f1ba40"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual const <a class="el" href="a00105.html#aea56b60dcb5ae8c2bde465271daf7210">LAddress::L2Type</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#a48135ffa21044a71d92149d5301f9deb">getUpperDestinationFromControlInfo</a> (const cObject *const pCtrlInfo) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Extracts the MAC address from the "control info" structure (object).  <a href="#a48135ffa21044a71d92149d5301f9deb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual cObject *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#a3f1d2f1614a5d25f8b5f64b74e1c40a7">setUpControlInfo</a> (cMessage *const pMsg, const <a class="el" href="a00105.html#aea56b60dcb5ae8c2bde465271daf7210">LAddress::L2Type</a> &amp;pSrcAddr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attaches a "control info" (MacToNetw) structure (object) to the message pMsg.  <a href="#a3f1d2f1614a5d25f8b5f64b74e1c40a7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual cObject *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#ab57af129814d784f2a96978f036c575a">setDownControlInfo</a> (cMessage *const pMsg, <a class="el" href="a00168.html">Signal</a> *const pSignal)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attaches a "control info" (MacToPhy) structure (object) to the message pMsg.  <a href="#ab57af129814d784f2a96978f036c575a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae51d8e3e0977cfc1d4f10f8135378fc4"></a><!-- doxytag: member="BaseMacLayer::getNic" ref="ae51d8e3e0977cfc1d4f10f8135378fc4" args="() const " -->
const cModule *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#ae51d8e3e0977cfc1d4f10f8135378fc4">getNic</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointer to nic Module. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4e979a7bc017957f4414e3210b3b12db"></a><!-- doxytag: member="BaseMacLayer::getNic" ref="a4e979a7bc017957f4414e3210b3b12db" args="()" -->
cModule *&nbsp;</td><td class="memItemRight" valign="bottom"><b>getNic</b> ()</td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa7b1e6bdb734765a9f4eff7d486dfbea"></a><!-- doxytag: member="BaseMacLayer::phy" ref="aa7b1e6bdb734765a9f4eff7d486dfbea" args="" -->
<a class="el" href="a00119.html">MacToPhyInterface</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#aa7b1e6bdb734765a9f4eff7d486dfbea">phy</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handler to the physical layer. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#a8c275aa0a523808a89d2e45ade46ed1a">headerLength</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointer to the arp module.  <a href="#a8c275aa0a523808a89d2e45ade46ed1a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8a26df9da07801d8ccb530530ef57ee2"></a><!-- doxytag: member="BaseMacLayer::myMacAddr" ref="a8a26df9da07801d8ccb530530ef57ee2" args="" -->
<a class="el" href="a00105.html#aea56b60dcb5ae8c2bde465271daf7210">LAddress::L2Type</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#a8a26df9da07801d8ccb530530ef57ee2">myMacAddr</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">MAC address. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab3111737703e0d4b5198478fb1f75e60"></a><!-- doxytag: member="BaseMacLayer::coreDebug" ref="ab3111737703e0d4b5198478fb1f75e60" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#ab3111737703e0d4b5198478fb1f75e60">coreDebug</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">debug this core module? <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#ac01d16af5596dd0a23f8906a7225d5b0">phyHeaderLength</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The length of the phy header (in bits).  <a href="#ac01d16af5596dd0a23f8906a7225d5b0"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2ca8cf850c20c2823cb1daf2f4a6361e"></a><!-- doxytag: member="BaseMacLayer::BaseMacLayer" ref="a2ca8cf850c20c2823cb1daf2f4a6361e" args="(const BaseMacLayer &amp;)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#a2ca8cf850c20c2823cb1daf2f4a6361e">BaseMacLayer</a> (const <a class="el" href="a00022.html">BaseMacLayer</a> &amp;)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy constructor is not allowed. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aac78343ae4c96940669323e51ec09ada"></a><!-- doxytag: member="BaseMacLayer::operator=" ref="aac78343ae4c96940669323e51ec09ada" args="(const BaseMacLayer &amp;)" -->
<a class="el" href="a00022.html">BaseMacLayer</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00022.html#aac78343ae4c96940669323e51ec09ada">operator=</a> (const <a class="el" href="a00022.html">BaseMacLayer</a> &amp;)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Assignment operator is not allowed. <br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>A very simple MAC module template which provides de- and encapsulation of messages using the standard addresses. It also provides basic handling of lower layer messages. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Daniel Willkomm, Karl Wessel </dd></dl>

<p>Definition at line <a class="el" href="a00243_source.html#l00045">45</a> of file <a class="el" href="a00243_source.html">BaseMacLayer.h</a>.</p>
<hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="a49e0e548a6c20d002bd67afa7b76c483"></a><!-- doxytag: member="BaseMacLayer::BaseMacControlKinds" ref="a49e0e548a6c20d002bd67afa7b76c483" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="a00022.html#a49e0e548a6c20d002bd67afa7b76c483">BaseMacLayer::BaseMacControlKinds</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Control message kinds used by this layer. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a49e0e548a6c20d002bd67afa7b76c483a5e5e0e55f7cc75b0d8bad06a212371f1"></a><!-- doxytag: member="TX_OVER" ref="a49e0e548a6c20d002bd67afa7b76c483a5e5e0e55f7cc75b0d8bad06a212371f1" args="" -->TX_OVER</em>&nbsp;</td><td>
<p>Indicates the end of a transmission </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a49e0e548a6c20d002bd67afa7b76c483adebf9c77bbe6f19772866cccbef0fe4b"></a><!-- doxytag: member="PACKET_DROPPED" ref="a49e0e548a6c20d002bd67afa7b76c483adebf9c77bbe6f19772866cccbef0fe4b" args="" -->PACKET_DROPPED</em>&nbsp;</td><td>
<p>Tells the netw layer that a packet to be sent has been dropped. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a49e0e548a6c20d002bd67afa7b76c483a914b2cf7aab4597589adb15d8fec8b18"></a><!-- doxytag: member="LAST_BASE_MAC_CONTROL_KIND" ref="a49e0e548a6c20d002bd67afa7b76c483a914b2cf7aab4597589adb15d8fec8b18" args="" -->LAST_BASE_MAC_CONTROL_KIND</em>&nbsp;</td><td>
<p>Stores the id on which classes extending BaseMac should continue their own control kinds. </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="a00243_source.html#l00055">55</a> of file <a class="el" href="a00243_source.html">BaseMacLayer.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00055"></a>00055                              {
<a name="l00057"></a>00057         <a class="code" href="a00022.html#a49e0e548a6c20d002bd67afa7b76c483a5e5e0e55f7cc75b0d8bad06a212371f1">TX_OVER</a> = 23500,
<a name="l00059"></a>00059         <a class="code" href="a00022.html#a49e0e548a6c20d002bd67afa7b76c483adebf9c77bbe6f19772866cccbef0fe4b">PACKET_DROPPED</a>,
<a name="l00062"></a>00062         <a class="code" href="a00022.html#a49e0e548a6c20d002bd67afa7b76c483a914b2cf7aab4597589adb15d8fec8b18">LAST_BASE_MAC_CONTROL_KIND</a>,
<a name="l00063"></a>00063     };
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8f1f4f485d6548964c1f1cbd75d1d9c7"></a><!-- doxytag: member="BaseMacLayer::BaseMacMessageKinds" ref="a8f1f4f485d6548964c1f1cbd75d1d9c7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="a00022.html#a8f1f4f485d6548964c1f1cbd75d1d9c7">BaseMacLayer::BaseMacMessageKinds</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Message kinds used by this layer. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a8f1f4f485d6548964c1f1cbd75d1d9c7a0e31be8e59c319e75d7a9858ff984a2f"></a><!-- doxytag: member="LAST_BASE_MAC_MESSAGE_KIND" ref="a8f1f4f485d6548964c1f1cbd75d1d9c7a0e31be8e59c319e75d7a9858ff984a2f" args="" -->LAST_BASE_MAC_MESSAGE_KIND</em>&nbsp;</td><td>
<p>Stores the id on which classes extending BaseMac should continue their own message kinds. </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="a00243_source.html#l00049">49</a> of file <a class="el" href="a00243_source.html">BaseMacLayer.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00049"></a>00049                              {
<a name="l00052"></a>00052         <a class="code" href="a00022.html#a8f1f4f485d6548964c1f1cbd75d1d9c7a0e31be8e59c319e75d7a9858ff984a2f">LAST_BASE_MAC_MESSAGE_KIND</a> = 23000,
<a name="l00053"></a>00053     };
</pre></div></p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a1c05648ce7d11bc767f9acd3d64ee067"></a><!-- doxytag: member="BaseMacLayer::createConstantMapping" ref="a1c05648ce7d11bc767f9acd3d64ee067" args="(simtime_t_cref start, simtime_t_cref end, Argument::mapped_type_cref value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00121.html">Mapping</a> * BaseMacLayer::createConstantMapping </td>
          <td>(</td>
          <td class="paramtype">simtime_t_cref&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t_cref&nbsp;</td>
          <td class="paramname"> <em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Argument::mapped_type_cref&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a simple <a class="el" href="a00121.html" title="Represents a changeable mapping (mathematical function) from at least time to Argument::mapped_type...">Mapping</a> with a constant curve progression at the passed value. </p>
<p>Used by "createSignal" to create the bitrate mapping. </p>

<p>Definition at line <a class="el" href="a00242_source.html#l00242">242</a> of file <a class="el" href="a00242_source.html">BaseMacLayer.cc</a>.</p>

<p>References <a class="el" href="a00274_source.html#l00083">MappingUtils::createMapping()</a>, <a class="el" href="a00273_source.html#l01219">Mapping::LINEAR</a>, <a class="el" href="a00273_source.html#l00423">Argument::MappedZero</a>, <a class="el" href="a00121.html#ab8906dfac661d5c6a0a35cf1744f06ed">Mapping::setValue()</a>, and <a class="el" href="a00273_source.html#l00193">DimensionSet::timeDomain</a>.</p>

<p>Referenced by <a class="el" href="a00242_source.html#l00225">createSignal()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00243"></a>00243 {
<a name="l00244"></a>00244   <span class="comment">//create mapping over time</span>
<a name="l00245"></a>00245   <a class="code" href="a00121.html" title="Represents a changeable mapping (mathematical function) from at least time to Argument::mapped_type...">Mapping</a>* m = <a class="code" href="a00123.html#a0c61c76ba04339162563339b23bf42e9" title="Returns an appropriate changeable Mapping with the specified domain and the specified...">MappingUtils::createMapping</a>(<a class="code" href="a00009.html#a8523627cdc70492e5e0935b9a3a78cc4" title="Zero value of a Argument value.">Argument::MappedZero</a>, <a class="code" href="a00083.html#abf3b99a319deca6efc123ec52d77d867" title="Shortcut to a DimensionSet which only contains time.">DimensionSet::timeDomain</a>, <a class="code" href="a00121.html#aa713c0cd84f74727888bef5b9e8b0643ac8a952576b8d13258ba0f3c0f1584f9b" title="interpolates linear with next lower and next upper entry constant before the first...">Mapping::LINEAR</a>);
<a name="l00246"></a>00246 
<a name="l00247"></a>00247   <span class="comment">//set position Argument</span>
<a name="l00248"></a>00248   <a class="code" href="a00009.html" title="Defines an argument for a mapping.">Argument</a> startPos(start);
<a name="l00249"></a>00249 
<a name="l00250"></a>00250   <span class="comment">//set mapping at position</span>
<a name="l00251"></a>00251   m-&gt;<a class="code" href="a00121.html#ab8906dfac661d5c6a0a35cf1744f06ed" title="Changes the value of the Mapping at the specified position.">setValue</a>(startPos, value);
<a name="l00252"></a>00252 
<a name="l00253"></a>00253   <span class="comment">//set position Argument</span>
<a name="l00254"></a>00254   <a class="code" href="a00009.html" title="Defines an argument for a mapping.">Argument</a> endPos(end);
<a name="l00255"></a>00255 
<a name="l00256"></a>00256   <span class="comment">//set mapping at position</span>
<a name="l00257"></a>00257   m-&gt;<a class="code" href="a00121.html#ab8906dfac661d5c6a0a35cf1744f06ed" title="Changes the value of the Mapping at the specified position.">setValue</a>(endPos, value);
<a name="l00258"></a>00258 
<a name="l00259"></a>00259   <span class="keywordflow">return</span> m;
<a name="l00260"></a>00260 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a23ed373dcfd98255df5f5ffa7e30eec6"></a><!-- doxytag: member="BaseMacLayer::createRectangleMapping" ref="a23ed373dcfd98255df5f5ffa7e30eec6" args="(simtime_t_cref start, simtime_t_cref end, Argument::mapped_type_cref value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00121.html">Mapping</a> * BaseMacLayer::createRectangleMapping </td>
          <td>(</td>
          <td class="paramtype">simtime_t_cref&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t_cref&nbsp;</td>
          <td class="paramname"> <em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Argument::mapped_type_cref&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a simple <a class="el" href="a00121.html" title="Represents a changeable mapping (mathematical function) from at least time to Argument::mapped_type...">Mapping</a> with a constant curve progression at the passed value and discontinuities at the boundaries. </p>
<p>Used by "createSignal" to create the power mapping. </p>

<p>Definition at line <a class="el" href="a00242_source.html#l00262">262</a> of file <a class="el" href="a00242_source.html">BaseMacLayer.cc</a>.</p>

<p>References <a class="el" href="a00123.html#aa6e9896c0c961ade987bc00ec5f4e6a0">MappingUtils::addDiscontinuity()</a>, <a class="el" href="a00274_source.html#l00083">MappingUtils::createMapping()</a>, <a class="el" href="a00273_source.html#l01219">Mapping::LINEAR</a>, <a class="el" href="a00273_source.html#l00423">Argument::MappedZero</a>, <a class="el" href="a00274_source.html#l00402">MappingUtils::post()</a>, <a class="el" href="a00274_source.html#l00392">MappingUtils::pre()</a>, and <a class="el" href="a00273_source.html#l00193">DimensionSet::timeDomain</a>.</p>

<p>Referenced by <a class="el" href="a00242_source.html#l00225">createSignal()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00263"></a>00263 {
<a name="l00264"></a>00264   <span class="comment">//create mapping over time</span>
<a name="l00265"></a>00265   <a class="code" href="a00121.html" title="Represents a changeable mapping (mathematical function) from at least time to Argument::mapped_type...">Mapping</a>* m = <a class="code" href="a00123.html#a0c61c76ba04339162563339b23bf42e9" title="Returns an appropriate changeable Mapping with the specified domain and the specified...">MappingUtils::createMapping</a>(<a class="code" href="a00083.html#abf3b99a319deca6efc123ec52d77d867" title="Shortcut to a DimensionSet which only contains time.">DimensionSet::timeDomain</a>, <a class="code" href="a00121.html#aa713c0cd84f74727888bef5b9e8b0643ac8a952576b8d13258ba0f3c0f1584f9b" title="interpolates linear with next lower and next upper entry constant before the first...">Mapping::LINEAR</a>);
<a name="l00266"></a>00266 
<a name="l00267"></a>00267   <span class="comment">//set position Argument</span>
<a name="l00268"></a>00268   <a class="code" href="a00009.html" title="Defines an argument for a mapping.">Argument</a> startPos(start);
<a name="l00269"></a>00269   <span class="comment">//set discontinuity at position</span>
<a name="l00270"></a>00270   <a class="code" href="a00123.html#aa6e9896c0c961ade987bc00ec5f4e6a0" title="Adds a discontinuity in time-dimension, i.e. its representation, to a passed mapping...">MappingUtils::addDiscontinuity</a>(m, startPos, <a class="code" href="a00009.html#a8523627cdc70492e5e0935b9a3a78cc4" title="Zero value of a Argument value.">Argument::MappedZero</a>, <a class="code" href="a00123.html#a31183e79401391df3e2d250846ae8d0e" title="returns the closest value of simtime after passed values">MappingUtils::post</a>(start), value);
<a name="l00271"></a>00271 
<a name="l00272"></a>00272   <span class="comment">//set position Argument</span>
<a name="l00273"></a>00273   <a class="code" href="a00009.html" title="Defines an argument for a mapping.">Argument</a> endPos(end);
<a name="l00274"></a>00274   <span class="comment">//set discontinuity at position</span>
<a name="l00275"></a>00275   <a class="code" href="a00123.html#aa6e9896c0c961ade987bc00ec5f4e6a0" title="Adds a discontinuity in time-dimension, i.e. its representation, to a passed mapping...">MappingUtils::addDiscontinuity</a>(m, endPos, <a class="code" href="a00009.html#a8523627cdc70492e5e0935b9a3a78cc4" title="Zero value of a Argument value.">Argument::MappedZero</a>, <a class="code" href="a00123.html#a2cf7c04c0adea7f6e9fe49101b0197c3" title="returns the closest value of simtime before passed value">MappingUtils::pre</a>(end), value);
<a name="l00276"></a>00276 
<a name="l00277"></a>00277   <span class="keywordflow">return</span> m;
<a name="l00278"></a>00278 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a28ca155ff241c3e202a94724cc87b232"></a><!-- doxytag: member="BaseMacLayer::createSignal" ref="a28ca155ff241c3e202a94724cc87b232" args="(simtime_t_cref start, simtime_t_cref length, double power, double bitrate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00168.html">Signal</a> * BaseMacLayer::createSignal </td>
          <td>(</td>
          <td class="paramtype">simtime_t_cref&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t_cref&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>power</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>bitrate</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a simple <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a> defined over time with the passed parameters. </p>
<p>Convenience method to be able to create the appropriate <a class="el" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a> for the <a class="el" href="a00118.html" title="Stores information which is needed by the physical layer when sending a MacPkt.">MacToPhyControlInfo</a> without needing to care about creating Mappings.</p>
<p>NOTE: The created signal's transmission-power is a rectangular function. This method uses <a class="el" href="a00123.html#aa6e9896c0c961ade987bc00ec5f4e6a0" title="Adds a discontinuity in time-dimension, i.e. its representation, to a passed mapping...">MappingUtils::addDiscontinuity</a> to represent the discontinuities at the beginning and end of this rectangular function. Because of this the created mapping which represents the signal's transmission-power is still zero at the exact start and end. Please see the method <a class="el" href="a00123.html#aa6e9896c0c961ade987bc00ec5f4e6a0" title="Adds a discontinuity in time-dimension, i.e. its representation, to a passed mapping...">MappingUtils::addDiscontinuity</a> for the reason. </p>

<p>Reimplemented in <a class="el" href="a00115.html#a3a62f334346a15619853a8c6c87367aa">Mac80211</a>.</p>

<p>Definition at line <a class="el" href="a00242_source.html#l00225">225</a> of file <a class="el" href="a00242_source.html">BaseMacLayer.cc</a>.</p>

<p>References <a class="el" href="a00242_source.html#l00242">createConstantMapping()</a>, <a class="el" href="a00242_source.html#l00262">createRectangleMapping()</a>, <a class="el" href="a00279_source.html#l00180">Signal::setBitrate()</a>, and <a class="el" href="a00279_source.html#l00170">Signal::setTransmissionPower()</a>.</p>

<p>Referenced by <a class="el" href="a00335_source.html#l00703">LMacLayer::attachSignal()</a>, <a class="el" href="a00327_source.html#l00658">BMacLayer::attachSignal()</a>, and <a class="el" href="a00333_source.html#l00289">CSMAMacLayer::encapsMsg()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00226"></a>00226 {
<a name="l00227"></a>00227   simtime_t end = start + length;
<a name="l00228"></a>00228   <span class="comment">//create signal with start at current simtime and passed length</span>
<a name="l00229"></a>00229   <a class="code" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>* s = <span class="keyword">new</span> <a class="code" href="a00168.html" title="The signal class stores the physical representation of the signal of an AirFrame...">Signal</a>(start, length);
<a name="l00230"></a>00230 
<a name="l00231"></a>00231   <span class="comment">//create and set tx power mapping</span>
<a name="l00232"></a>00232   <a class="code" href="a00121.html" title="Represents a changeable mapping (mathematical function) from at least time to Argument::mapped_type...">Mapping</a>* txPowerMapping = <a class="code" href="a00022.html#a23ed373dcfd98255df5f5ffa7e30eec6" title="Creates a simple Mapping with a constant curve progression at the passed value and...">createRectangleMapping</a>(start, end, power);
<a name="l00233"></a>00233   s-&gt;<a class="code" href="a00168.html#ad8c5494d0f7bd564bf14dc0c90f9a361" title="Sets the function representing the transmission power of the signal.">setTransmissionPower</a>(txPowerMapping);
<a name="l00234"></a>00234 
<a name="l00235"></a>00235   <span class="comment">//create and set bitrate mapping</span>
<a name="l00236"></a>00236   <a class="code" href="a00121.html" title="Represents a changeable mapping (mathematical function) from at least time to Argument::mapped_type...">Mapping</a>* bitrateMapping = <a class="code" href="a00022.html#a1c05648ce7d11bc767f9acd3d64ee067" title="Creates a simple Mapping with a constant curve progression at the passed value.">createConstantMapping</a>(start, end, bitrate);
<a name="l00237"></a>00237   s-&gt;<a class="code" href="a00168.html#a86e4ecdabd5ca03ede5e2c81c6b76002" title="Sets the function representing the bitrate of the signal.">setBitrate</a>(bitrateMapping);
<a name="l00238"></a>00238 
<a name="l00239"></a>00239   <span class="keywordflow">return</span> s;
<a name="l00240"></a>00240 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab5c40c53eda6e5a5041bddebfab6e0b6"></a><!-- doxytag: member="BaseMacLayer::decapsMsg" ref="ab5c40c53eda6e5a5041bddebfab6e0b6" args="(MacPkt *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cPacket * BaseMacLayer::decapsMsg </td>
          <td>(</td>
          <td class="paramtype">MacPkt *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>decapsulate the network message from the MacPkt </p>
<p>Decapsulates the network packet from the received MacPkt </p>

<p>Reimplemented in <a class="el" href="a00064.html#a15741fcb00eb67aac58ae8d832d82433">csma</a>, <a class="el" href="a00065.html#a22f8a896439cfff47da33a015a376f90">CSMA802154</a>, and <a class="el" href="a00115.html#a538f710b1bd35d7c653763830f43085c">Mac80211</a>.</p>

<p>Definition at line <a class="el" href="a00242_source.html#l00129">129</a> of file <a class="el" href="a00242_source.html">BaseMacLayer.cc</a>.</p>

<p>References <a class="el" href="a00242_source.html#l00317">setUpControlInfo()</a>.</p>

<p>Referenced by <a class="el" href="a00333_source.html#l00204">CSMAMacLayer::handleLowerMsg()</a>, <a class="el" href="a00325_source.html#l00093">AlohaMacLayer::handleLowerMsg()</a>, <a class="el" href="a00242_source.html#l00189">handleLowerMsg()</a>, <a class="el" href="a00335_source.html#l00153">LMacLayer::handleSelfMsg()</a>, and <a class="el" href="a00327_source.html#l00224">BMacLayer::handleSelfMsg()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00130"></a>00130 {
<a name="l00131"></a>00131     cPacket *m = msg-&gt;decapsulate();
<a name="l00132"></a>00132     <a class="code" href="a00022.html#a3f1d2f1614a5d25f8b5f64b74e1c40a7" title="Attaches a &amp;quot;control info&amp;quot; (MacToNetw) structure (object) to the message...">setUpControlInfo</a>(m, msg-&gt;getSrcAddr());
<a name="l00133"></a>00133     <span class="comment">// delete the macPkt</span>
<a name="l00134"></a>00134     <span class="keyword">delete</span> msg;
<a name="l00135"></a>00135     coreEV &lt;&lt; <span class="stringliteral">&quot; message decapsulated &quot;</span> &lt;&lt; endl;
<a name="l00136"></a>00136     <span class="keywordflow">return</span> m;
<a name="l00137"></a>00137 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a32d47cbd6940c09071e0f0e777cf6716"></a><!-- doxytag: member="BaseMacLayer::encapsMsg" ref="a32d47cbd6940c09071e0f0e777cf6716" args="(cPacket *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MacPkt * BaseMacLayer::encapsMsg </td>
          <td>(</td>
          <td class="paramtype">cPacket *&nbsp;</td>
          <td class="paramname"> <em>netwPkt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Encapsulate the NetwPkt into an MacPkt. </p>
<p>Encapsulates the received NetwPkt into a MacPkt and set all needed header fields. </p>

<p>Reimplemented in <a class="el" href="a00006.html#a975014a8919ee14070e4c0dd17e4d2f7">AlohaMacLayer</a>, <a class="el" href="a00066.html#a12641a9e99a3064797647cf3b4946824">CSMAMacLayer</a>, <a class="el" href="a00113.html#aa0c8912e78373e5cf5453889e0f23714">LMacLayer</a>, and <a class="el" href="a00115.html#aa44171fa07d51ec487f7481740525466">Mac80211</a>.</p>

<p>Definition at line <a class="el" href="a00242_source.html#l00143">143</a> of file <a class="el" href="a00242_source.html">BaseMacLayer.cc</a>.</p>

<p>References <a class="el" href="a00242_source.html#l00310">getUpperDestinationFromControlInfo()</a>, <a class="el" href="a00243_source.html#l00076">headerLength</a>, and <a class="el" href="a00243_source.html#l00081">myMacAddr</a>.</p>

<p>Referenced by <a class="el" href="a00242_source.html#l00175">handleUpperMsg()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00144"></a>00144 {
<a name="l00145"></a>00145     MacPkt *pkt = <span class="keyword">new</span> MacPkt(netwPkt-&gt;getName(), netwPkt-&gt;getKind());
<a name="l00146"></a>00146     pkt-&gt;setBitLength(<a class="code" href="a00022.html#a8c275aa0a523808a89d2e45ade46ed1a" title="Pointer to the arp module.">headerLength</a>);
<a name="l00147"></a>00147 
<a name="l00148"></a>00148     <span class="comment">// copy dest address from the Control Info attached to the network</span>
<a name="l00149"></a>00149     <span class="comment">// message by the network layer</span>
<a name="l00150"></a>00150     cObject* cInfo = netwPkt-&gt;removeControlInfo();
<a name="l00151"></a>00151 
<a name="l00152"></a>00152     coreEV &lt;&lt;<span class="stringliteral">&quot;CInfo removed, mac addr=&quot;</span>&lt;&lt; <a class="code" href="a00022.html#a48135ffa21044a71d92149d5301f9deb" title="Extracts the MAC address from the &amp;quot;control info&amp;quot; structure (object).">getUpperDestinationFromControlInfo</a>(cInfo) &lt;&lt; endl;
<a name="l00153"></a>00153     pkt-&gt;setDestAddr(<a class="code" href="a00022.html#a48135ffa21044a71d92149d5301f9deb" title="Extracts the MAC address from the &amp;quot;control info&amp;quot; structure (object).">getUpperDestinationFromControlInfo</a>(cInfo));
<a name="l00154"></a>00154 
<a name="l00155"></a>00155     <span class="comment">//delete the control info</span>
<a name="l00156"></a>00156     <span class="keyword">delete</span> cInfo;
<a name="l00157"></a>00157 
<a name="l00158"></a>00158     <span class="comment">//set the src address to own mac address (nic module getId())</span>
<a name="l00159"></a>00159     pkt-&gt;setSrcAddr(<a class="code" href="a00022.html#a8a26df9da07801d8ccb530530ef57ee2" title="MAC address.">myMacAddr</a>);
<a name="l00160"></a>00160 
<a name="l00161"></a>00161     <span class="comment">//encapsulate the network packet</span>
<a name="l00162"></a>00162     pkt-&gt;encapsulate(netwPkt);
<a name="l00163"></a>00163     coreEV &lt;&lt;<span class="stringliteral">&quot;pkt encapsulated\n&quot;</span>;
<a name="l00164"></a>00164 
<a name="l00165"></a>00165     <span class="keywordflow">return</span> pkt;
<a name="l00166"></a>00166 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a68f36d36168a8ba5c8a4c84c17f1ba40"></a><!-- doxytag: member="BaseMacLayer::getConnectionManager" ref="a68f36d36168a8ba5c8a4c84c17f1ba40" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00015.html">BaseConnectionManager</a> * BaseMacLayer::getConnectionManager </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a pointer to this MACs NICs <a class="el" href="a00050.html" title="BaseConnectionManager implementation which only defines a specific max interference...">ConnectionManager</a> module. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>pointer to the connection manager module </dd></dl>

<p>Definition at line <a class="el" href="a00242_source.html#l00306">306</a> of file <a class="el" href="a00242_source.html">BaseMacLayer.cc</a>.</p>

<p>References <a class="el" href="a00243_source.html#l00257">getNic()</a>.</p>

<p>Referenced by <a class="el" href="a00337_source.html#l00061">Mac80211::initialize()</a>, and <a class="el" href="a00329_source.html#l00046">csma::initialize()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00306"></a>00306                                                                 {
<a name="l00307"></a>00307   <span class="keywordflow">return</span> <a class="code" href="a00022.html#a68f36d36168a8ba5c8a4c84c17f1ba40" title="Returns a pointer to this MACs NICs ConnectionManager module.">ChannelAccess::getConnectionManager</a>(<a class="code" href="a00022.html#ae51d8e3e0977cfc1d4f10f8135378fc4" title="Pointer to nic Module.">getNic</a>());
<a name="l00308"></a>00308 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a48135ffa21044a71d92149d5301f9deb"></a><!-- doxytag: member="BaseMacLayer::getUpperDestinationFromControlInfo" ref="a48135ffa21044a71d92149d5301f9deb" args="(const cObject *const pCtrlInfo) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="a00105.html#aea56b60dcb5ae8c2bde465271daf7210">LAddress::L2Type</a> &amp; BaseMacLayer::getUpperDestinationFromControlInfo </td>
          <td>(</td>
          <td class="paramtype">const cObject *const &nbsp;</td>
          <td class="paramname"> <em>pCtrlInfo</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Extracts the MAC address from the "control info" structure (object). </p>
<p>Extract the destination MAC address from the "control info" which was prev. set by <a class="el" href="a00137.html#a9556c1d066423e39247217d7a7f2a456" title="Attaches a &quot;control info&quot; structure (object) to the message pMsg.">NetwToMacControlInfo::setControlInfo()</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pCtrlInfo</em>&nbsp;</td><td>The "control info" structure (object) prev. set by <a class="el" href="a00137.html#a9556c1d066423e39247217d7a7f2a456" title="Attaches a &quot;control info&quot; structure (object) to the message pMsg.">NetwToMacControlInfo::setControlInfo()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The MAC address of message receiver. </dd></dl>

<p>Definition at line <a class="el" href="a00242_source.html#l00310">310</a> of file <a class="el" href="a00242_source.html">BaseMacLayer.cc</a>.</p>

<p>References <a class="el" href="a00291_source.html#l00037">NetwToMacControlInfo::getDestFromControlInfo()</a>.</p>

<p>Referenced by <a class="el" href="a00327_source.html#l00622">BMacLayer::addToQueue()</a>, <a class="el" href="a00337_source.html#l00207">Mac80211::encapsMsg()</a>, <a class="el" href="a00335_source.html#l00676">LMacLayer::encapsMsg()</a>, <a class="el" href="a00325_source.html#l00060">AlohaMacLayer::encapsMsg()</a>, <a class="el" href="a00242_source.html#l00143">encapsMsg()</a>, and <a class="el" href="a00329_source.html#l00180">csma::handleUpperMsg()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00310"></a>00310                                                                                                            {
<a name="l00311"></a>00311   <span class="keywordflow">return</span> <a class="code" href="a00137.html#add42e098a1af72c3fbc8be746d04b27f" title="Extracts the MAC address from the &amp;quot;control info&amp;quot; structure (object).">NetwToMacControlInfo::getDestFromControlInfo</a>(pCtrlInfo);
<a name="l00312"></a>00312 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a413375cec02b990a521b62086a02264c"></a><!-- doxytag: member="BaseMacLayer::handleLowerMsg" ref="a413375cec02b990a521b62086a02264c" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseMacLayer::handleLowerMsg </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>If message arrives from lower layer, check whether it is for us. Send it up if yes.</p>
<p>This basic implementation just forwards all message that are broadcast (destAddr = L2BROADCAST) or destined for this node (destAddr = nic module getId()) to the network layer</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="a00021.html#adbf061566606041db811b519f0400ed5" title="Sends a message to the upper layer.">sendUp</a> </dd></dl>

<p>Implements <a class="el" href="a00021.html#a5ca2278405070baa474dfbf059930247">BaseLayer</a>.</p>

<p>Reimplemented in <a class="el" href="a00006.html#a585dd6a0b5c3c6a33e1f760ccd8ac29e">AlohaMacLayer</a>, <a class="el" href="a00033.html#ac16d3f8eda5c8d43c4a33a581aa4fbfb">BMacLayer</a>, <a class="el" href="a00064.html#afde05c6a829f672b556959acb26b0098">csma</a>, <a class="el" href="a00066.html#a83911b5673de047bcfc3c9b0a719ff15">CSMAMacLayer</a>, <a class="el" href="a00113.html#a0a7619fa37aadbcc587c735cc5cbcf99">LMacLayer</a>, and <a class="el" href="a00115.html#ac8bfb04590aab2434bd8d17ee4e213d9">Mac80211</a>.</p>

<p>Definition at line <a class="el" href="a00242_source.html#l00189">189</a> of file <a class="el" href="a00242_source.html">BaseMacLayer.cc</a>.</p>

<p>References <a class="el" href="a00242_source.html#l00129">decapsMsg()</a>, <a class="el" href="a00295_source.html#l00074">LAddress::isL2Broadcast()</a>, <a class="el" href="a00243_source.html#l00081">myMacAddr</a>, and <a class="el" href="a00240_source.html#l00115">BaseLayer::sendUp()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00190"></a>00190 {
<a name="l00191"></a>00191     MacPkt*          mac  = <span class="keyword">static_cast&lt;</span>MacPkt *<span class="keyword">&gt;</span>(msg);
<a name="l00192"></a>00192     <a class="code" href="a00105.html#aea56b60dcb5ae8c2bde465271daf7210" title="Type definition for a L2 (MAC) address.">LAddress::L2Type</a> dest = mac-&gt;getDestAddr();
<a name="l00193"></a>00193     <a class="code" href="a00105.html#aea56b60dcb5ae8c2bde465271daf7210" title="Type definition for a L2 (MAC) address.">LAddress::L2Type</a> src  = mac-&gt;getSrcAddr();
<a name="l00194"></a>00194 
<a name="l00195"></a>00195     <span class="comment">//only foward to upper layer if message is for me or broadcast</span>
<a name="l00196"></a>00196     <span class="keywordflow">if</span>((dest == <a class="code" href="a00022.html#a8a26df9da07801d8ccb530530ef57ee2" title="MAC address.">myMacAddr</a>) || <a class="code" href="a00105.html#a3890f1c7314c5695e32252468e6bd5a5" title="Test if a L2 address (pSrcAddr) is a broadcast address.">LAddress::isL2Broadcast</a>(dest)) {
<a name="l00197"></a>00197     coreEV &lt;&lt; <span class="stringliteral">&quot;message with mac addr &quot;</span> &lt;&lt; src
<a name="l00198"></a>00198          &lt;&lt; <span class="stringliteral">&quot; for me (dest=&quot;</span> &lt;&lt; dest
<a name="l00199"></a>00199          &lt;&lt; <span class="stringliteral">&quot;) -&gt; forward packet to upper layer\n&quot;</span>;
<a name="l00200"></a>00200     <a class="code" href="a00021.html#adbf061566606041db811b519f0400ed5" title="Sends a message to the upper layer.">sendUp</a>(<a class="code" href="a00022.html#ab5c40c53eda6e5a5041bddebfab6e0b6" title="decapsulate the network message from the MacPkt">decapsMsg</a>(mac));
<a name="l00201"></a>00201     }
<a name="l00202"></a>00202     <span class="keywordflow">else</span>{
<a name="l00203"></a>00203     coreEV &lt;&lt; <span class="stringliteral">&quot;message with mac addr &quot;</span> &lt;&lt; src
<a name="l00204"></a>00204          &lt;&lt; <span class="stringliteral">&quot; not for me (dest=&quot;</span> &lt;&lt; dest
<a name="l00205"></a>00205          &lt;&lt; <span class="stringliteral">&quot;) -&gt; delete (my MAC=&quot;</span>&lt;&lt;<a class="code" href="a00022.html#a8a26df9da07801d8ccb530530ef57ee2" title="MAC address.">myMacAddr</a>&lt;&lt;<span class="stringliteral">&quot;)\n&quot;</span>;
<a name="l00206"></a>00206     <span class="keyword">delete</span> mac;
<a name="l00207"></a>00207     }
<a name="l00208"></a>00208 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6de2ca07018de313a7147a03e6d77bff"></a><!-- doxytag: member="BaseMacLayer::handleUpperMsg" ref="a6de2ca07018de313a7147a03e6d77bff" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseMacLayer::handleUpperMsg </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>mac</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle messages comming from the network layer. </p>
<p>Here is the place to implement a real medium access functionality.</p>
<p>If message arrives from upper layer, make a MAC packet from it (encapsMsg) and send it down (sendDown).</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="a00022.html#a32d47cbd6940c09071e0f0e777cf6716" title="Encapsulate the NetwPkt into an MacPkt.">encapsMsg</a>, <a class="el" href="a00021.html#a1873d6e3fc6d92cf8482b39f1c5ac6c8" title="Sends a message to the lower layer.">sendDown</a></dd></dl>
<p>Redefine this function if you want to process messages from upper layers before they are send to lower layers.</p>
<p>To forward the message to lower layers after processing it please use <a class="el" href="a00021.html#a1873d6e3fc6d92cf8482b39f1c5ac6c8">sendDown</a>. It will take care of anything needed </p>

<p>Implements <a class="el" href="a00021.html#a8c0fcfb2e806357a65d5bdb1c338627b">BaseLayer</a>.</p>

<p>Reimplemented in <a class="el" href="a00033.html#a43c9f5377b89dd4cd4e4e48fb3e96107">BMacLayer</a>, <a class="el" href="a00064.html#ad85c18d90e41eb2074593a44b64ab855">csma</a>, <a class="el" href="a00066.html#a06c96c060afdff5c0f348b5ebef5c54d">CSMAMacLayer</a>, <a class="el" href="a00113.html#a7de5ee6f865e3ae8e7a9841291d36a37">LMacLayer</a>, and <a class="el" href="a00115.html#af7e230f8713536482417699f2f6bee71">Mac80211</a>.</p>

<p>Definition at line <a class="el" href="a00242_source.html#l00175">175</a> of file <a class="el" href="a00242_source.html">BaseMacLayer.cc</a>.</p>

<p>References <a class="el" href="a00242_source.html#l00143">encapsMsg()</a>, and <a class="el" href="a00240_source.html#l00110">BaseLayer::sendDown()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00176"></a>00176 {
<a name="l00177"></a>00177   assert(dynamic_cast&lt;cPacket*&gt;(mac));
<a name="l00178"></a>00178     <a class="code" href="a00021.html#a1873d6e3fc6d92cf8482b39f1c5ac6c8" title="Sends a message to the lower layer.">sendDown</a>(<a class="code" href="a00022.html#a32d47cbd6940c09071e0f0e777cf6716" title="Encapsulate the NetwPkt into an MacPkt.">encapsMsg</a>(static_cast&lt;cPacket*&gt;(mac)));
<a name="l00179"></a>00179 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a61c82dc3b225eac37f7fa9936c28c2c3"></a><!-- doxytag: member="BaseMacLayer::initialize" ref="a61c82dc3b225eac37f7fa9936c28c2c3" args="(int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseMacLayer::initialize </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stage</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialization of the module and some variables. </p>
<p>First we have to initialize the module from which we derived ours, in this case <a class="el" href="a00021.html" title="A very simple layer template.">BaseLayer</a>. </p>

<p>Reimplemented from <a class="el" href="a00021.html#a70f5ea30a9980d57b8384faed29ec3eb">BaseLayer</a>.</p>

<p>Reimplemented in <a class="el" href="a00006.html#abab6939a0c82122391528d386df97c2c">AlohaMacLayer</a>, <a class="el" href="a00033.html#aacfdc6bca51f7097b58556fdf1744689">BMacLayer</a>, <a class="el" href="a00064.html#a24e7a48bd1d9036139c75b558ade4161">csma</a>, <a class="el" href="a00065.html#abbb7175c6f28345ca29c3ca6f98732fc">CSMA802154</a>, <a class="el" href="a00066.html#a660262c629f33b00401249d3fdac49be">CSMAMacLayer</a>, <a class="el" href="a00113.html#a2100ca7de5c5eedb3e7f0e11ca9fca14">LMacLayer</a>, <a class="el" href="a00115.html#ab81dae24d79c2ef010301e2c219966c1">Mac80211</a>, <a class="el" href="a00116.html#aa7351afc794f983e34dbc86d63cb3dea">Mac80211MultiChannel</a>, and <a class="el" href="a00198.html#a0fcaae9c3cefb73372b7290ff4d9092d">UWBIRMac</a>.</p>

<p>Definition at line <a class="el" href="a00242_source.html#l00050">50</a> of file <a class="el" href="a00242_source.html">BaseMacLayer.cc</a>.</p>

<p>References <a class="el" href="a00243_source.html#l00084">coreDebug</a>, <a class="el" href="a00246_source.html#l00093">BaseModule::findHost()</a>, <a class="el" href="a00243_source.html#l00257">getNic()</a>, <a class="el" href="a00119.html#a33d2b623de8374e17224467d413a3c55">MacToPhyInterface::getPhyHeaderLength()</a>, <a class="el" href="a00243_source.html#l00076">headerLength</a>, <a class="el" href="a00295_source.html#l00062">LAddress::L2NULL</a>, <a class="el" href="a00003.html#a7d81614e8dea6e3a7316184e6b9e959c">AddressingInterface::myMacAddr()</a>, <a class="el" href="a00243_source.html#l00081">myMacAddr</a>, <a class="el" href="a00243_source.html#l00068">phy</a>, <a class="el" href="a00243_source.html#l00093">phyHeaderLength</a>, and <a class="el" href="a00242_source.html#l00086">registerInterface()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00051"></a>00051 {
<a name="l00052"></a>00052     <a class="code" href="a00022.html#a61c82dc3b225eac37f7fa9936c28c2c3" title="Initialization of the module and some variables.">BaseLayer::initialize</a>(stage);
<a name="l00053"></a>00053 
<a name="l00054"></a>00054     <span class="keywordflow">if</span>(stage==0)
<a name="l00055"></a>00055     {
<a name="l00056"></a>00056       <span class="comment">// get handle to phy layer</span>
<a name="l00057"></a>00057         <span class="keywordflow">if</span> ((<a class="code" href="a00022.html#aa7b1e6bdb734765a9f4eff7d486dfbea" title="Handler to the physical layer.">phy</a> = <a class="code" href="a00090.html" title="Provides method templates to find omnet modules.">FindModule&lt;MacToPhyInterface*&gt;::findSubModule</a>(<a class="code" href="a00022.html#ae51d8e3e0977cfc1d4f10f8135378fc4" title="Pointer to nic Module.">getNic</a>())) == NULL) {
<a name="l00058"></a>00058           error(<span class="stringliteral">&quot;Could not find a PHY module.&quot;</span>);
<a name="l00059"></a>00059         }
<a name="l00060"></a>00060         <a class="code" href="a00022.html#a8c275aa0a523808a89d2e45ade46ed1a" title="Pointer to the arp module.">headerLength</a>    = par(<span class="stringliteral">&quot;headerLength&quot;</span>);
<a name="l00061"></a>00061         <a class="code" href="a00022.html#ac01d16af5596dd0a23f8906a7225d5b0" title="The length of the phy header (in bits).">phyHeaderLength</a> = <a class="code" href="a00022.html#aa7b1e6bdb734765a9f4eff7d486dfbea" title="Handler to the physical layer.">phy</a>-&gt;<a class="code" href="a00119.html#a33d2b623de8374e17224467d413a3c55" title="Returns the length of the phy header in bits.">getPhyHeaderLength</a>();
<a name="l00062"></a>00062 
<a name="l00063"></a>00063         hasPar(<span class="stringliteral">&quot;coreDebug&quot;</span>) ? <a class="code" href="a00022.html#ab3111737703e0d4b5198478fb1f75e60" title="debug this core module?">coreDebug</a> = par(<span class="stringliteral">&quot;coreDebug&quot;</span>).boolValue() : <a class="code" href="a00022.html#ab3111737703e0d4b5198478fb1f75e60" title="debug this core module?">coreDebug</a> = <span class="keyword">false</span>;
<a name="l00064"></a>00064     }
<a name="l00065"></a>00065     <span class="keywordflow">if</span> (<a class="code" href="a00022.html#a8a26df9da07801d8ccb530530ef57ee2" title="MAC address.">myMacAddr</a> == <a class="code" href="a00105.html#a6db1e8dbd0d23dec49ce7b59f5c15976" title="NULL address for L2 addresses.">LAddress::L2NULL</a>) {
<a name="l00066"></a>00066       <span class="comment">// see if there is an addressing module available</span>
<a name="l00067"></a>00067         <span class="comment">// otherwise use NIC modules id as MAC address</span>
<a name="l00068"></a>00068         <a class="code" href="a00003.html" title="Interface for modules which assign L2 and L3 addresses for modules.">AddressingInterface</a>* addrScheme = <a class="code" href="a00090.html" title="Provides method templates to find omnet modules.">FindModule&lt;AddressingInterface*&gt;::findSubModule</a>(<a class="code" href="a00024.html#aabf0226159b22b46e70031fd3bb3b1b2" title="Function to get a pointer to the host module.">findHost</a>());
<a name="l00069"></a>00069         <span class="keywordflow">if</span>(addrScheme) {
<a name="l00070"></a>00070             <a class="code" href="a00022.html#a8a26df9da07801d8ccb530530ef57ee2" title="MAC address.">myMacAddr</a> = addrScheme-&gt;<a class="code" href="a00003.html#a7d81614e8dea6e3a7316184e6b9e959c" title="Returns the L2 address for the passed mac.">myMacAddr</a>(<span class="keyword">this</span>);
<a name="l00071"></a>00071         } <span class="keywordflow">else</span> {
<a name="l00072"></a>00072             <span class="keyword">const</span> std::string addressString = par(<span class="stringliteral">&quot;address&quot;</span>).stringValue();
<a name="l00073"></a>00073             <span class="keywordflow">if</span> (addressString.empty() || addressString == <span class="stringliteral">&quot;auto&quot;</span>)
<a name="l00074"></a>00074                 <a class="code" href="a00022.html#a8a26df9da07801d8ccb530530ef57ee2" title="MAC address.">myMacAddr</a> = <a class="code" href="a00105.html#aea56b60dcb5ae8c2bde465271daf7210" title="Type definition for a L2 (MAC) address.">LAddress::L2Type</a>(<a class="code" href="a00022.html#ae51d8e3e0977cfc1d4f10f8135378fc4" title="Pointer to nic Module.">getNic</a>()-&gt;getId());
<a name="l00075"></a>00075             <span class="keywordflow">else</span>
<a name="l00076"></a>00076                 <a class="code" href="a00022.html#a8a26df9da07801d8ccb530530ef57ee2" title="MAC address.">myMacAddr</a> = <a class="code" href="a00105.html#aea56b60dcb5ae8c2bde465271daf7210" title="Type definition for a L2 (MAC) address.">LAddress::L2Type</a>(addressString.c_str());
<a name="l00077"></a>00077             <span class="comment">// use streaming operator for string conversion, this makes it more</span>
<a name="l00078"></a>00078             <span class="comment">// independent from the myMacAddr type</span>
<a name="l00079"></a>00079             std::ostringstream oSS; oSS &lt;&lt; <a class="code" href="a00022.html#a8a26df9da07801d8ccb530530ef57ee2" title="MAC address.">myMacAddr</a>;
<a name="l00080"></a>00080             par(<span class="stringliteral">&quot;address&quot;</span>).setStringValue(oSS.str());
<a name="l00081"></a>00081         }
<a name="l00082"></a>00082         <a class="code" href="a00022.html#adc87295362ca7859cb6fe2a5bbe3c90d" title="Registers this bridge&amp;#39;s NIC with INET&amp;#39;s InterfaceTable.">registerInterface</a>();
<a name="l00083"></a>00083     }
<a name="l00084"></a>00084 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab57af129814d784f2a96978f036c575a"></a><!-- doxytag: member="BaseMacLayer::setDownControlInfo" ref="ab57af129814d784f2a96978f036c575a" args="(cMessage *const pMsg, Signal *const pSignal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cObject * BaseMacLayer::setDownControlInfo </td>
          <td>(</td>
          <td class="paramtype">cMessage *const &nbsp;</td>
          <td class="paramname"> <em>pMsg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00168.html">Signal</a> *const &nbsp;</td>
          <td class="paramname"> <em>pSignal</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Attaches a "control info" (MacToPhy) structure (object) to the message pMsg. </p>
<p>This is most useful when passing packets between protocol layers of a protocol stack, the control info will contain the signal.</p>
<p>The "control info" object will be deleted when the message is deleted. Only one "control info" structure can be attached (the second setL3ToL2ControlInfo() call throws an error).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pMsg</em>&nbsp;</td><td>The message where the "control info" shall be attached. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pSignal</em>&nbsp;</td><td>The signal which should be send. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00242_source.html#l00325">325</a> of file <a class="el" href="a00242_source.html">BaseMacLayer.cc</a>.</p>

<p>References <a class="el" href="a00269_source.html#l00092">MacToPhyControlInfo::setControlInfo()</a>.</p>

<p>Referenced by <a class="el" href="a00335_source.html#l00703">LMacLayer::attachSignal()</a>, <a class="el" href="a00327_source.html#l00658">BMacLayer::attachSignal()</a>, <a class="el" href="a00333_source.html#l00289">CSMAMacLayer::encapsMsg()</a>, <a class="el" href="a00337_source.html#l00839">Mac80211::sendACKframe()</a>, <a class="el" href="a00337_source.html#l00935">Mac80211::sendBROADCASTframe()</a>, <a class="el" href="a00337_source.html#l00904">Mac80211::sendCTSframe()</a>, <a class="el" href="a00337_source.html#l00803">Mac80211::sendDATAframe()</a>, and <a class="el" href="a00337_source.html#l00867">Mac80211::sendRTSframe()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00326"></a>00326 {
<a name="l00327"></a>00327   <span class="keywordflow">return</span> <a class="code" href="a00118.html#a5b1c091d57ea342922940df4d66491df" title="Attaches a &amp;quot;control info&amp;quot; structure (object) to the message pMsg.">MacToPhyControlInfo::setControlInfo</a>(pMsg, pSignal);
<a name="l00328"></a>00328 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a3f1d2f1614a5d25f8b5f64b74e1c40a7"></a><!-- doxytag: member="BaseMacLayer::setUpControlInfo" ref="a3f1d2f1614a5d25f8b5f64b74e1c40a7" args="(cMessage *const pMsg, const LAddress::L2Type &amp;pSrcAddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cObject * BaseMacLayer::setUpControlInfo </td>
          <td>(</td>
          <td class="paramtype">cMessage *const &nbsp;</td>
          <td class="paramname"> <em>pMsg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00105.html#aea56b60dcb5ae8c2bde465271daf7210">LAddress::L2Type</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>pSrcAddr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Attaches a "control info" (MacToNetw) structure (object) to the message pMsg. </p>
<p>This is most useful when passing packets between protocol layers of a protocol stack, the control info will contain the destination MAC address.</p>
<p>The "control info" object will be deleted when the message is deleted. Only one "control info" structure can be attached (the second setL3ToL2ControlInfo() call throws an error).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pMsg</em>&nbsp;</td><td>The message where the "control info" shall be attached. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pSrcAddr</em>&nbsp;</td><td>The MAC address of the message receiver. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00242_source.html#l00317">317</a> of file <a class="el" href="a00242_source.html">BaseMacLayer.cc</a>.</p>

<p>References <a class="el" href="a00286_source.html#l00122">MacToNetwControlInfo::setControlInfo()</a>.</p>

<p>Referenced by <a class="el" href="a00337_source.html#l00237">Mac80211::decapsMsg()</a>, <a class="el" href="a00329_source.html#l00846">csma::decapsMsg()</a>, and <a class="el" href="a00242_source.html#l00129">decapsMsg()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00318"></a>00318 {
<a name="l00319"></a>00319   <span class="keywordflow">return</span> <a class="code" href="a00117.html#a08ffc5756ab41f2c5ba4e7fa1f64b924" title="Attaches a &amp;quot;control info&amp;quot; structure (object) to the message pMsg.">MacToNetwControlInfo::setControlInfo</a>(pMsg, pSrcAddr);
<a name="l00320"></a>00320 }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a8c275aa0a523808a89d2e45ade46ed1a"></a><!-- doxytag: member="BaseMacLayer::headerLength" ref="a8c275aa0a523808a89d2e45ade46ed1a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="a00022.html#a8c275aa0a523808a89d2e45ade46ed1a">BaseMacLayer::headerLength</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pointer to the arp module. </p>
<p>Length of the MacPkt header </p>

<p>Reimplemented in <a class="el" href="a00033.html#a3694d6babd2a5ad9bd02d5494241e89c">BMacLayer</a>.</p>

<p>Definition at line <a class="el" href="a00243_source.html#l00076">76</a> of file <a class="el" href="a00243_source.html">BaseMacLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00335_source.html#l00676">LMacLayer::encapsMsg()</a>, <a class="el" href="a00325_source.html#l00060">AlohaMacLayer::encapsMsg()</a>, <a class="el" href="a00242_source.html#l00143">encapsMsg()</a>, <a class="el" href="a00335_source.html#l00153">LMacLayer::handleSelfMsg()</a>, <a class="el" href="a00329_source.html#l00180">csma::handleUpperMsg()</a>, <a class="el" href="a00335_source.html#l00029">LMacLayer::initialize()</a>, and <a class="el" href="a00242_source.html#l00050">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="ac01d16af5596dd0a23f8906a7225d5b0"></a><!-- doxytag: member="BaseMacLayer::phyHeaderLength" ref="ac01d16af5596dd0a23f8906a7225d5b0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="a00022.html#ac01d16af5596dd0a23f8906a7225d5b0">BaseMacLayer::phyHeaderLength</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The length of the phy header (in bits). </p>
<p>Since the MAC layer has to create the signal for a transmission it has to know the total length of the packet and therefore needs the length of the phy header. </p>

<p>Definition at line <a class="el" href="a00243_source.html#l00093">93</a> of file <a class="el" href="a00243_source.html">BaseMacLayer.h</a>.</p>

<p>Referenced by <a class="el" href="a00242_source.html#l00050">initialize()</a>, and <a class="el" href="a00337_source.html#l01107">Mac80211::packetDuration()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/base/modules/<a class="el" href="a00243_source.html">BaseMacLayer.h</a></li>
<li>src/base/modules/<a class="el" href="a00242_source.html">BaseMacLayer.cc</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed Dec 14 16:01:48 2011 for MiXiM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
